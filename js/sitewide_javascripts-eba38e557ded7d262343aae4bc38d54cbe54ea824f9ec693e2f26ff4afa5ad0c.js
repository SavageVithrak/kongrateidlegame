var Kongregate=Kongregate||{};Kongregate.Utils=Kongregate.Utils||{},Kongregate.Utils.isKlient=function(){return/klient|kartridge\//.test(navigator.userAgent.toLowerCase())},Kongregate.Utils.findKongregateWindow=function(){if(!Kongregate.Utils.isKlient())return top;for(var e=window,t=window.parent;t!==top;)t=(e=t).parent;return e},Kongregate.Utils.catchErrors=function(e,t,n){return function(){try{return e.apply(t,arguments)}catch(e){return Kongregate.Log.error("catchErrors caught unhandled exception",e),n}}};var Prototype={Version:"1.7_rc3",Browser:function(){var e=navigator.userAgent,t="[object Opera]"==Object.prototype.toString.call(window.opera);return{IE:!!window.attachEvent&&!t,Opera:t,WebKit:-1<e.indexOf("AppleWebKit/"),Gecko:-1<e.indexOf("Gecko")&&-1===e.indexOf("KHTML"),MobileSafari:/Apple.*Mobile/.test(e)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var e=window.Element||window.HTMLElement;return!(!e||!e.prototype)}(),SpecificElementExtensions:function(){if(void 0!==window.HTMLDivElement)return!0;var e=document.createElement("div"),t=document.createElement("form"),n=!1;return e.__proto__&&e.__proto__!==t.__proto__&&(n=!0),n}()},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(e){return e}};Prototype.Browser.MobileSafari&&(Prototype.BrowserFeatures.SpecificElementExtensions=!1);var Abstract={},Try={these:function(){for(var e,t=0,n=arguments.length;t<n;t++){var i=arguments[t];try{e=i();break}catch(e){}}return e}},Class=function(){function e(){}var t=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}();return{create:function(){function t(){this.initialize.apply(this,arguments)}var n=null,i=$A(arguments);Object.isFunction(i[0])&&(n=i.shift()),Object.extend(t,Class.Methods),t.superclass=n,t.subclasses=[],n&&(e.prototype=n.prototype,t.prototype=new e,n.subclasses.push(t)),n=0;for(var o=i.length;n<o;n++)t.addMethods(i[n]);return t.prototype.initialize||(t.prototype.initialize=Prototype.emptyFunction),t.prototype.constructor=t},Methods:{addMethods:function(e){var n=this.superclass&&this.superclass.prototype,i=Object.keys(e);t&&(e.toString!=Object.prototype.toString&&i.push("toString"),e.valueOf!=Object.prototype.valueOf&&i.push("valueOf"));for(var o=0,r=i.length;o<r;o++){var s=i[o],a=e[s];if(n&&Object.isFunction(a)&&"$super"==a.argumentNames()[0]){var l=a;a=function(e){return function(){return n[e].apply(this,arguments)}}(s).wrap(l),a.valueOf=l.valueOf.bind(l),a.toString=l.toString.bind(l)}this.prototype[s]=a}return this}}}}();!function(){function e(e){switch(e){case null:return"Null";case void 0:return"Undefined"}switch(typeof e){case"boolean":return"Boolean";case"number":return"Number";case"string":return"String"}return"Object"}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(t,i,o){switch("Object"===e(i=i[t])&&"function"==typeof i.toJSON&&(i=i.toJSON(t)),t=r.call(i)){case"[object Number]":case"[object Boolean]":case"[object String]":i=i.valueOf()}switch(i){case null:return"null";case!0:return"true";case!1:return"false"}switch(typeof i){case"string":return i.inspect(!0);case"number":return isFinite(i)?String(i):"null";case"object":for(var s=0,a=o.length;s<a;s++)if(o[s]===i)throw new TypeError;o.push(i);var l=[];if("[object Array]"===t){for(s=0,a=i.length;s<a;s++){var c=n(s,i,o);l.push(void 0===c?"null":c)}l="["+l.join(",")+"]"}else{var u=Object.keys(i);for(s=0,a=u.length;s<a;s++)void 0!==(c=n(t=u[s],i,o))&&l.push(t.inspect(!0)+":"+c);l="{"+l.join(",")+"}"}return o.pop(),l}}function i(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}var r=Object.prototype.toString,s=window.JSON&&"function"==typeof JSON.stringify&&"0"===JSON.stringify(0)&&void 0===JSON.stringify(Prototype.K);"function"==typeof Array.isArray&&Array.isArray([])&&!Array.isArray({})&&(i=Array.isArray),t(Object,{extend:t,inspect:function(e){try{return o(e)?"undefined":null===e?"null":e.inspect?e.inspect():String(e)}catch(e){if(e instanceof RangeError)return"...";throw e}},toJSON:s?function(e){return JSON.stringify(e)}:function(e){return n("",{"":e},[])},toQueryString:function(e){return $H(e).toQueryString()},toHTML:function(e){return e&&e.toHTML?e.toHTML():String.interpret(e)},keys:Object.keys||function(t){if("Object"!==e(t))throw new TypeError;var n,i=[];for(n in t)t.hasOwnProperty(n)&&i.push(n);return i},values:function(e){var t,n=[];for(t in e)n.push(e[t]);return n},clone:function(e){return t({},e)},isElement:function(e){return!(!e||1!=e.nodeType)},isArray:i,isHash:function(e){return e instanceof Hash},isFunction:function(e){return"function"==typeof e},isString:function(e){return"[object String]"===r.call(e)},isNumber:function(e){return"[object Number]"===r.call(e)},isUndefined:o})}(),Object.extend(Function.prototype,function(){function e(e,t){for(var n=e.length,i=t.length;i--;)e[n+i]=t[i];return e}function t(t,i){return e(t=n.call(t,0),i)}var n=Array.prototype.slice;return{argumentNames:function(){var e=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=e.length||e[0]?e:[]},bind:function(e){if(2>arguments.length&&Object.isUndefined(arguments[0]))return this;var i=this,o=n.call(arguments,1);return function(){var n=t(o,arguments);return i.apply(e,n)}},bindAsEventListener:function(t){var i=this,o=n.call(arguments,1);return function(n){return n=e([n||window.event],o),i.apply(t,n)}},curry:function(){if(!arguments.length)return this;var e=this,i=n.call(arguments,0);return function(){var n=t(i,arguments);return e.apply(this,n)}},delay:function(e){var t=this,i=n.call(arguments,1);return window.setTimeout((function(){return t.apply(t,i)}),1e3*e)},defer:function(){var t=e([.01],arguments);return this.delay.apply(this,t)},wrap:function(t){var n=this;return function(){var i=e([n.bind(this)],arguments);return t.apply(this,i)}},methodize:function(){if(this._methodized)return this._methodized;var t=this;return this._methodized=function(){var n=e([this],arguments);return t.apply(null,n)}}}}()),function(e){e.toISOString||(e.toISOString=function(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}),e.toJSON||(e.toJSON=function(){return this.toISOString()})}(Date.prototype),RegExp.prototype.match=RegExp.prototype.test,RegExp.escape=function(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};var PeriodicalExecuter=Class.create({initialize:function(e,t){this.callback=e,this.frequency=t,this.currentlyExecuting=!1,this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),1e3*this.frequency)},execute:function(){this.callback(this)},stop:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=!0,this.execute(),this.currentlyExecuting=!1}catch(e){throw this.currentlyExecuting=!1,e}}});Object.extend(String,{interpret:function(e){return null==e?"":String(e)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}}),Object.extend(String.prototype,function(){function a(e){if(Object.isFunction(e))return e;var t=new Template(e);return function(e){return t.evaluate(e)}}function b(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function c(e){var t=this.strip().match(/([^?#]*)(#.*)?$/);return t?t[1].split(e||"&").inject({},(function(e,t){if((t=t.split("="))[0]){var n=decodeURIComponent(t.shift());null!=(t=1<t.length?t.join("="):t[0])&&(t=decodeURIComponent(t)),n in e?(Object.isArray(e[n])||(e[n]=[e[n]]),e[n].push(t)):e[n]=t}return e})):{}}function d(a){var b=this.unfilterJSON(),c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;c.test(b)&&(b=b.replace(c,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})));try{if(!a||b.isJSON())return eval("("+b+")")}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect())}function e(){var e=this.unfilterJSON();return JSON.parse(e)}var f=window.JSON&&"function"==typeof JSON.parse&&JSON.parse('{"test": true}').test;return{gsub:function(e,t){var n,i="",o=this;if(t=a(t),Object.isString(e)&&(e=RegExp.escape(e)),!e.length&&!e.source)return(t=t(""))+o.split("").join(t)+t;for(;0<o.length;)(n=o.match(e))?(i+=o.slice(0,n.index),i+=String.interpret(t(n)),o=o.slice(n.index+n[0].length)):(i+=o,o="");return i},sub:function(e,t,n){return t=a(t),n=Object.isUndefined(n)?1:n,this.gsub(e,(function(e){return 0>--n?e[0]:t(e)}))},scan:function(e,t){return this.gsub(e,t),String(this)},truncate:function(e,t){return e=e||30,t=Object.isUndefined(t)?"...":t,this.length>e?this.slice(0,e-t.length)+t:String(this)},strip:String.prototype.trim||b,stripTags:function(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")},extractScripts:function(){var e=new RegExp(Prototype.ScriptFragment,"im");return(this.match(new RegExp(Prototype.ScriptFragment,"img"))||[]).map((function(t){return(t.match(e)||["",""])[1]}))},evalScripts:function(){return this.extractScripts().map((function(a){return eval(a)}))},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},toQueryParams:c,parseQuery:c,toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},times:function(e){return 1>e?"":Array(e+1).join(this)},camelize:function(){return this.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()},dasherize:function(){return this.replace(/_/g,"-")},inspect:function(e){var t=this.replace(/[\x00-\x1f\\]/g,(function(e){return e in String.specialChar?String.specialChar[e]:"\\u00"+e.charCodeAt().toPaddedString(2,16)}));return e?'"'+t.replace(/"/g,'\\"')+'"':"'"+t.replace(/'/g,"\\'")+"'"},unfilterJSON:function(e){return this.replace(e||Prototype.JSONFilter,"$1")},isJSON:function(){var e=this;return!e.blank()&&(e=(e=(e=e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@")).replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]")).replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(e))},evalJSON:f?e:d,include:function(e){return-1<this.indexOf(e)},startsWith:function(e){return 0===this.lastIndexOf(e,0)},endsWith:function(e){var t=this.length-e.length;return 0<=t&&this.indexOf(e,t)===t},empty:function(){return""==this},blank:function(){return/^\s*$/.test(this)},interpolate:function(e,t){return new Template(this,t).evaluate(e)}}}());var Template=Class.create({initialize:function(e,t){this.template=e.toString(),this.pattern=t||Template.Pattern},evaluate:function(e){return e&&Object.isFunction(e.toTemplateReplacements)&&(e=e.toTemplateReplacements()),this.template.gsub(this.pattern,(function(t){if(null==e)return t[1]+"";var n=t[1]||"";if("\\"==n)return t[2];var i=e,o=t[3],r=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;if(null==(t=r.exec(o)))return n;for(;null!=t;){if(null==(i=i[t[1].startsWith("[")?t[2].replace(/\\\\]/g,"]"):t[1]])||""==t[3])break;o=o.substring("["==t[3]?t[1].length:t[0].length),t=r.exec(o)}return n+String.interpret(i)}))}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={},Enumerable=function(){function e(e,t){e=e||Prototype.K;var n=!0;return this.each((function(i,o){if(!(n=n&&!!e.call(t,i,o)))throw $break})),n}function t(e,t){e=e||Prototype.K;var n=!1;return this.each((function(i,o){if(n=!!e.call(t,i,o))throw $break})),n}function n(e,t){e=e||Prototype.K;var n=[];return this.each((function(i,o){n.push(e.call(t,i,o,this))}),this),n}function i(e,t){var n;return this.each((function(i,o){if(e.call(t,i,o))throw n=i,$break})),n}function o(e,t){var n=[];return this.each((function(i,o){e.call(t,i,o)&&n.push(i)})),n}function r(e){if(Object.isFunction(this.indexOf)&&-1!=this.indexOf(e))return!0;var t=!1;return this.each((function(n){if(n==e)throw t=!0,$break})),t}function s(){return this.map()}return{each:function(e,t){var n=0;try{this._each((function(i){e.call(t,i,n++)}))}catch(e){if(e!=$break)throw e}return this},eachSlice:function(e,t,n){var i=-e,o=[],r=this.toArray();if(1>e)return r;for(;(i+=e)<r.length;)o.push(r.slice(i,i+e));return o.collect(t,n)},all:e,every:e,any:t,some:t,collect:n,map:n,detect:i,findAll:o,select:o,filter:o,grep:function(e,t,n){t=t||Prototype.K;var i=[];return Object.isString(e)&&(e=new RegExp(RegExp.escape(e))),this.each((function(o,r){e.match(o)&&i.push(t.call(n,o,r))})),i},include:r,member:r,inGroupsOf:function(e,t){return t=Object.isUndefined(t)?null:t,this.eachSlice(e,(function(n){for(;n.length<e;)n.push(t);return n}))},inject:function(e,t,n){return this.each((function(i,o){e=t.call(n,e,i,o)})),e},invoke:function(e){var t=$A(arguments).slice(1);return this.map((function(n){return n[e].apply(n,t)}))},max:function(e,t){var n;return e=e||Prototype.K,this.each((function(i,o){i=e.call(t,i,o),(null==n||i>=n)&&(n=i)})),n},min:function(e,t){var n;return e=e||Prototype.K,this.each((function(i,o){i=e.call(t,i,o),(null==n||i<n)&&(n=i)})),n},partition:function(e,t){e=e||Prototype.K;var n=[],i=[];return this.each((function(o,r){(e.call(t,o,r)?n:i).push(o)})),[n,i]},pluck:function(e){var t=[];return this.each((function(n){t.push(n[e])})),t},reject:function(e,t){var n=[];return this.each((function(i,o){e.call(t,i,o)||n.push(i)})),n},sortBy:function(e,t){return this.map((function(n,i){return{value:n,criteria:e.call(t,n,i)}})).sort((function(e,t){return(e=e.criteria)<(t=t.criteria)?-1:e>t?1:0})).pluck("value")},toArray:s,entries:s,zip:function(){var e=Prototype.K,t=$A(arguments);Object.isFunction(t.last())&&(e=t.pop());var n=[this].concat(t).map($A);return this.map((function(t,i){return e(n.pluck(i))}))},size:function(){return this.toArray().length},inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"},find:i}}();function $A(e){if(!e)return[];if("toArray"in Object(e))return e.toArray();for(var t=e.length||0,n=Array(t);t--;)n[t]=e[t];return n}function $w(e){return Object.isString(e)&&(e=e.strip())?e.split(/\s+/):[]}function $H(e){return new Hash(e)}Array.from=$A,function(){function e(){return n.call(this,0)}var t=Array.prototype,n=t.slice,i=t.forEach;i||(i=function(e){for(var t=0,n=this.length;t<n;t++)e(this[t])}),Object.extend(t,Enumerable),t._reverse||(t._reverse=t.reverse),Object.extend(t,{_each:i,clear:function(){return this.length=0,this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select((function(e){return null!=e}))},flatten:function(){return this.inject([],(function(e,t){return Object.isArray(t)?e.concat(t.flatten()):(e.push(t),e)}))},without:function(){var e=n.call(arguments,0);return this.select((function(t){return!e.include(t)}))},reverse:function(e){return(!1===e?this.toArray():this)._reverse()},uniq:function(e){return this.inject([],(function(t,n,i){return 0!=i&&(e?t.last()==n:t.include(n))||t.push(n),t}))},intersect:function(e){return this.uniq().findAll((function(t){return e.detect((function(e){return t===e}))}))},clone:e,toArray:e,size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"}}),function(){return 1!==[].concat(arguments)[0][0]}(1,2)&&(t.concat=function(){for(var e,t=n.call(this,0),i=0,o=arguments.length;i<o;i++)if(e=arguments[i],!Object.isArray(e)||"callee"in e)t.push(e);else for(var r=0,s=e.length;r<s;r++)t.push(e[r]);return t}),t.indexOf||(t.indexOf=function(e,t){t||(t=0);var n=this.length;for(0>t&&(t=n+t);t<n;t++)if(this[t]===e)return t;return-1}),t.lastIndexOf||(t.lastIndexOf=function(e,t){return t=isNaN(t)?this.length:(0>t?this.length+t:t)+1,0>(e=this.slice(0,t).reverse().indexOf(e))?e:t-e-1})}();var Hash=Class.create(Enumerable,function(){function e(){return Object.clone(this._object)}function t(e,t){return Object.isUndefined(t)?e:e+"="+encodeURIComponent(String.interpret(t))}return{initialize:function(e){this._object=Object.isHash(e)?e.toObject():Object.clone(e)},_each:function(e){for(var t in this._object){var n=this._object[t],i=[t,n];i.key=t,i.value=n,e(i)}},set:function(e,t){return this._object[e]=t},get:function(e){if(this._object[e]!==Object.prototype[e])return this._object[e]},unset:function(e){var t=this._object[e];return delete this._object[e],t},toObject:e,toTemplateReplacements:e,keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},index:function(e){var t=this.detect((function(t){return t.value===e}));return t&&t.key},merge:function(e){return this.clone().update(e)},update:function(e){return new Hash(e).inject(this,(function(e,t){return e.set(t.key,t.value),e}))},toQueryString:function(){return this.inject([],(function(e,n){var i=encodeURIComponent(n.key);if((n=n.value)&&"object"==typeof n){if(Object.isArray(n))return e.concat(n.map(t.curry(i)))}else e.push(t(i,n));return e})).join("&")},inspect:function(){return"#<Hash:{"+this.map((function(e){return e.map(Object.inspect).join(": ")})).join(", ")+"}>"},toJSON:e,clone:function(){return new Hash(this)}}}());function $R(e,t,n){return new ObjectRange(e,t,n)}Hash.from=$H,Object.extend(Number.prototype,{toColorPart:function(){return this.toPaddedString(2,16)},succ:function(){return this+1},times:function(e,t){return $R(0,this,!0).each(e,t),this},toPaddedString:function(e,t){return t=this.toString(t||10),"0".times(e-t.length)+t},abs:function(){return Math.abs(this)},round:function(){return Math.round(this)},ceil:function(){return Math.ceil(this)},floor:function(){return Math.floor(this)}});var ObjectRange=Class.create(Enumerable,{initialize:function(e,t,n){this.start=e,this.end=t,this.exclusive=n},_each:function(e){for(var t=this.start;this.include(t);)e(t),t=t.succ()},include:function(e){return!(e<this.start)&&(this.exclusive?e<this.end:e<=this.end)}}),Ajax={getTransport:function(){return Try.these((function(){return new XMLHttpRequest}),(function(){return new ActiveXObject("Msxml2.XMLHTTP")}),(function(){return new ActiveXObject("Microsoft.XMLHTTP")}))||!1},activeRequestCount:0,Responders:{responders:[],_each:function(e){this.responders._each(e)},register:function(e){this.include(e)||this.responders.push(e)},unregister:function(e){this.responders=this.responders.without(e)},dispatch:function(e,t,n,i){this.each((function(o){if(Object.isFunction(o[e]))try{o[e].apply(o,[t,n,i])}catch(e){}}))}}};function $(e){if(1<arguments.length){for(var t=0,n=[],i=arguments.length;t<i;t++)n.push($(arguments[t]));return n}return Object.isString(e)&&(e=document.getElementById(e)),Element.extend(e)}if(Object.extend(Ajax.Responders,Enumerable),Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}}),Ajax.Base=Class.create({initialize:function(e){this.options={method:"post",asynchronous:!0,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:!0,evalJS:!0},Object.extend(this.options,e||{}),this.options.method=this.options.method.toLowerCase(),Object.isHash(this.options.parameters)&&(this.options.parameters=this.options.parameters.toObject())}}),Ajax.Request=Class.create(Ajax.Base,{_complete:!1,initialize:function(e,t,n){e(n),this.transport=Ajax.getTransport(),this.request(t)},request:function(e){this.url=e,this.method=this.options.method,e=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters),["get","post"].include(this.method)||(e+=(e?"&":"")+"_method="+this.method,this.method="post"),e&&("get"==this.method?this.url+=(this.url.include("?")?"&":"?")+e:/Konqueror|Safari|KHTML/.test(navigator.userAgent)&&(e+="&_=")),this.parameters=e.toQueryParams();try{var t=new Ajax.Response(this);this.options.onCreate&&this.options.onCreate(t),Ajax.Responders.dispatch("onCreate",this,t),this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous),this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1),this.transport.onreadystatechange=this.onStateChange.bind(this),this.setRequestHeaders(),this.body="post"==this.method?this.options.postBody||e:null,this.transport.send(this.body),!this.options.asynchronous&&this.transport.overrideMimeType&&this.onStateChange()}catch(e){this.dispatchException(e)}},onStateChange:function(){var e=this.transport.readyState;1<e&&(4!=e||!this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var e={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if("post"==this.method&&(e["Content-type"]=this.options.contentType+(this.options.encoding?"; charset="+this.options.encoding:""),this.transport.overrideMimeType&&2005>(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]&&(e.Connection="close")),"object"==typeof this.options.requestHeaders){var t=this.options.requestHeaders;if(Object.isFunction(t.push))for(var n=0,i=t.length;n<i;n+=2)e[t[n]]=t[n+1];else $H(t).each((function(t){e[t.key]=t.value}))}for(var o in e)this.transport.setRequestHeader(o,e[o])},success:function(){var e=this.getStatus();return!e||200<=e&&300>e},getStatus:function(){try{return this.transport.status||0}catch(e){return 0}},respondToReadyState:function(e){e=Ajax.Request.Events[e];var t=new Ajax.Response(this);if("Complete"==e){try{this._complete=!0,(this.options["on"+t.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(t,t.headerJSON)}catch(e){this.dispatchException(e)}var n=t.getHeader("Content-type");("force"==this.options.evalJS||this.options.evalJS&&this.isSameOrigin()&&n&&n.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))&&this.evalResponse()}try{(this.options["on"+e]||Prototype.emptyFunction)(t,t.headerJSON),Ajax.Responders.dispatch("on"+e,this,t,t.headerJSON)}catch(e){this.dispatchException(e)}"Complete"==e&&(this.transport.onreadystatechange=Prototype.emptyFunction)},isSameOrigin:function(){var e=this.url.match(/^\s*https?:\/\/[^\/]*/);return!e||e[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(e){try{return this.transport.getResponseHeader(e)||null}catch(e){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(e){this.dispatchException(e)}},dispatchException:function(e){(this.options.onException||Prototype.emptyFunction)(this,e),Ajax.Responders.dispatch("onException",this,e)}}),Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"],Ajax.Response=Class.create({initialize:function(e){this.request=e,e=this.transport=e.transport;var t=this.readyState=e.readyState;(2<t&&!Prototype.Browser.IE||4==t)&&(this.status=this.getStatus(),this.statusText=this.getStatusText(),this.responseText=String.interpret(e.responseText),this.headerJSON=this._getHeaderJSON()),4==t&&(e=e.responseXML,this.responseXML=Object.isUndefined(e)?null:e,this.responseJSON=this._getResponseJSON())},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(e){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(e){return null}},getResponseHeader:function(e){return this.transport.getResponseHeader(e)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var e=this.getHeader("X-JSON");if(!e)return null;e=decodeURIComponent(escape(e));try{return e.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(e){this.request.dispatchException(e)}},_getResponseJSON:function(){var e=this.request.options;if(!e.evalJSON||"force"!=e.evalJSON&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(e.sanitizeJSON||!this.request.isSameOrigin())}catch(e){this.request.dispatchException(e)}}}),Ajax.Updater=Class.create(Ajax.Request,{initialize:function(e,t,n,i){this.container={success:t.success||t,failure:t.failure||(t.success?null:t)};var o=(i=Object.clone(i)).onComplete;i.onComplete=function(e,t){this.updateContent(e.responseText),Object.isFunction(o)&&o(e,t)}.bind(this),e(n,i)},updateContent:function(e){var t=this.container[this.success()?"success":"failure"],n=this.options;if(n.evalScripts||(e=e.stripScripts()),t=$(t))if(n.insertion)if(Object.isString(n.insertion)){var i={};i[n.insertion]=e,t.insert(i)}else n.insertion(t,e);else t.update(e)}}),Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function(e,t,n,i){e(i),this.onComplete=this.options.onComplete,this.frequency=this.options.frequency||2,this.decay=this.options.decay||1,this.updater={},this.container=t,this.url=n,this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this),this.onTimerEvent()},stop:function(){this.updater.options.onComplete=void 0,clearTimeout(this.timer),(this.onComplete||Prototype.emptyFunction).apply(this,arguments)},updateComplete:function(e){this.options.decay&&(this.decay=e.responseText==this.lastText?this.decay*this.options.decay:1,this.lastText=e.responseText),this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}}),Prototype.BrowserFeatures.XPath&&(document._getElementsByXPath=function(e,t){var n=[];e=document.evaluate(e,$(t)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),t=0;for(var i=e.snapshotLength;t<i;t++)n.push(Element.extend(e.snapshotItem(t)));return n}),!Node)var Node={};Node.ELEMENT_NODE||Object.extend(Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}),function(e){var t=function(){try{var e=document.createElement('<input name="x">');return"input"===e.tagName.toLowerCase()&&"x"===e.name}catch(e){return!1}}(),n=e.Element;e.Element=function(e,n){n=n||{},e=e.toLowerCase();var i=Element.cache;return t&&n.name?(e="<"+e+' name="'+n.name+'">',delete n.name,Element.writeAttribute(document.createElement(e),n)):(i[e]||(i[e]=Element.extend(document.createElement(e))),e="type"in n?document.createElement(e):i[e].cloneNode(!1),Element.writeAttribute(e,n))},Object.extend(e.Element,n||{}),n&&(e.Element.prototype=n.prototype)}(this),Element.idCounter=1,Element.cache={},Element._purgeElement=function(e){var t=e._prototypeUID;t&&(Element.stopObserving(e),e._prototypeUID=void 0,delete Element.Storage[t])},Element.Methods={visible:function(e){return"none"!=$(e).style.display},toggle:function(e){return e=$(e),Element[Element.visible(e)?"hide":"show"](e),e},hide:function(e){return(e=$(e)).style.display="none",e},show:function(e){return(e=$(e)).style.display="",e},remove:function(e){return(e=$(e)).parentNode.removeChild(e),e},update:function(){var e=function(){var e=document.createElement("select"),t=!0;return e.innerHTML='<option value="test">test</option>',e.options&&e.options[0]&&(t="OPTION"!==e.options[0].nodeName.toUpperCase()),t}(),t=function(){try{var e=document.createElement("table");if(e&&e.tBodies)return e.innerHTML="<tbody><tr><td>test</td></tr></tbody>",void 0===e.tBodies[0]}catch(e){return!0}}(),n=function(){var e=document.createElement("script"),t=!1;try{e.appendChild(document.createTextNode("")),t=!e.firstChild||e.firstChild&&3!==e.firstChild.nodeType}catch(e){t=!0}return t}();return function(i,o){i=$(i);for(var r=Element._purgeElement,s=i.getElementsByTagName("*"),a=s.length;a--;)r(s[a]);if(o&&o.toElement&&(o=o.toElement()),Object.isElement(o))return i.update().insert(o);if(o=Object.toHTML(o),"SCRIPT"===(r=i.tagName.toUpperCase())&&n)return i.text=o,i;if(e||t)if(r in Element._insertionTranslations.tags){for(;i.firstChild;)i.removeChild(i.firstChild);Element._getContentFromAnonymousElement(r,o.stripScripts()).each((function(e){i.appendChild(e)}))}else i.innerHTML=o.stripScripts();else i.innerHTML=o.stripScripts();return o.evalScripts.bind(o).defer(),i}}(),replace:function(e,t){if(e=$(e),t&&t.toElement)t=t.toElement();else if(!Object.isElement(t)){t=Object.toHTML(t);var n=e.ownerDocument.createRange();n.selectNode(e),t.evalScripts.bind(t).defer(),t=n.createContextualFragment(t.stripScripts())}return e.parentNode.replaceChild(t,e),e},insert:function(e,t){for(i in e=$(e),(Object.isString(t)||Object.isNumber(t)||Object.isElement(t)||t&&(t.toElement||t.toHTML))&&(t={bottom:t}),t){var n=t[i],i=i.toLowerCase(),o=Element._insertionTranslations[i];if(n&&n.toElement&&(n=n.toElement()),Object.isElement(n))o(e,n);else{n=Object.toHTML(n);var r=("before"==i||"after"==i?e.parentNode:e).tagName.toUpperCase();r=Element._getContentFromAnonymousElement(r,n.stripScripts()),"top"!=i&&"after"!=i||r.reverse(),r.each(o.curry(e)),n.evalScripts.bind(n).defer()}}return e},wrap:function(e,t,n){return e=$(e),Object.isElement(t)?$(t).writeAttribute(n||{}):t=Object.isString(t)?new Element(t,n):new Element("div",t),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t},inspect:function(e){var t="<"+(e=$(e)).tagName.toLowerCase();return $H({id:"id",className:"class"}).each((function(n){var i=n.first();n=n.last(),(i=(e[i]||"").toString())&&(t+=" "+n+"="+i.inspect(!0))})),t+">"},recursivelyCollect:function(e,t,n){e=$(e),n=n||-1;for(var i=[];(e=e[t])&&(1==e.nodeType&&i.push(Element.extend(e)),i.length!=n););return i},ancestors:function(e){return Element.recursivelyCollect(e,"parentNode")},descendants:function(e){return Element.select(e,"*")},firstDescendant:function(e){for(e=$(e).firstChild;e&&1!=e.nodeType;)e=e.nextSibling;return $(e)},immediateDescendants:function(e){var t=[];for(e=$(e).firstChild;e;)1===e.nodeType&&t.push(Element.extend(e)),e=e.nextSibling;return t},previousSiblings:function(e,t){return Element.recursivelyCollect(e,"previousSibling")},nextSiblings:function(e){return Element.recursivelyCollect(e,"nextSibling")},siblings:function(e){return e=$(e),Element.previousSiblings(e).reverse().concat(Element.nextSiblings(e))},match:function(e,t){return e=$(e),Object.isString(t)?Prototype.Selector.match(e,t):t.match(e)},up:function(e,t,n){if(e=$(e),1==arguments.length)return $(e.parentNode);var i=Element.ancestors(e);return Object.isNumber(t)?i[t]:Prototype.Selector.find(i,t,n)},down:function(e,t,n){return e=$(e),1==arguments.length?Element.firstDescendant(e):Object.isNumber(t)?Element.descendants(e)[t]:Element.select(e,t)[n||0]},previous:function(e,t,n){return e=$(e),Object.isNumber(t)&&(n=t,t=!1),Object.isNumber(n)||(n=0),t?Prototype.Selector.find(e.previousSiblings(),t,n):e.recursivelyCollect("previousSibling",n+1)[n]},next:function(e,t,n){return e=$(e),Object.isNumber(t)&&(n=t,t=!1),Object.isNumber(n)||(n=0),t?Prototype.Selector.find(e.nextSiblings(),t,n):(Object.isNumber(n),e.recursivelyCollect("nextSibling",n+1)[n])},select:function(e){e=$(e);var t=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(t,e)},adjacent:function(e){e=$(e);var t=Array.prototype.slice.call(arguments,1).join(", ");return Prototype.Selector.select(t,e.parentNode).without(e)},identify:function(e){e=$(e);var t=Element.readAttribute(e,"id");if(t)return t;do{t="anonymous_element_"+Element.idCounter++}while($(t));return Element.writeAttribute(e,"id",t),t},readAttribute:function(e,t){if(e=$(e),Prototype.Browser.IE){var n=Element._attributeTranslations.read;if(n.values[t])return n.values[t](e,t);if(n.names[t]&&(t=n.names[t]),t.include(":"))return e.attributes&&e.attributes[t]?e.attributes[t].value:null}return e.getAttribute(t)},writeAttribute:function(e,t,n){e=$(e);var i={},o=Element._attributeTranslations.write;for(var r in"object"==typeof t?i=t:i[t]=!!Object.isUndefined(n)||n,i)t=o.names[r]||r,n=i[r],o.values[r]&&(t=o.values[r](e,n)),!1===n||null===n?e.removeAttribute(t):!0===n?e.setAttribute(t,t):e.setAttribute(t,n);return e},getHeight:function(e){return Element.getDimensions(e).height},getWidth:function(e){return Element.getDimensions(e).width},classNames:function(e){return new Element.ClassNames(e)},hasClassName:function(e,t){if(e=$(e))return 0<(e=e.className).length&&(e==t||new RegExp("(^|\\s)"+t+"(\\s|$)").test(e))},addClassName:function(e,t){if(e=$(e))return Element.hasClassName(e,t)||(e.className+=(e.className?" ":"")+t),e},removeClassName:function(e,t){if(e=$(e))return e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").strip(),e},toggleClassName:function(e,t){if(e=$(e))return Element[Element.hasClassName(e,t)?"removeClassName":"addClassName"](e,t)},cleanWhitespace:function(e){for(var t=(e=$(e)).firstChild;t;){var n=t.nextSibling;3!=t.nodeType||/\S/.test(t.nodeValue)||e.removeChild(t),t=n}return e},empty:function(e){return $(e).innerHTML.blank()},descendantOf:function(e,t){if(e=$(e),t=$(t),e.compareDocumentPosition)return 8==(8&e.compareDocumentPosition(t));if(t.contains)return t.contains(e)&&t!==e;for(;e=e.parentNode;)if(e==t)return!0;return!1},scrollTo:function(e){e=$(e);var t=Element.cumulativeOffset(e);return window.scrollTo(t[0],t[1]),e},getStyle:function(e,t){e=$(e),t="float"==t?"cssFloat":t.camelize();var n=e.style[t];return n&&"auto"!=n||(n=(e=document.defaultView.getComputedStyle(e,null))?e[t]:null),"opacity"==t?n?parseFloat(n):1:"auto"==n?null:n},getOpacity:function(e){return $(e).getStyle("opacity")},setStyle:function(e,t){var n=(e=$(e)).style;if(Object.isString(t))return e.style.cssText+=";"+t,t.include("opacity")?e.setOpacity(t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var i in t)"opacity"==i?e.setOpacity(t[i]):n["float"==i||"cssFloat"==i?Object.isUndefined(n.styleFloat)?"cssFloat":"styleFloat":i]=t[i];return e},setOpacity:function(e,t){return(e=$(e)).style.opacity=1==t||""===t?"":1e-5>t?0:t,e},makePositioned:function(e){e=$(e);var t=Element.getStyle(e,"position");return"static"!=t&&t||(e._madePositioned=!0,e.style.position="relative",Prototype.Browser.Opera&&(e.style.top=0,e.style.left=0)),e},undoPositioned:function(e){return(e=$(e))._madePositioned&&(e._madePositioned=void 0,e.style.position=e.style.top=e.style.left=e.style.bottom=e.style.right=""),e},makeClipping:function(e){return(e=$(e))._overflow||(e._overflow=Element.getStyle(e,"overflow")||"auto","hidden"!==e._overflow&&(e.style.overflow="hidden")),e},undoClipping:function(e){return(e=$(e))._overflow?(e.style.overflow="auto"==e._overflow?"":e._overflow,e._overflow=null,e):e},clonePosition:function(e,t,n){n=Object.extend({setLeft:!0,setTop:!0,setWidth:!0,setHeight:!0,offsetTop:0,offsetLeft:0},n||{}),t=$(t);var i=Element.viewportOffset(t),o=[0,0],r=null;return e=$(e),"absolute"==Element.getStyle(e,"position")&&(r=Element.getOffsetParent(e),o=Element.viewportOffset(r)),r==document.body&&(o[0]-=document.body.offsetLeft,o[1]-=document.body.offsetTop),n.setLeft&&(e.style.left=i[0]-o[0]+n.offsetLeft+"px"),n.setTop&&(e.style.top=i[1]-o[1]+n.offsetTop+"px"),n.setWidth&&(e.style.width=t.offsetWidth+"px"),n.setHeight&&(e.style.height=t.offsetHeight+"px"),e}},Object.extend(Element.Methods,{getElementsBySelector:Element.Methods.select,childElements:Element.Methods.immediateDescendants}),Element._attributeTranslations={write:{names:{className:"class",htmlFor:"for"},values:{}}},Prototype.Browser.Opera?(Element.Methods.getStyle=Element.Methods.getStyle.wrap((function(e,t,n){switch(n){case"left":case"top":case"right":case"bottom":if("static"===e(t,"position"))return null;case"height":case"width":if(!Element.visible(t))return null;var i=parseInt(e(t,n),10);return i!==t["offset"+n.capitalize()]?i+"px":("height"===n?["border-top-width","padding-top","padding-bottom","border-bottom-width"]:["border-left-width","padding-left","padding-right","border-right-width"]).inject(i,(function(n,i){return null===(i=e(t,i))?n:n-parseInt(i,10)}))+"px";default:return e(t,n)}})),Element.Methods.readAttribute=Element.Methods.readAttribute.wrap((function(e,t,n){return"title"===n?t.title:e(t,n)}))):Prototype.Browser.IE?(Element.Methods.getStyle=function(e,t){e=$(e),t="float"==t||"cssFloat"==t?"styleFloat":t.camelize();var n=e.style[t];return!n&&e.currentStyle&&(n=e.currentStyle[t]),"opacity"==t?(n=(e.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/))&&n[1]?parseFloat(n[1])/100:1:"auto"==n?"width"!=t&&"height"!=t||"none"==e.getStyle("display")?null:e["offset"+t.capitalize()]+"px":n},Element.Methods.setOpacity=function(e,t){var n=(e=$(e)).currentStyle;(n&&!n.hasLayout||!n&&"normal"==e.style.zoom)&&(e.style.zoom=1),n=e.getStyle("filter");var i=e.style;return 1==t||""===t?((n=n.replace(/alpha\([^\)]*\)/gi,""))?i.filter=n:i.removeAttribute("filter"),e):(1e-5>t&&(t=0),i.filter=n.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+100*t+")",e)},Element._attributeTranslations=function(){var e="className",t="for",n=document.createElement("div");return n.setAttribute(e,"x"),"x"!==n.className&&(n.setAttribute("class","x"),"x"===n.className&&(e="class")),n=null,(n=document.createElement("label")).setAttribute(t,"x"),"x"!==n.htmlFor&&(n.setAttribute("htmlFor","x"),"x"===n.htmlFor&&(t="htmlFor")),n=null,{read:{names:{class:e,className:e,for:t,htmlFor:t},values:{_getAttr:function(e,t){return e.getAttribute(t)},_getAttr2:function(e,t){return e.getAttribute(t,2)},_getAttrNode:function(e,t){return(e=e.getAttributeNode(t))?e.value:""},_getEv:function(){var e,t=document.createElement("div");return t.onclick=Prototype.emptyFunction,t=t.getAttribute("onclick"),-1<String(t).indexOf("{")?e=function(e,t){return(t=e.getAttribute(t))?(t=(t=(t=t.toString()).split("{")[1]).split("}")[0]).strip():null}:""===t&&(e=function(e,t){return(t=e.getAttribute(t))?t.strip():null}),t=null,e}(),_flag:function(e,t){return $(e).hasAttribute(t)?t:null},style:function(e){return e.style.cssText.toLowerCase()},title:function(e){return e.title}}}}}(),Element._attributeTranslations.write={names:Object.extend({cellpadding:"cellPadding",cellspacing:"cellSpacing"},Element._attributeTranslations.read.names),values:{checked:function(e,t){e.checked=!!t},style:function(e,t){e.style.cssText=t||""}}},Element._attributeTranslations.has={},$w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder").each((function(e){Element._attributeTranslations.write.names[e.toLowerCase()]=e,Element._attributeTranslations.has[e.toLowerCase()]=e})),function(e){Object.extend(e,{href:e._getAttr2,src:e._getAttr2,type:e._getAttr,action:e._getAttrNode,disabled:e._flag,checked:e._flag,readonly:e._flag,multiple:e._flag,onload:e._getEv,onunload:e._getEv,onclick:e._getEv,ondblclick:e._getEv,onmousedown:e._getEv,onmouseup:e._getEv,onmouseover:e._getEv,onmousemove:e._getEv,onmouseout:e._getEv,onfocus:e._getEv,onblur:e._getEv,onkeypress:e._getEv,onkeydown:e._getEv,onkeyup:e._getEv,onsubmit:e._getEv,onreset:e._getEv,onselect:e._getEv,onchange:e._getEv})}(Element._attributeTranslations.read.values),Prototype.BrowserFeatures.ElementExtensions&&(Element.Methods.down=function(e,t,n){if(e=$(e),1==arguments.length)return e.firstDescendant();if(Object.isNumber(t)){for(var i,o=e.getElementsByTagName("*"),r=[],s=0;i=o[s];s++)"!"!==i.tagName&&r.push(i);o=r[t]}else o=Element.select(e,t)[n||0];return o})):Prototype.Browser.Gecko&&/rv:1\.8\.0/.test(navigator.userAgent)?Element.Methods.setOpacity=function(e,t){return(e=$(e)).style.opacity=1==t?.999999:""===t?"":1e-5>t?0:t,e}:Prototype.Browser.WebKit&&(Element.Methods.setOpacity=function(e,t){if((e=$(e)).style.opacity=1==t||""===t?"":1e-5>t?0:t,1==t)if("IMG"==e.tagName.toUpperCase()&&e.width)e.width++,e.width--;else try{var n=document.createTextNode(" ");e.appendChild(n),e.removeChild(n)}catch(e){}return e}),"outerHTML"in document.documentElement&&(Element.Methods.replace=function(e,t){if(e=$(e),t&&t.toElement&&(t=t.toElement()),Object.isElement(t))return e.parentNode.replaceChild(t,e),e;t=Object.toHTML(t);var n=e.parentNode,i=n.tagName.toUpperCase();if(Element._insertionTranslations.tags[i]){var o=e.next();i=Element._getContentFromAnonymousElement(i,t.stripScripts()),n.removeChild(e),o?i.each((function(e){n.insertBefore(e,o)})):i.each((function(e){n.appendChild(e)}))}else e.outerHTML=t.stripScripts();return t.evalScripts.bind(t).defer(),e}),Element._returnOffset=function(e,t){var n=[e,t];return n.left=e,n.top=t,n},Element._getContentFromAnonymousElement=function(e,t){var n=new Element("div");if(e=Element._insertionTranslations.tags[e])for(n.innerHTML=e[0]+t+e[1],t=e[2];t--;)n=n.firstChild;else n.innerHTML=t;return $A(n.childNodes)},Element._insertionTranslations={before:function(e,t){e.parentNode.insertBefore(t,e)},top:function(e,t){e.insertBefore(t,e.firstChild)},bottom:function(e,t){e.appendChild(t)},after:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},tags:{TABLE:["<table>","</table>",1],TBODY:["<table><tbody>","</tbody></table>",2],TR:["<table><tbody><tr>","</tr></tbody></table>",3],TD:["<table><tbody><tr><td>","</td></tr></tbody></table>",4],SELECT:["<select>","</select>",1]}},function(){var e=Element._insertionTranslations.tags;Object.extend(e,{THEAD:e.TBODY,TFOOT:e.TBODY,TH:e.TD})}(),Element.Methods.Simulated={hasAttribute:function(e,t){return t=Element._attributeTranslations.has[t]||t,!(!(e=$(e).getAttributeNode(t))||!e.specified)}},Element.Methods.ByTag={},Object.extend(Element,Element.Methods),function(e){!Prototype.BrowserFeatures.ElementExtensions&&e.__proto__&&(window.HTMLElement={},window.HTMLElement.prototype=e.__proto__,Prototype.BrowserFeatures.ElementExtensions=!0)}(document.createElement("div")),Element.extend=function(){function e(e,t){for(var n in t){var i=t[n];!Object.isFunction(i)||n in e||(e[n]=i.methodize())}}var t=function(e){if(void 0!==window.Element){var t=window.Element.prototype;if(t){var n="_"+(Math.random()+"").slice(2);return e=document.createElement(e),t[n]="x",e="x"!==e[n],delete t[n],e}}return!1}("object");if(Prototype.BrowserFeatures.SpecificElementExtensions)return t?function(t){if(t&&void 0===t._extendedByPrototype){var n=t.tagName;n&&/^(?:object|applet|embed)$/i.test(n)&&(e(t,Element.Methods),e(t,Element.Methods.Simulated),e(t,Element.Methods.ByTag[n.toUpperCase()]))}return t}:Prototype.K;var n={},i=Element.Methods.ByTag;return(t=Object.extend((function(t){if(!t||void 0!==t._extendedByPrototype||1!=t.nodeType||t==window)return t;var o=Object.clone(n),r=t.tagName.toUpperCase();return i[r]&&Object.extend(o,i[r]),e(t,o),t._extendedByPrototype=Prototype.emptyFunction,t}),{refresh:function(){Prototype.BrowserFeatures.ElementExtensions||(Object.extend(n,Element.Methods),Object.extend(n,Element.Methods.Simulated))}})).refresh(),t}(),Element.hasAttribute=document.documentElement.hasAttribute?function(e,t){return e.hasAttribute(t)}:Element.Methods.Simulated.hasAttribute,Element.addMethods=function(e){function t(t){t=t.toUpperCase(),Element.Methods.ByTag[t]||(Element.Methods.ByTag[t]={}),Object.extend(Element.Methods.ByTag[t],e)}function n(e,t,n){for(var i in n=n||!1,e){var o=e[i];Object.isFunction(o)&&(n&&i in t||(t[i]=o.methodize()))}}function i(e){var t,n={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};return n[e]&&(t="HTML"+n[e]+"Element"),window[t]?window[t]:(t="HTML"+e+"Element",window[t]?window[t]:(t="HTML"+e.capitalize()+"Element",window[t]?window[t]:(e=document.createElement(e)).__proto__||e.constructor.prototype))}var o=Prototype.BrowserFeatures,r=Element.Methods.ByTag;if(e||(Object.extend(Form,Form.Methods),Object.extend(Form.Element,Form.Element.Methods),Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods)})),2==arguments.length){var s=e;e=arguments[1]}if(s?Object.isArray(s)?s.each(t):t(s):Object.extend(Element.Methods,e||{}),s=window.HTMLElement?HTMLElement.prototype:Element.prototype,o.ElementExtensions&&(n(Element.Methods,s),n(Element.Methods.Simulated,s,!0)),o.SpecificElementExtensions)for(var a in Element.Methods.ByTag)o=i(a),Object.isUndefined(o)||n(r[a],o.prototype);Object.extend(Element,Element.Methods),delete Element.ByTag,Element.extend.refresh&&Element.extend.refresh(),Element.cache={}},document.viewport={getDimensions:function(){return{width:this.getWidth(),height:this.getHeight()}},getScrollOffsets:function(){return Element._returnOffset(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)}},function(e){function t(t){return n||(n=i.WebKit&&!o.evaluate?document:i.Opera&&9.5>window.parseFloat(window.opera.version())?document.body:document.documentElement),r[t]="client"+t,e["get"+t]=function(){return n[r[t]]},e["get"+t]()}var n,i=Prototype.Browser,o=document,r={};e.getWidth=t.curry("Width"),e.getHeight=t.curry("Height")}(document.viewport),Element.Storage={UID:1},Element.addMethods({getStorage:function(e){if(e=$(e))return e===window?e=0:(void 0===e._prototypeUID&&(e._prototypeUID=Element.Storage.UID++),e=e._prototypeUID),Element.Storage[e]||(Element.Storage[e]=$H()),Element.Storage[e]},store:function(e,t,n){if(e=$(e))return 2===arguments.length?Element.getStorage(e).update(t):Element.getStorage(e).set(t,n),e},retrieve:function(e,t,n){if(e=$(e)){var i=(e=Element.getStorage(e)).get(t);return Object.isUndefined(i)&&(e.set(t,n),i=n),i}},clone:function(e,t){if(e=$(e)){if((e=e.cloneNode(t))._prototypeUID=void 0,t)for(var n=(t=Element.select(e,"*")).length;n--;)t[n]._prototypeUID=void 0;return Element.extend(e)}},purge:function(e){if(e=$(e)){var t=Element._purgeElement;t(e);for(var n=(e=e.getElementsByTagName("*")).length;n--;)t(e[n]);return null}}}),function(){function e(e,t,n){var i=null;if(Object.isElement(e)&&(e=(i=e).getStyle(t)),null===e)return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(e))return window.parseFloat(e);var o=e.include("%"),r=n===document.viewport;return!(/\d/.test(e)&&i&&i.runtimeStyle)||o&&r?i&&o?(n=n||i.parentNode,e=(e=e.match(/^(\d+)%?$/i))?Number(e[1])/100:null,o=null,i.getStyle("position"),i=t.include("left")||t.include("right")||t.include("width"),t=t.include("top")||t.include("bottom")||t.include("height"),n===document.viewport?i?o=document.viewport.getWidth():t&&(o=document.viewport.getHeight()):i?o=$(n).measure("width"):t&&(o=$(n).measure("height")),null===o?0:o*e):0:(n=i.style.left,t=i.runtimeStyle.left,i.runtimeStyle.left=i.currentStyle.left,i.style.left=e||0,e=i.style.pixelLeft,i.style.left=n,i.runtimeStyle.left=t,e)}function t(e){if(o(e))return $(document.body);if("inline"!==Element.getStyle(e,"display")&&e.offsetParent)return $(e.offsetParent);if(e===document.body)return $(e);for(;(e=e.parentNode)&&e!==document.body;)if("static"!==Element.getStyle(e,"position"))return"HTML"===e.nodeName?$(document.body):$(e);return $(document.body)}function n(e){var t=0,n=0;if(e.parentNode)do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return new Element.Offset(n,t)}function i(e){var t=e.getLayout(),n=0,i=0;do{if(n+=e.offsetTop||0,i+=e.offsetLeft||0,e=e.offsetParent){if("BODY"===e.nodeName.toUpperCase())break;if("static"!==Element.getStyle(e,"position"))break}}while(e);return i-=t.get("margin-top"),n-=t.get("margin-left"),new Element.Offset(i,n)}function o(e){return e!==document.body&&!Element.descendantOf(e,document.body)}var r=Prototype.K;"currentStyle"in document.documentElement&&(r=function(e){return e.currentStyle.hasLayout||(e.style.zoom=1),e}),Element.Layout=Class.create(Hash,{initialize:function(e,t,n){e(),this.element=$(t),Element.Layout.PROPERTIES.each((function(e){this._set(e,null)}),this),n&&(this._preComputing=!0,this._begin(),Element.Layout.PROPERTIES.each(this._compute,this),this._end(),this._preComputing=!1)},_set:function(e,t){return Hash.prototype.set.call(this,e,t)},set:function(e,t){throw"Properties of Element.Layout are read-only."},get:function(e,t){var n=e(t);return null===n?this._compute(t):n},_begin:function(){if(!this._prepared){var t,n=this.element;e:{for(t=n;t&&t.parentNode;){if("none"===t.getStyle("display")){t=!1;break e}t=$(t.parentNode)}t=!0}if(!t){n.store("prototype_original_styles",{position:n.style.position||"",width:n.style.width||"",visibility:n.style.visibility||"",display:n.style.display||""}),t=n.getStyle("position");var i=n.getStyle("width"),o="fixed"===t?document.viewport:n.parentNode;n.setStyle({position:"absolute",visibility:"hidden",display:"block"});var r=n.getStyle("width");t=i&&r===i||"absolute"===t||"fixed"===t?e(n,"width",o):$(n.parentNode).getLayout().get("width")-this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right"),n.setStyle({width:t+"px"})}this._prepared=!0}},_end:function(){var e=this.element,t=e.retrieve("prototype_original_styles");e.store("prototype_original_styles",null),e.setStyle(t),this._prepared=!1},_compute:function(e){var t=Element.Layout.COMPUTATIONS;if(!(e in t))throw"Property not found.";return this._set(e,t[e].call(this,this.element))},toObject:function(){var e=$A(arguments),t={};return(0===e.length?Element.Layout.PROPERTIES:e.join(" ").split(" ")).each((function(e){if(Element.Layout.PROPERTIES.include(e)){var n=this.get(e);null!=n&&(t[e]=n)}}),this),t},toHash:function(){var e=this.toObject.apply(this,arguments);return new Hash(e)},toCSS:function(){var e=$A(arguments),t={};return(0===e.length?Element.Layout.PROPERTIES:e.join(" ").split(" ")).each((function(e){if(Element.Layout.PROPERTIES.include(e)&&!Element.Layout.COMPOSITE_PROPERTIES.include(e)){var n=this.get(e);null!=n&&(e.include("border")&&(e+="-width"),e=e.camelize(),t[e]=n+"px")}}),this),t},inspect:function(){return"#<Element.Layout>"}}),Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{height:function(e){if(this._preComputing||this._begin(),0>=(e=this.get("border-box-height")))return this._preComputing||this._end(),0;var t=this.get("border-top"),n=this.get("border-bottom"),i=this.get("padding-top"),o=this.get("padding-bottom");return this._preComputing||this._end(),e-t-n-i-o},width:function(e){if(this._preComputing||this._begin(),0>=(e=this.get("border-box-width")))return this._preComputing||this._end(),0;var t=this.get("border-left"),n=this.get("border-right"),i=this.get("padding-left"),o=this.get("padding-right");return this._preComputing||this._end(),e-t-n-i-o},"padding-box-height":function(e){return this.get("height")+this.get("padding-top")+this.get("padding-bottom")},"padding-box-width":function(e){return this.get("width")+this.get("padding-left")+this.get("padding-right")},"border-box-height":function(e){return this._preComputing||this._begin(),e=e.offsetHeight,this._preComputing||this._end(),e},"border-box-width":function(e){return this._preComputing||this._begin(),e=e.offsetWidth,this._preComputing||this._end(),e},"margin-box-height":function(e){e=this.get("border-box-height");var t=this.get("margin-top"),n=this.get("margin-bottom");return 0>=e?0:e+t+n},"margin-box-width":function(e){e=this.get("border-box-width");var t=this.get("margin-left"),n=this.get("margin-right");return 0>=e?0:e+t+n},top:function(e){return e.positionedOffset().top},bottom:function(e){var t=e.positionedOffset();return(e=e.getOffsetParent().measure("height"))-this.get("border-box-height")-t.top},left:function(e){return e.positionedOffset().left},right:function(e){var t=e.positionedOffset();return(e=e.getOffsetParent().measure("width"))-this.get("border-box-width")-t.left},"padding-top":function(t){return e(t,"paddingTop")},"padding-bottom":function(t){return e(t,"paddingBottom")},"padding-left":function(t){return e(t,"paddingLeft")},"padding-right":function(t){return e(t,"paddingRight")},"border-top":function(t){return e(t,"borderTopWidth")},"border-bottom":function(t){return e(t,"borderBottomWidth")},"border-left":function(t){return e(t,"borderLeftWidth")},"border-right":function(t){return e(t,"borderRightWidth")},"margin-top":function(t){return e(t,"marginTop")},"margin-bottom":function(t){return e(t,"marginBottom")},"margin-left":function(t){return e(t,"marginLeft")},"margin-right":function(t){return e(t,"marginRight")}}}),"getBoundingClientRect"in document.documentElement&&Object.extend(Element.Layout.COMPUTATIONS,{right:function(e){var t=r(e.getOffsetParent());return e=e.getBoundingClientRect(),(t.getBoundingClientRect().right-e.right).round()},bottom:function(e){var t=r(e.getOffsetParent());return e=e.getBoundingClientRect(),(t.getBoundingClientRect().bottom-e.bottom).round()}}),Element.Offset=Class.create({initialize:function(e,t){this.left=e.round(),this.top=t.round(),this[0]=this.left,this[1]=this.top},relativeTo:function(e){return new Element.Offset(this.left-e.left,this.top-e.top)},inspect:function(){return"#<Element.Offset left: #{left} top: #{top}>".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}}),Prototype.Browser.IE?(t=t.wrap((function(e,t){if(o(t=$(t)))return $(document.body);var n=t.getStyle("position");return"static"!==n?e(t):(t.setStyle({position:"relative"}),e=e(t),t.setStyle({position:n}),e)})),i=i.wrap((function(e,t){if(!(t=$(t)).parentNode)return new Element.Offset(0,0);var n=t.getStyle("position");if("static"!==n)return e(t);var i=t.getOffsetParent();return i&&"fixed"===i.getStyle("position")&&r(i),t.setStyle({position:"relative"}),e=e(t),t.setStyle({position:n}),e}))):Prototype.Browser.Webkit&&(n=function(e){var t=0,n=0;do{if(t+=e.offsetTop||0,n+=e.offsetLeft||0,e.offsetParent==document.body&&"absolute"==Element.getStyle(e,"position"))break;e=e.offsetParent}while(e);return new Element.Offset(n,t)}),Element.addMethods({getLayout:function(e,t){return new Element.Layout(e,t)},measure:function(e,t){return $(e).getLayout().get(t)},getDimensions:function(e){e=$(e);var t=Element.getStyle(e,"display");if(t&&"none"!==t)return{width:e.offsetWidth,height:e.offsetHeight};var n={visibility:"hidden",display:"block"};return"fixed"!==(t={visibility:(t=e.style).visibility,position:t.position,display:t.display}).position&&(n.position="absolute"),Element.setStyle(e,n),n={width:e.offsetWidth,height:e.offsetHeight},Element.setStyle(e,t),n},getOffsetParent:t,cumulativeOffset:n,positionedOffset:i,cumulativeScrollOffset:function(e){var t=0,n=0;do{t+=e.scrollTop||0,n+=e.scrollLeft||0,e=e.parentNode}while(e);return new Element.Offset(n,t)},viewportOffset:function(e){var t=0,n=0,i=document.body,o=e;do{if(t+=o.offsetTop||0,n+=o.offsetLeft||0,o.offsetParent==i&&"absolute"==Element.getStyle(o,"position"))break}while(o=o.offsetParent);o=e;do{o!=i&&(t-=o.scrollTop||0,n-=o.scrollLeft||0)}while(o=o.parentNode);return new Element.Offset(n,t)},absolutize:function(e){if(e=$(e),"absolute"===Element.getStyle(e,"position"))return e;var n=t(e),i=e.viewportOffset();return n=n.viewportOffset(),i=i.relativeTo(n),n=e.getLayout(),e.store("prototype_absolutize_original_styles",{left:e.getStyle("left"),top:e.getStyle("top"),width:e.getStyle("width"),height:e.getStyle("height")}),e.setStyle({position:"absolute",top:i.top+"px",left:i.left+"px",width:n.get("width")+"px",height:n.get("height")+"px"}),e},relativize:function(e){if(e=$(e),"relative"===Element.getStyle(e,"position"))return e;var t=e.retrieve("prototype_absolutize_original_styles");return t&&e.setStyle(t),e}}),"getBoundingClientRect"in document.documentElement&&Element.addMethods({viewportOffset:function(e){if(o(e=$(e)))return new Element.Offset(0,0);e=e.getBoundingClientRect();var t=document.documentElement;return new Element.Offset(e.left-t.clientLeft,e.top-t.clientTop)}})}(),window.$$=function(){var e=$A(arguments).join(", ");return Prototype.Selector.select(e,document)},Prototype.Selector=function(){var e=Prototype.K;return{select:function(){throw Error('Method "Prototype.Selector.select" must be defined.')},match:function(){throw Error('Method "Prototype.Selector.match" must be defined.')},find:function(e,t,n){n=n||0;var i,o=Prototype.Selector.match,r=e.length,s=0;for(i=0;i<r;i++)if(o(e[i],t)&&n==s++)return Element.extend(e[i])},extendElements:Element.extend===e?e:function(e){for(var t=0,n=e.length;t<n;t++)Element.extend(e[t]);return e},extendElement:Element.extend}}(),Prototype._original_property=window.Sizzle,function(){function e(e,t,n,i,o,r){o="previousSibling"==e&&!r;for(var s=0,a=i.length;s<a;s++){var l=i[s];if(l){o&&1===l.nodeType&&(l.sizcache=n,l.sizset=s),l=l[e];for(var c=!1;l;){if(l.sizcache===n){c=i[l.sizset];break}if(1!==l.nodeType||r||(l.sizcache=n,l.sizset=s),l.nodeName===t){c=l;break}l=l[e]}i[s]=c}}}function t(e,t,n,i,o,r){o="previousSibling"==e&&!r;for(var s=0,l=i.length;s<l;s++){var c=i[s];if(c){o&&1===c.nodeType&&(c.sizcache=n,c.sizset=s),c=c[e];for(var u=!1;c;){if(c.sizcache===n){u=i[c.sizset];break}if(1===c.nodeType)if(r||(c.sizcache=n,c.sizset=s),"string"!=typeof t){if(c===t){u=!0;break}}else if(0<a.filter(t,[c]).length){u=c;break}c=c[e]}i[s]=u}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i=0,o=Object.prototype.toString,r=!1,s=!0;[0,0].sort((function(){return s=!1,0}));var a=function(e,t,i,r){i=i||[];var s=t=t||document;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return i;for(var l,h,g,v,b=[],y=!0,_=p(t),w=e;null!==(n.exec(""),l=n.exec(w));)if(w=l[3],b.push(l[1]),l[2]){v=l[3];break}if(1<b.length&&u.exec(e))if(2===b.length&&c.relative[b[0]])h=m(b[0]+b[1],t);else for(h=c.relative[b[0]]?[t]:a(b.shift(),t);b.length;)e=b.shift(),c.relative[e]&&(e+=b.shift()),h=m(e,h);else if(!r&&1<b.length&&9===t.nodeType&&!_&&c.match.ID.test(b[0])&&!c.match.ID.test(b[b.length-1])&&(t=(l=a.find(b.shift(),t,_)).expr?a.filter(l.expr,l.set)[0]:l.set[0]),t)for(h=(l=r?{expr:b.pop(),set:d(r)}:a.find(b.pop(),1!==b.length||"~"!==b[0]&&"+"!==b[0]||!t.parentNode?t:t.parentNode,_)).expr?a.filter(l.expr,l.set):l.set,0<b.length?g=d(h):y=!1;b.length;){var E=b.pop();l=E,c.relative[E]?l=b.pop():E="",null==l&&(l=t),c.relative[E](g,l,_)}else g=[];if(g||(g=h),!g)throw"Syntax error, unrecognized expression: "+(E||e);if("[object Array]"===o.call(g))if(y)if(t&&1===t.nodeType)for(e=0;null!=g[e];e++)g[e]&&(!0===g[e]||1===g[e].nodeType&&f(t,g[e]))&&i.push(h[e]);else for(e=0;null!=g[e];e++)g[e]&&1===g[e].nodeType&&i.push(h[e]);else i.push.apply(i,g);else d(g,i);return v&&(a(v,s,i,r),a.uniqueSort(i)),i};a.uniqueSort=function(e){if(h&&(r=s,e.sort(h),r))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},a.matches=function(e,t){return a(e,null,null,t)},a.find=function(e,t,n){var i;if(!e)return[];for(var o=0,r=c.order.length;o<r;o++){var s=c.order[o];if(i=c.leftMatch[s].exec(e)){var a=i[1];if(i.splice(1,1),"\\"!==a.substr(a.length-1)){i[1]=(i[1]||"").replace(/\\/g,"");var l=c.find[s](i,t,n);if(null!=l){e=e.replace(c.match[s],"");break}}}}return l||(l=t.getElementsByTagName("*")),{set:l,expr:e}},a.filter=function(e,t,n,i){for(var o,r,s=e,a=[],l=t,u=t&&t[0]&&p(t[0]);e&&t.length;){for(var h in c.filter)if(null!=(o=c.match[h].exec(e))){var d,f,m=c.filter[h];if(r=!1,l==a&&(a=[]),c.preFilter[h])if(o=c.preFilter[h](o,l,n,a,i,u)){if(!0===o)continue}else r=d=!0;if(o)for(var g=0;null!=(f=l[g]);g++)if(f){var v=i^!!(d=m(f,o,g,l));n&&null!=d?v?r=!0:l[g]=!1:v&&(a.push(f),r=!0)}if(void 0!==d){if(n||(l=a),e=e.replace(c.match[h],""),!r)return[];break}}if(e==s){if(null==r)throw"Syntax error, unrecognized expression: "+e;break}s=e}return l};var l,c=a.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(e,t,n){var i,o="string"==typeof t,r=o&&!/\W/.test(t);for(o=o&&!r,r&&!n&&(t=t.toUpperCase()),n=0,r=e.length;n<r;n++)if(i=e[n]){for(;(i=i.previousSibling)&&1!==i.nodeType;);e[n]=o||i&&i.nodeName===t?i||!1:i===t}o&&a.filter(t,e,!0)},">":function(e,t,n){var i="string"==typeof t;if(i&&!/\W/.test(t)){t=n?t:t.toUpperCase(),n=0;for(var o=e.length;n<o;n++){var r=e[n];r&&(i=r.parentNode,e[n]=i.nodeName===t&&i)}}else{for(n=0,o=e.length;n<o;n++)(r=e[n])&&(e[n]=i?r.parentNode:r.parentNode===t);i&&a.filter(t,e,!0)}},"":function(n,o,r){var s=i++,a=t;if(!/\W/.test(o)){var l=o=r?o:o.toUpperCase();a=e}a("parentNode",o,s,n,l,r)},"~":function(n,o,r){var s=i++,a=t;if("string"==typeof o&&!/\W/.test(o)){var l=o=r?o:o.toUpperCase();a=e}a("previousSibling",o,s,n,l,r)}},find:{ID:function(e,t,n){if(void 0!==t.getElementById&&!n)return(e=t.getElementById(e[1]))?[e]:[]},NAME:function(e,t,n){if(void 0!==t.getElementsByName){n=[];for(var i=0,o=(t=t.getElementsByName(e[1])).length;i<o;i++)t[i].getAttribute("name")===e[1]&&n.push(t[i]);return 0===n.length?null:n}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,i,o,r){if(e=" "+e[1].replace(/\\/g,"")+" ",r)return e;r=0;for(var s;null!=(s=t[r]);r++)s&&(o^(s.className&&0<=(" "+s.className+" ").indexOf(e))?n||i.push(s):n&&(t[r]=!1));return!1},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(e,t){for(var n=0;!1===t[n];n++);return t[n]&&p(t[n])?e[1]:e[1].toUpperCase()},CHILD:function(e){if("nth"==e[1]){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(("even"==e[2]?"2n":"odd"==e[2]&&"2n+1")||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}return e[0]=i++,e},ATTR:function(e,t,n,i,o,r){return t=e[1].replace(/\\/g,""),!r&&c.attrMap[t]&&(e[1]=c.attrMap[t]),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,i,o,r){if("not"===e[1]){if(!(1<(n.exec(e[3])||"").length||/^\w/.test(e[3])))return e=a.filter(e[3],t,i,1^r),i||o.push.apply(o,e),!1;e[3]=a(e[3],null,null,t)}else if(c.match.POS.test(e[0])||c.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return!1===e.disabled&&"hidden"!==e.type},disabled:function(e){return!0===e.disabled},checked:function(e){return!0===e.checked},selected:function(e){return e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!a(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||"BUTTON"===e.nodeName.toUpperCase()},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,i){return t===i.length-1},even:function(e,t){return 0==t%2},odd:function(e,t){return 1==t%2},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0==t},eq:function(e,t,n){return n[3]-0==t}},filter:{PSEUDO:function(e,t,n,i){var o=t[1],r=c.filters[o];if(r)return r(e,n,t,i);if("contains"===o)return 0<=(e.textContent||e.innerText||"").indexOf(t[3]);if("not"===o){for(n=0,i=(t=t[3]).length;n<i;n++)if(t[n]===e)return!1;return!0}},CHILD:function(e,t){var n=t[1],i=e;switch(n){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"==n)return!0;i=e;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0;case"nth":n=t[2];var o=t[3];if(1==n&&0==o)return!0;t=t[0];var r=e.parentNode;if(r&&(r.sizcache!==t||!e.nodeIndex)){var s=0;for(i=r.firstChild;i;i=i.nextSibling)1===i.nodeType&&(i.nodeIndex=++s);r.sizcache=t}return e=e.nodeIndex-o,0==n?0==e:0==e%n&&0<=e/n}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||e.nodeName===t},CLASS:function(e,t){return-1<(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)},ATTR:function(e,t){var n=t[1];n=(e=c.attrHandle[n]?c.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n))+"";var i=t[2];return t=t[4],null==e?"!="===i:"="===i?n===t:"*="===i?0<=n.indexOf(t):"~="===i?0<=(" "+n+" ").indexOf(t):t?"!="===i?n!=t:"^="===i?0===n.indexOf(t):"$="===i?n.substr(n.length-t.length)===t:"|="===i&&(n===t||n.substr(0,t.length+1)===t+"-"):n&&!1!==e},POS:function(e,t,n,i){var o=c.setFilters[t[2]];if(o)return o(e,n,t,i)}}},u=c.match.POS;for(l in c.match)c.match[l]=new RegExp(c.match[l].source+/(?![^\[]*\])(?![^\(]*\))/.source),c.leftMatch[l]=new RegExp(/(^(?:.|\r|\n)*?)/.source+c.match[l].source);var h,d=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(e){d=function(e,t){if(t=t||[],"[object Array]"===o.call(e))Array.prototype.push.apply(t,e);else if("number"==typeof e.length)for(var n=0,i=e.length;n<i;n++)t.push(e[n]);else for(n=0;e[n];n++)t.push(e[n]);return t}}document.documentElement.compareDocumentPosition?h=function(e,t){return e.compareDocumentPosition&&t.compareDocumentPosition?(0===(e=4&e.compareDocumentPosition(t)?-1:e===t?0:1)&&(r=!0),e):(e==t&&(r=!0),0)}:"sourceIndex"in document.documentElement?h=function(e,t){return e.sourceIndex&&t.sourceIndex?(0===(e=e.sourceIndex-t.sourceIndex)&&(r=!0),e):(e==t&&(r=!0),0)}:document.createRange&&(h=function(e,t){if(!e.ownerDocument||!t.ownerDocument)return e==t&&(r=!0),0;var n=e.ownerDocument.createRange(),i=t.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,0),i.setStart(t,0),i.setEnd(t,0),0===(e=n.compareBoundaryPoints(Range.START_TO_END,i))&&(r=!0),e}),function(){var e=document.createElement("div"),t="script"+(new Date).getTime();e.innerHTML="<a name='"+t+"'/>";var n=document.documentElement;n.insertBefore(e,n.firstChild),document.getElementById(t)&&(c.find.ID=function(e,t,n){if(void 0!==t.getElementById&&!n)return(t=t.getElementById(e[1]))?t.id===e[1]||void 0!==t.getAttributeNode&&t.getAttributeNode("id").nodeValue===e[1]?[t]:void 0:[]},c.filter.ID=function(e,t){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=document.createElement("div");e.appendChild(document.createComment("")),0<e.getElementsByTagName("*").length&&(c.find.TAG=function(e,t){if(t=t.getElementsByTagName(e[1]),"*"===e[1]){e=[];for(var n=0;t[n];n++)1===t[n].nodeType&&e.push(t[n]);t=e}return t}),e.innerHTML="<a href='#'></a>",e.firstChild&&void 0!==e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(c.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),document.querySelectorAll&&function(){var e=a,t=document.createElement("div");if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){for(var n in a=function(t,n,i,o){if(n=n||document,!o&&9===n.nodeType&&!p(n))try{return d(n.querySelectorAll(t),i)}catch(e){}return e(t,n,i,o)},e)a[n]=e[n];t=null}}(),document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(c.order.splice(1,0,"CLASS"),c.find.CLASS=function(e,t,n){if(void 0!==t.getElementsByClassName&&!n)return t.getElementsByClassName(e[1])},e=null))}();var f=document.compareDocumentPosition?function(e,t){return 16&e.compareDocumentPosition(t)}:function(e,t){return e!==t&&(!e.contains||e.contains(t))},p=function(e){return 9===e.nodeType&&"HTML"!==e.documentElement.nodeName||!!e.ownerDocument&&"HTML"!==e.ownerDocument.documentElement.nodeName},m=function(e,t){var n,i=[],o="";for(t=t.nodeType?[t]:t;n=c.match.PSEUDO.exec(e);)o+=n[0],e=e.replace(c.match.PSEUDO,"");e=c.relative[e]?e+"*":e,n=0;for(var r=t.length;n<r;n++)a(e,t[n],i);return a.filter(o,i)};window.Sizzle=a}(),function(e){var t=Prototype.Selector.extendElements;Prototype.Selector.engine=e,Prototype.Selector.select=function(n,i){return t(e(n,i||document))},Prototype.Selector.match=function(t,n){return 1==e.matches(n,[t]).length}}(Sizzle),window.Sizzle=Prototype._original_property,delete Prototype._original_property;var Form={reset:function(e){return(e=$(e)).reset(),e},serializeElements:function(e,t){"object"!=typeof t?t={hash:!!t}:Object.isUndefined(t.hash)&&(t.hash=!0);var n,i,o=!1,r=t.submit;if(t.hash){t={};var s=function(e,t,n){return t in e?(Object.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n)):e[t]=n,e}}else t="",s=function(e,t,n){return e+(e?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(n)};return e.inject(t,(function(e,t){return!t.disabled&&t.name&&(n=t.name,null==(i=$(t).getValue())||"file"==t.type||"submit"==t.type&&(o||!1===r||r&&n!=r||!(o=!0))||(e=s(e,n,i))),e}))},Methods:{serialize:function(e,t){return Form.serializeElements(Form.getElements(e),t)},getElements:function(e){e=$(e).getElementsByTagName("*");for(var t,n=[],i=Form.Element.Serializers,o=0;t=e[o];o++)n.push(t);return n.inject([],(function(e,t){return i[t.tagName.toLowerCase()]&&e.push(Element.extend(t)),e}))},getInputs:function(e,t,n){if(e=(e=$(e)).getElementsByTagName("input"),!t&&!n)return $A(e).map(Element.extend);for(var i=0,o=[],r=e.length;i<r;i++){var s=e[i];t&&s.type!=t||n&&s.name!=n||o.push(Element.extend(s))}return o},disable:function(e){return e=$(e),Form.getElements(e).invoke("disable"),e},enable:function(e){return e=$(e),Form.getElements(e).invoke("enable"),e},findFirstElement:function(e){var t=(e=$(e).getElements().findAll((function(e){return"hidden"!=e.type&&!e.disabled}))).findAll((function(e){return e.hasAttribute("tabIndex")&&0<=e.tabIndex})).sortBy((function(e){return e.tabIndex})).first();return t||e.find((function(e){return/^(?:input|select|textarea)$/i.test(e.tagName)}))},focusFirstElement:function(e){return(e=$(e)).findFirstElement().activate(),e},request:function(e,t){e=$(e);var n=(t=Object.clone(t||{})).parameters,i=e.readAttribute("action")||"";return i.blank()&&(i=window.location.href),t.parameters=e.serialize(!0),n&&(Object.isString(n)&&(n=n.toQueryParams()),Object.extend(t.parameters,n)),e.hasAttribute("method")&&!t.method&&(t.method=e.method),new Ajax.Request(i,t)}},Element:{focus:function(e){return $(e).focus(),e},select:function(e){return $(e).select(),e}}};Form.Element.Methods={serialize:function(e){if(!(e=$(e)).disabled&&e.name){var t=e.getValue();if(null!=t){var n={};return n[e.name]=t,Object.toQueryString(n)}}return""},getValue:function(e){var t=(e=$(e)).tagName.toLowerCase();return Form.Element.Serializers[t](e)},setValue:function(e,t){var n=(e=$(e)).tagName.toLowerCase();return Form.Element.Serializers[n](e,t),e},clear:function(e){return $(e).value="",e},present:function(e){return""!=$(e).value},activate:function(e){e=$(e);try{e.focus(),!e.select||"input"==e.tagName.toLowerCase()&&/^(?:button|reset|submit)$/i.test(e.type)||e.select()}catch(e){}return e},disable:function(e){return(e=$(e)).disabled=!0,e},enable:function(e){return(e=$(e)).disabled=!1,e}};var Field=Form.Element,$F=Form.Element.Methods.getValue;Form.Element.Serializers={input:function(e,t){switch(e.type.toLowerCase()){case"checkbox":case"radio":return Form.Element.Serializers.inputSelector(e,t);default:return Form.Element.Serializers.textarea(e,t)}},inputSelector:function(e,t){if(Object.isUndefined(t))return e.checked?e.value:null;e.checked=!!t},textarea:function(e,t){if(Object.isUndefined(t))return e.value;e.value=t},select:function(e,t){if(Object.isUndefined(t))return this["select-one"==e.type?"selectOne":"selectMany"](e);for(var n,i,o=!Object.isArray(t),r=0,s=e.length;r<s;r++)if(n=e.options[r],i=this.optionValue(n),o){if(i==t){n.selected=!0;break}}else n.selected=t.include(i)},selectOne:function(e){var t=e.selectedIndex;return 0<=t?this.optionValue(e.options[t]):null},selectMany:function(e){var t,n=e.length;if(!n)return null;var i=0;for(t=[];i<n;i++){var o=e.options[i];o.selected&&t.push(this.optionValue(o))}return t},optionValue:function(e){return Element.extend(e).hasAttribute("value")?e.value:e.text}},Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function(e,t,n,i){e(i,n),this.element=$(t),this.lastValue=this.getValue()},execute:function(){var e=this.getValue();(Object.isString(this.lastValue)&&Object.isString(e)?this.lastValue!=e:String(this.lastValue)!=String(e))&&(this.callback(this.element,e),this.lastValue=e)}}),Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}}),Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}}),Abstract.EventObserver=Class.create({initialize:function(e,t){this.element=$(e),this.callback=t,this.lastValue=this.getValue(),"form"==this.element.tagName.toLowerCase()?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var e=this.getValue();this.lastValue!=e&&(this.callback(this.element,e),this.lastValue=e)},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},registerCallback:function(e){if(e.type)switch(e.type.toLowerCase()){case"checkbox":case"radio":Event.observe(e,"click",this.onElementEvent.bind(this));break;default:Event.observe(e,"change",this.onElementEvent.bind(this))}}}),Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}}),Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}}),function(){function e(e){var t=document.documentElement,n=document.body||{scrollLeft:0};return e.pageX||e.clientX+(t.scrollLeft||n.scrollLeft)-(t.clientLeft||0)}function t(e){var t=document.documentElement,n=document.body||{scrollTop:0};return e.pageY||e.clientY+(t.scrollTop||n.scrollTop)-(t.clientTop||0)}function n(e,t,n){return n=function(e,t,n){var i=Element.retrieve(e,"prototype_event_registry");Object.isUndefined(i)&&(f.push(e),i=Element.retrieve(e,"prototype_event_registry",$H()));var o=i.get(t);if(Object.isUndefined(o)&&(o=[],i.set(t,o)),o.pluck("handler").include(n))return!1;if(t.include(":"))var r=function(i){if(Object.isUndefined(i.eventName)||i.eventName!==t)return!1;s.extend(i,e),n.call(e,i)};else l||"mouseenter"!==t&&"mouseleave"!==t?r=function(t){s.extend(t,e),n.call(e,t)}:"mouseenter"!==t&&"mouseleave"!==t||(r=function(t){s.extend(t,e);for(var i=t.relatedTarget;i&&i!==e;)try{i=i.parentNode}catch(t){i=e}i!==e&&n.call(e,t)});return r.handler=n,o.push(r),r}(e=$(e),t,n),n?(t.include(":")?e.addEventListener?e.addEventListener("dataavailable",n,!1):(e.attachEvent("ondataavailable",n),e.attachEvent("onlosecapture",n)):(t=p(t),e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)),e):e}function i(e,t,n){e=$(e);var o=Element.retrieve(e,"prototype_event_registry");if(!o)return e;if(!t)return o.each((function(t){i(e,t.key)})),e;var r=o.get(t);if(!r)return e;if(!n)return r.each((function(n){i(e,t,n.handler)})),e;var s=r.find((function(e){return e.handler===n}));if(!s)return e;if(t.include(":"))e.removeEventListener?e.removeEventListener("dataavailable",s,!1):(e.detachEvent("ondataavailable",s),e.detachEvent("onlosecapture",s));else{var a=p(t);e.removeEventListener?e.removeEventListener(a,s,!1):e.detachEvent("on"+a,s)}return o.set(t,r.without(s)),e}function o(e,t,n,i){if(e=$(e),Object.isUndefined(i)&&(i=!0),e==document&&document.createEvent&&!e.dispatchEvent&&(e=document.documentElement),document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent("dataavailable",i,!0)}else(o=document.createEventObject()).eventType=i?"ondataavailable":"onlosecapture";return o.eventName=t,o.memo=n||{},document.createEvent?e.dispatchEvent(o):e.fireEvent(o.eventType,o),s.extend(o)}function r(e,t,n,i){return e=$(e),Object.isFunction(n)&&Object.isUndefined(i)&&(i=n,n=null),new s.Handler(e,t,n,i).start()}var s={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,cache:{}},a=document.documentElement,l="onmouseenter"in a&&"onmouseleave"in a;if(a=window.attachEvent&&!window.addEventListener)var c={0:1,1:4,2:2},u=function(e,t){return e.button===c[t]};else u=Prototype.Browser.WebKit?function(e,t){switch(t){case 0:return 1==e.which&&!e.metaKey;case 1:return 1==e.which&&e.metaKey;default:return!1}}:function(e,t){return e.which?e.which===t+1:e.button===t};s.Methods={isLeftClick:function(e){return u(e,0)},isMiddleClick:function(e){return u(e,1)},isRightClick:function(e){return u(e,2)},element:function(e){var t=(e=s.extend(e)).target,n=e.type;return(e=e.currentTarget)&&e.tagName&&("load"===n||"error"===n||"click"===n&&"input"===e.tagName.toLowerCase()&&"radio"===e.type)&&(t=e),t.nodeType==Node.TEXT_NODE&&(t=t.parentNode),Element.extend(t)},findElement:function(e,t){if(e=s.element(e),!t)return e;for(;e;){if(Object.isElement(e)&&Prototype.Selector.match(e,t))return Element.extend(e);e=e.parentNode}},pointer:function(n){return{x:e(n),y:t(n)}},pointerX:e,pointerY:t,stop:function(e){s.extend(e),e.preventDefault(),e.stopPropagation(),e.stopped=!0}};var h=Object.keys(s.Methods).inject({},(function(e,t){return e[t]=s.Methods[t].methodize(),e}));if(a){var d=function(e){switch(e.type){case"mouseover":e=e.fromElement;break;case"mouseout":e=e.toElement;break;default:return null}return Element.extend(e)};Object.extend(h,{stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=!1},inspect:function(){return"[object Event]"}}),s.extend=function(e,t){if(!e)return!1;if(e._extendedByPrototype)return e;e._extendedByPrototype=Prototype.emptyFunction;var n=s.pointer(e);return Object.extend(e,{target:e.srcElement||t,relatedTarget:d(e),pageX:n.x,pageY:n.y}),Object.extend(e,h)}}else s.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__,Object.extend(s.prototype,h),s.extend=Prototype.K;var f=[];Prototype.Browser.IE&&window.attachEvent("onunload",(function(){for(var e=0,t=f.length;e<t;e++)s.stopObserving(f[e]),f[e]=null})),Prototype.Browser.WebKit&&window.addEventListener("unload",Prototype.emptyFunction,!1);var p=Prototype.K,m={mouseenter:"mouseover",mouseleave:"mouseout"};l||(p=function(e){return m[e]||e}),s.Handler=Class.create({initialize:function(e,t,n,i){this.element=$(e),this.eventName=t,this.selector=n,this.callback=i,this.handler=this.handleEvent.bind(this)},start:function(){return s.observe(this.element,this.eventName,this.handler),this},stop:function(){return s.stopObserving(this.element,this.eventName,this.handler),this},handleEvent:function(e){var t=e.findElement(this.selector);t&&this.callback.call(this.element,e,t)}}),Object.extend(s,s.Methods),Object.extend(s,{fire:o,observe:n,stopObserving:i,on:r}),Element.addMethods({fire:o,observe:n,stopObserving:i,on:r}),Object.extend(document,{fire:o.methodize(),observe:n.methodize(),stopObserving:i.methodize(),on:r.methodize(),loaded:!1}),window.Event?Object.extend(window.Event,s):window.Event=s}(),function(){function e(){document.loaded||(t&&window.clearTimeout(t),document.loaded=!0,document.fire("dom:loaded"))}var t;document.addEventListener?document.addEventListener("DOMContentLoaded",e,!1):(document.observe("readystatechange",(function t(){"complete"===document.readyState&&(document.stopObserving("readystatechange",t),e())})),window==top&&(t=function n(){try{document.documentElement.doScroll("left")}catch(e){return void(t=n.defer())}e()}.defer())),Event.observe(window,"load",e)}(),Element.addMethods(),Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.Methods.childOf=Element.Methods.descendantOf;var Insertion={Before:function(e,t){return Element.insert(e,{before:t})},Top:function(e,t){return Element.insert(e,{top:t})},Bottom:function(e,t){return Element.insert(e,{bottom:t})},After:function(e,t){return Element.insert(e,{after:t})}},$continue=Error('"throw $continue" is deprecated, use "return" instead'),Position={includeScrollOffsets:!1,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(e,t,n){return this.includeScrollOffsets?this.withinIncludingScrolloffsets(e,t,n):(this.xcomp=t,this.ycomp=n,this.offset=Element.cumulativeOffset(e),n>=this.offset[1]&&n<this.offset[1]+e.offsetHeight&&t>=this.offset[0]&&t<this.offset[0]+e.offsetWidth)},withinIncludingScrolloffsets:function(e,t,n){var i=Element.cumulativeScrollOffset(e);return this.xcomp=t+i[0]-this.deltaX,this.ycomp=n+i[1]-this.deltaY,this.offset=Element.cumulativeOffset(e),this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+e.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+e.offsetWidth},overlap:function(e,t){return e?"vertical"==e?(this.offset[1]+t.offsetHeight-this.ycomp)/t.offsetHeight:"horizontal"==e?(this.offset[0]+t.offsetWidth-this.xcomp)/t.offsetWidth:void 0:0},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(e){return Position.prepare(),Element.absolutize(e)},relativize:function(e){return Position.prepare(),Element.relativize(e)},realOffset:Element.Methods.cumulativeScrollOffset,offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(e,t,n){return n=n||{},Element.clonePosition(t,e,n)}};document.getElementsByClassName||(document.getElementsByClassName=function(e){function t(e){return e.blank()?null:"[contains(concat(' ', @class, ' '), ' "+e+" ')]"}return Element.Methods.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(e,n){return n=n.toString().strip(),(n=/\s/.test(n)?$w(n).map(t).join(""):t(n))?document._getElementsByXPath(".//*"+n,e):[]}:function(e,t){t=t.toString().strip();var n=[],i=/\s/.test(t)?$w(t):null;if(!i&&!t)return n;e=$(e).getElementsByTagName("*"),t=" "+t+" ";for(var o,r,s=0;o=e[s];s++)o.className&&(r=" "+o.className+" ")&&(r.include(t)||i&&i.all((function(e){return!e.toString().blank()&&r.include(" "+e+" ")})))&&n.push(Element.extend(o));return n},function(e,t){return $(t||document.body).getElementsByClassName(e)}}()),Element.ClassNames=Class.create(),Element.ClassNames.prototype={initialize:function(e){this.element=$(e)},_each:function(e){this.element.className.split(/\s+/).select((function(e){return 0<e.length}))._each(e)},set:function(e){this.element.className=e},add:function(e){this.include(e)||this.set($A(this).concat(e).join(" "))},remove:function(e){this.include(e)&&this.set($A(this).without(e).join(" "))},toString:function(){return $A(this).join(" ")}},Object.extend(Element.ClassNames.prototype,Enumerable),window.Selector=Class.create({initialize:function(e){this.expression=e.strip()},findElements:function(e){return Prototype.Selector.select(this.expression,e)},match:function(e){return Prototype.Selector.match(e,this.expression)},toString:function(){return this.expression},inspect:function(){return"#<Selector: "+this.expression+">"}}),Object.extend(Selector,{matchElements:function(e,t){for(var n=Prototype.Selector.match,i=[],o=0,r=e.length;o<r;o++){var s=e[o];n(s,t)&&i.push(Element.extend(s))}return i},findElement:function(e,t,n){n=n||0;for(var i,o=0,r=0,s=e.length;r<s;r++)if(i=e[r],Prototype.Selector.match(i,t)&&n===o++)return Element.extend(i)},findChildElements:function(e,t){return t=t.toArray().join(", "),Prototype.Selector.select(t,e||document)}}),function(){function e(e){var t=document.createElement("div"),n=(e="on"+e)in t;return n||(t.setAttribute(e,"return;"),n="function"==typeof t[e]),n}function t(e){if(e.fire("ajax:before").stopped)return!1;if("form"===e.tagName.toLowerCase()){var t=e.readAttribute("method")||"post",n=e.readAttribute("action"),i=e.serialize({submit:e.retrieve("rails:submit-button")});e.store("rails:submit-button",null)}else t=e.readAttribute("data-method")||"get",n=e.readAttribute("href"),i={};new Ajax.Request(n,{method:t,parameters:i,evalScripts:!0,onCreate:function(t){e.fire("ajax:create",t)},onComplete:function(t){e.fire("ajax:complete",t)},onSuccess:function(t){e.fire("ajax:success",t)},onFailure:function(t){e.fire("ajax:failure",t)}}),e.fire("ajax:after")}function n(e,t,n){e.insert(new Element("input",{type:"hidden",name:t,value:n}))}function i(e){e.select("input[type=submit][data-disable-with]").each((function(e){e.store("rails:original-value",e.getValue()),e.setValue(e.readAttribute("data-disable-with")).disable()}))}function o(e){return!(e=e.readAttribute("data-confirm"))||confirm(e)}var r=e("submit"),s=e("change");r&&s||(Event.Handler.prototype.initialize=Event.Handler.prototype.initialize.wrap((function(e,t,n,i,o){e(t,n,i,o),(e=!r&&"submit"==this.eventName)&&(e=this.element,e=!(Object.isElement(e)&&"FORM"==e.nodeName.toUpperCase())),!e&&(e=!s&&"change"==this.eventName)&&(e=this.element,Object.isElement(e)?e="INPUT"==(e=e.nodeName.toUpperCase())||"SELECT"==e||"TEXTAREA"==e:e=!1,e=!e),e&&(this.eventName="emulated:"+this.eventName)}))),r||document.on("focusin","form",(function(e,t){t.retrieve("emulated:submit")||(t.on("submit",(function(e){!1===t.fire("emulated:submit",e,!0).returnValue&&e.preventDefault()})),t.store("emulated:submit",!0))})),s||document.on("focusin","input, select, textarea",(function(e,t){t.retrieve("emulated:change")||(t.on("change",(function(e){t.fire("emulated:change",e,!0)})),t.store("emulated:change",!0))})),document.on("click","a[data-confirm], a[data-remote], a[data-method], input[data-confirm], button[data-confirm]",(function(e,i){if(!o(i))return e.stop(),!1;if(i.readAttribute("data-remote"))t(i),e.stop();else if(i.readAttribute("data-method")){var r=i.readAttribute("data-method"),s=i.readAttribute("href"),a=$$("meta[name=csrf-param]")[0],l=$$("meta[name=csrf-token]")[0];s=new Element("form",{method:"POST",action:s,style:"display: none;"}),$(i.parentNode).insert(s),"post"!==r&&n(s,"_method",r),a&&n(s,a.readAttribute("content"),l.readAttribute("content")),s.submit(),e.stop()}})),document.on("click","form input[type=submit], form button[type=submit], form button:not([type])",(function(e,t){e.findElement("form").store("rails:submit-button",t.name||!1)})),document.on("submit",(function(e){var n=e.findElement();if(!o(n))return e.stop(),!1;n.readAttribute("data-remote")?(t(n),e.stop()):i(n)})),document.on("ajax:create","form",(function(e,t){t==e.findElement()&&i(t)})),document.on("ajax:complete","form",(function(e,t){t==e.findElement()&&function(e){e.select("input[type=submit][data-disable-with]").each((function(e){e.setValue(e.retrieve("rails:original-value")).enable()}))}(t)})),Ajax.Responders.register({onCreate:function(e){var t=$$("meta[name=csrf-token]")[0];t&&(t=t.readAttribute("content"),e.options.requestHeaders||(e.options.requestHeaders={}),e.options.requestHeaders["X-CSRF-Token"]=t)}})}(),function(e,t){function n(e){var t=e.length,n=Q.type(e);return!Q.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||"function"!==n&&(0===t||"number"==typeof t&&0<t&&t-1 in e)))}function i(e,n,i,o){if(Q.acceptData(e)){var r=Q.expando,s="string"==typeof n,a=e.nodeType,l=a?Q.cache:e,c=a?e[r]:e[r]&&r;if(c&&l[c]&&(o||l[c].data)||!s||i!==t)return c||(a?e[r]=c=z.pop()||Q.guid++:c=r),l[c]||(l[c]={},a||(l[c].toJSON=Q.noop)),"object"!=typeof n&&"function"!=typeof n||(o?l[c]=Q.extend(l[c],n):l[c].data=Q.extend(l[c].data,n)),e=l[c],o||(e.data||(e.data={}),e=e.data),i!==t&&(e[Q.camelCase(n)]=i),s?null==(i=e[n])&&(i=e[Q.camelCase(n)]):i=e,i}}function o(e,t,n){if(Q.acceptData(e)){var i,o,r=e.nodeType,a=r?Q.cache:e,l=r?e[Q.expando]:Q.expando;if(a[l]){if(t&&(o=n?a[l]:a[l].data)){Q.isArray(t)?t=t.concat(Q.map(t,Q.camelCase)):t in o?t=[t]:t=(t=Q.camelCase(t))in o?[t]:t.split(" ");var c=0;for(i=t.length;c<i;c++)delete o[t[c]];if(!(n?s:Q.isEmptyObject)(o))return}if(!n&&(delete a[l].data,!s(a[l])))return;r?Q.cleanData([e],!0):Q.support.deleteExpando||a!=a.window?delete a[l]:a[l]=null}}}function r(e,n,i){if(i===t&&1===e.nodeType)if(i="data-"+n.replace(ge,"-$1").toLowerCase(),"string"==typeof(i=e.getAttribute(i))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:me.test(i)?Q.parseJSON(i):i)}catch(e){}Q.data(e,n,i)}else i=t;return i}function s(e){for(var t in e)if(("data"!==t||!Q.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function a(){return!0}function l(){return!1}function c(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function u(e,t,n){if(t=t||0,Q.isFunction(t))return Q.grep(e,(function(e,i){return!!t.call(e,i,e)===n}));if(t.nodeType)return Q.grep(e,(function(e){return e===t===n}));if("string"==typeof t){var i=Q.grep(e,(function(e){return 1===e.nodeType}));if(Le.test(t))return Q.filter(t,i,!n);t=Q.filter(t,i)}return Q.grep(e,(function(e){return 0<=Q.inArray(e,t)===n}))}function h(e){var t=De.split("|");if((e=e.createDocumentFragment()).createElement)for(;t.length;)e.createElement(t.pop());return e}function d(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function f(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function p(e){var t=Xe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n,i=0;null!=(n=e[i]);i++)Q._data(n,"globalEval",!t||Q._data(t[i],"globalEval"))}function g(e,t){if(1===t.nodeType&&Q.hasData(e)){var n,i,o=Q._data(e);e=Q._data(t,o);var r=o.events;if(r)for(n in delete e.handle,e.events={},r)for(o=0,i=r[n].length;o<i;o++)Q.event.add(t,n,r[n][o]);e.data&&(e.data=Q.extend({},e.data))}}function v(e,n){var i,o,r=0,s=typeof e.getElementsByTagName!==$?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==$?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],i=e.childNodes||e;null!=(o=i[r]);r++)!n||Q.nodeName(o,n)?s.push(o):Q.merge(s,v(o,n));return n===t||n&&Q.nodeName(e,n)?Q.merge([e],s):s}function b(e){Ve.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,o=dt.length;o--;)if((t=dt[o]+n)in e)return t;return i}function _(e,t){return e=t||e,"none"===Q.css(e,"display")||!Q.contains(e.ownerDocument,e)}function w(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)(i=e[s]).style&&(r[s]=Q._data(i,"olddisplay"),n=i.style.display,t?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&_(i)&&(r[s]=Q._data(i,"olddisplay",S(i.nodeName)))):r[s]||(o=_(i),(n&&"none"!==n||!o)&&Q._data(i,"olddisplay",o?n:Q.css(i,"display"))));for(s=0;s<a;s++)!(i=e[s]).style||t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[s]||"":"none");return e}function E(e,t,n){return(e=rt.exec(t))?Math.max(0,e[1]-(n||0))+(e[2]||"px"):t}function x(e,t,n,i,o){t=n===(i?"border":"content")?4:"width"===t?1:0;for(var r=0;4>t;t+=2)"margin"===n&&(r+=Q.css(e,n+ht[t],!0,o)),i?("content"===n&&(r-=Q.css(e,"padding"+ht[t],!0,o)),"margin"!==n&&(r-=Q.css(e,"border"+ht[t]+"Width",!0,o))):(r+=Q.css(e,"padding"+ht[t],!0,o),"padding"!==n&&(r+=Q.css(e,"border"+ht[t]+"Width",!0,o)));return r}function C(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=ft(e),s=Q.support.boxSizing&&"border-box"===Q.css(e,"boxSizing",!1,r);if(0>=o||null==o){if((0>(o=pt(e,t,r))||null==o)&&(o=e.style[t]),st.test(o))return o;i=s&&(Q.support.boxSizingReliable||o===e.style[t]),o=parseFloat(o)||0}return o+x(e,t,n||(s?"border":"content"),i,r)+"px"}function S(e){var t=R,n=lt[e];return n||("none"!==(n=T(e,t))&&n||((t=((Ze=(Ze||Q("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement))[0].contentWindow||Ze[0].contentDocument).document).write("<!doctype html><html><body>"),t.close(),n=T(e,t),Ze.detach()),lt[e]=n),n}function T(e,t){return e=Q(t.createElement(e)).appendTo(t.body),t=Q.css(e[0],"display"),e.remove(),t}function O(e,t,n,i){var o;if(Q.isArray(t))Q.each(t,(function(t,o){n||gt.test(e)?i(e,o):O(e+"["+("object"==typeof o?t:"")+"]",o,n,i)}));else if(n||"object"!==Q.type(t))i(e,t);else for(o in t)O(e+"["+o+"]",t[o],n,i)}function A(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i=0,o=t.toLowerCase().match(ee)||[];if(Q.isFunction(n))for(;t=o[i++];)"+"===t[0]?(t=t.slice(1)||"*",(e[t]=e[t]||[]).unshift(n)):(e[t]=e[t]||[]).push(n)}}function N(e,t,n,i){function o(a){var l;return r[a]=!0,Q.each(e[a]||[],(function(e,a){return"string"!=typeof(e=a(t,n,i))||s||r[e]?s?!(l=e):void 0:(t.dataTypes.unshift(e),o(e),!1)})),l}var r={},s=e===kt;return o(t.dataTypes[0])||!r["*"]&&o("*")}function k(e,n){var i,o,r=Q.ajaxSettings.flatOptions||{};for(o in n)n[o]!==t&&((r[o]?e:i||(i={}))[o]=n[o]);return i&&Q.extend(!0,e,i),e}function F(){try{return new e.XMLHttpRequest}catch(e){}}function j(){return setTimeout((function(){Ht=t})),Ht=Q.now()}function P(e,t,n){var i,o=0,r=qt.length,s=Q.Deferred().always((function(){delete a.elem})),a=function(){if(i)return!1;for(var t=Ht||j(),n=1-((t=Math.max(0,l.startTime+l.duration-t))/l.duration||0),o=0,r=l.tweens.length;o<r;o++)l.tweens[o].run(n);return s.notifyWith(e,[l,n,t]),1>n&&r?t:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:Q.extend({},t),opts:Q.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ht||j(),duration:n.duration,tweens:[],createTween:function(t,n){return t=Q.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing),l.tweens.push(t),t},stop:function(t){var n=0,o=t?l.tweens.length:0;if(i)return this;for(i=!0;n<o;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}});for(function(e,t){var n,i;for(n in e){var o=Q.camelCase(n),r=t[o],s=e[n];if(Q.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==o&&(e[o]=s,delete e[n]),(i=Q.cssHooks[o])&&"expand"in i)for(n in s=i.expand(s),delete e[o],s)n in e||(e[n]=s[n],t[n]=r);else t[o]=r}}(n=l.props,l.opts.specialEasing);o<r;o++)if(t=qt[o].call(l,e,n,l.opts))return t;return function(e,t){Q.each(t,(function(t,n){for(var i=(Vt[t]||[]).concat(Vt["*"]),o=0,r=i.length;o<r&&!i[o].call(e,t,n);o++);}))}(l,n),Q.isFunction(l.opts.start)&&l.opts.start.call(e,l),Q.fx.timer(Q.extend(a,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function L(e,t,n,i,o){return new L.prototype.init(e,t,n,i,o)}function I(e,t){var n={height:e},i=0;for(t=t?1:0;4>i;i+=2-t){var o=ht[i];n["margin"+o]=n["padding"+o]=e}return t&&(n.opacity=n.width=e),n}function M(e){return Q.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var D,$=typeof t,R=e.document,H=e.location,W=e.jQuery,B=e.$,U={},z=[],q=z.concat,V=z.push,K=z.slice,G=z.indexOf,X=U.toString,J=U.hasOwnProperty,Y="1.9.1".trim,Q=function(e,t){return new Q.fn.init(e,t,fe)},Z=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=/\S+/g,te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ne=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,ie=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,oe=/^[\],:{}\s]*$/,re=/(?:^|:|,)(?:\s*\[)+/g,se=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ae=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,le=/^-ms-/,ce=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()},he=function(e){(R.addEventListener||"load"===e.type||"complete"===R.readyState)&&(de(),Q.ready())},de=function(){R.addEventListener?(R.removeEventListener("DOMContentLoaded",he,!1),e.removeEventListener("load",he,!1)):(R.detachEvent("onreadystatechange",he),e.detachEvent("onload",he))};Q.fn=Q.prototype={jquery:"1.9.1",constructor:Q,init:function(e,n,i){if(!e)return this;if("string"==typeof e){var o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:ne.exec(e);if(!o||!o[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(o[1]){if(n=n instanceof Q?n[0]:n,Q.merge(this,Q.parseHTML(o[1],n&&n.nodeType?n.ownerDocument||n:R,!0)),ie.test(o[1])&&Q.isPlainObject(n))for(o in n)Q.isFunction(this[o])?this[o](n[o]):this.attr(o,n[o])}else{if((n=R.getElementById(o[2]))&&n.parentNode){if(n.id!==o[2])return i.find(e);this.length=1,this[0]=n}this.context=R,this.selector=e}return this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Q.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Q.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return K.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){return(e=Q.merge(this.constructor(),e)).prevObject=this,e.context=this.context,e},each:function(e,t){return Q.each(this,e,t)},ready:function(e){return Q.ready.promise().done(e),this},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length;return e=+e+(0>e?t:0),this.pushStack(0<=e&&e<t?[this[e]]:[])},map:function(e){return this.pushStack(Q.map(this,(function(t,n){return e.call(t,n,t)})))},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:[].sort,splice:[].splice},Q.fn.init.prototype=Q.fn,Q.extend=Q.fn.extend=function(){var e,n,i,o=arguments[0]||{},r=1,s=arguments.length,a=!1;for("boolean"==typeof o&&(a=o,o=arguments[1]||{},r=2),"object"==typeof o||Q.isFunction(o)||(o={}),s===r&&(o=this,--r);r<s;r++)if(null!=(i=arguments[r]))for(n in i){var l=o[n],c=i[n];o!==c&&(a&&c&&(Q.isPlainObject(c)||(e=Q.isArray(c)))?(e?(e=!1,l=l&&Q.isArray(l)?l:[]):l=l&&Q.isPlainObject(l)?l:{},o[n]=Q.extend(a,l,c)):c!==t&&(o[n]=c))}return o},Q.extend({noConflict:function(t){return e.$===Q&&(e.$=B),t&&e.jQuery===Q&&(e.jQuery=W),Q},isReady:!1,readyWait:1,holdReady:function(e){e?Q.readyWait++:Q.ready(!0)},ready:function(e){if(!0===e?!--Q.readyWait:!Q.isReady){if(!R.body)return setTimeout(Q.ready);Q.isReady=!0,!0!==e&&0<--Q.readyWait||(D.resolveWith(R,[Q]),Q.fn.trigger&&Q(R).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===Q.type(e)},isArray:Array.isArray||function(e){return"array"===Q.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?U[X.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==Q.type(e)||e.nodeType||Q.isWindow(e))return!1;try{if(e.constructor&&!J.call(e,"constructor")&&!J.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(var n in e);return n===t||J.call(e,n)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||R;var i=ie.exec(e);return n=!n&&[],i?[t.createElement(i[1])]:(i=Q.buildFragment([e],t,n),n&&Q(n).remove(),Q.merge([],i.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=Q.trim(t))&&oe.test(t.replace(se,"@").replace(ae,"]").replace(re,""))?new Function("return "+t)():void Q.error("Invalid JSON: "+t)},parseXML:function(n){if(!n||"string"!=typeof n)return null;try{if(e.DOMParser)var i=(new DOMParser).parseFromString(n,"text/xml");else(i=new ActiveXObject("Microsoft.XMLDOM")).async="false",i.loadXML(n)}catch(e){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||Q.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&Q.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(le,"ms-").replace(ce,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var o=0,r=e.length,s=n(e);if(i){if(s)for(;o<r&&!1!==(s=t.apply(e[o],i));o++);else for(o in e)if(!1===(s=t.apply(e[o],i)))break}else if(s)for(;o<r&&!1!==(s=t.call(e[o],o,e[o]));o++);else for(o in e)if(!1===(s=t.call(e[o],o,e[o])))break;return e},trim:Y&&!Y.call("\ufeff")?function(e){return null==e?"":Y.call(e)}:function(e){return null==e?"":(e+"").replace(te,"")},makeArray:function(e,t){return t=t||[],null!=e&&(n(Object(e))?Q.merge(t,"string"==typeof e?[e]:e):V.call(t,e)),t},inArray:function(e,t,n){if(t){if(G)return G.call(t,e,n);var i=t.length;for(n=n?0>n?Math.max(0,i+n):n:0;n<i;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,o=e.length,r=0;if("number"==typeof i)for(;r<i;r++)e[o++]=n[r];else for(;n[r]!==t;)e[o++]=n[r++];return e.length=o,e},grep:function(e,t,n){var i=[],o=0,r=e.length;for(n=!!n;o<r;o++){n!==!!t(e[o],o)&&i.push(e[o])}return i},map:function(e,t,i){var o=0,r=e.length,s=[];if(n(e))for(;o<r;o++){var a=t(e[o],o,i);null!=a&&(s[s.length]=a)}else for(o in e)null!=(a=t(e[o],o,i))&&(s[s.length]=a);return q.apply([],s)},guid:1,proxy:function(e,n){if("string"==typeof n){var i=e[n];n=e,e=i}if(!Q.isFunction(e))return t;var o=K.call(arguments,2);return i=function(){return e.apply(n||this,o.concat(K.call(arguments)))},i.guid=e.guid=e.guid||Q.guid++,i},access:function(e,n,i,o,r,s,a){var l=0,c=e.length,u=null==i;if("object"===Q.type(i))for(l in r=!0,i)Q.access(e,n,l,i[l],!0,s,a);else if(o!==t&&(r=!0,Q.isFunction(o)||(a=!0),u&&(a?(n.call(e,o),n=null):(u=n,n=function(e,t,n){return u.call(Q(e),n)})),n))for(;l<c;l++)n(e[l],i,a?o:o.call(e[l],l,n(e[l],i)));return r?e:u?n.call(e):c?n(e[0],i):s},now:function(){return(new Date).getTime()}}),Q.ready.promise=function(t){if(!D)if(D=Q.Deferred(),"complete"===R.readyState)setTimeout(Q.ready);else if(R.addEventListener)R.addEventListener("DOMContentLoaded",he,!1),e.addEventListener("load",he,!1);else{R.attachEvent("onreadystatechange",he),e.attachEvent("onload",he);var n=!1;try{n=null==e.frameElement&&R.documentElement}catch(e){}n&&n.doScroll&&function e(){if(!Q.isReady){try{n.doScroll("left")}catch(t){return setTimeout(e,50)}de(),Q.ready()}}()}return D.promise(t)},Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){U["[object "+t+"]"]=t.toLowerCase()}));var fe=Q(R),pe={};Q.Callbacks=function(e){e="string"==typeof e?pe[e]||function(e){var t=pe[e]={};return Q.each(e.match(ee)||[],(function(e,n){t[n]=!0})),t}(e):Q.extend({},e);var n,i,o,r,s,a,l=[],c=!e.once&&[],u=function(t){for(i=e.memory&&t,o=!0,s=a||0,a=0,r=l.length,n=!0;l&&s<r;s++)if(!1===l[s].apply(t[0],t[1])&&e.stopOnFalse){i=!1;break}n=!1,l&&(c?c.length&&u(c.shift()):i?l=[]:h.disable())},h={add:function(){if(l){var t=l.length;!function t(n){Q.each(n,(function(n,i){"function"===(n=Q.type(i))?e.unique&&h.has(i)||l.push(i):i&&i.length&&"string"!==n&&t(i)}))}(arguments),n?r=l.length:i&&(a=t,u(i))}return this},remove:function(){return l&&Q.each(arguments,(function(e,t){for(var i;-1<(i=Q.inArray(t,l,i));)l.splice(i,1),n&&(i<=r&&r--,i<=s&&s--)})),this},has:function(e){return e?-1<Q.inArray(e,l):!(!l||!l.length)},empty:function(){return l=[],this},disable:function(){return l=c=i=t,this},disabled:function(){return!l},lock:function(){return c=t,i||h.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=[e,(t=t||[]).slice?t.slice():t],!l||o&&!c||(n?c.push(t):u(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},Q.extend({Deferred:function(e){var t=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Q.Deferred((function(n){Q.each(t,(function(t,r){var s=r[0],a=Q.isFunction(e[t])&&e[t];o[r[1]]((function(){var e=a&&a.apply(this,arguments);e&&Q.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?Q.extend(e,i):i}},o={};return i.pipe=i.then,Q.each(t,(function(e,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add((function(){n=a}),t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n=0,i=K.call(arguments),o=i.length,r=1!==o||e&&Q.isFunction(e.promise)?o:0,s=1===r?e:Q.Deferred(),a=function(e,t,n){return function(i){t[e]=this,n[e]=1<arguments.length?K.call(arguments):i,n===l?s.notifyWith(t,n):--r||s.resolveWith(t,n)}};if(1<o){var l=Array(o),c=Array(o);for(t=Array(o);n<o;n++)i[n]&&Q.isFunction(i[n].promise)?i[n].promise().done(a(n,t,i)).fail(s.reject).progress(a(n,c,l)):--r}return r||s.resolveWith(t,i),s.promise()}}),Q.support=function(){var t,n,i=R.createElement("div");i.setAttribute("className","t"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";var o=i.getElementsByTagName("*"),r=i.getElementsByTagName("a")[0];if(!o||!r||!o.length)return{};var s=R.createElement("select"),a=s.appendChild(R.createElement("option"));o=i.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5";var l={getSetAttribute:"t"!==i.className,leadingWhitespace:3===i.firstChild.nodeType,tbody:!i.getElementsByTagName("tbody").length,htmlSerialize:!!i.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:a.selected,enctype:!!R.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==R.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===R.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};o.checked=!0,l.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,l.optDisabled=!a.disabled;try{delete i.test}catch(e){l.deleteExpando=!1}for(n in(o=R.createElement("input")).setAttribute("value",""),l.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),l.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),(r=R.createDocumentFragment()).appendChild(o),l.appendChecked=o.checked,l.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,i.attachEvent&&(i.attachEvent("onclick",(function(){l.noCloneEvent=!1})),i.cloneNode(!0).click()),{submit:!0,change:!0,focusin:!0})i.setAttribute(r="on"+n,"t"),l[n+"Bubbles"]=r in e||!1===i.attributes[r].expando;return i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===i.style.backgroundClip,Q((function(){var n=R.getElementsByTagName("body")[0];if(n){var o=R.createElement("div");o.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",n.appendChild(o).appendChild(i),i.innerHTML="<table><tr><td></td><td>t</td></tr></table>";var r=i.getElementsByTagName("td");r[0].style.cssText="padding:0;margin:0;border:0;display:none",t=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",l.reliableHiddenOffsets=t&&0===r[0].offsetHeight,i.innerHTML="",i.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",l.boxSizing=4===i.offsetWidth,l.doesNotIncludeMarginInBodyOffset=1!==n.offsetTop,e.getComputedStyle&&(l.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,l.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,(r=i.appendChild(R.createElement("div"))).style.cssText=i.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",r.style.marginRight=r.style.width="0",i.style.width="1px",l.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof i.style.zoom!==$&&(i.innerHTML="",i.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1",l.inlineBlockNeedsLayout=3===i.offsetWidth,i.style.display="block",i.innerHTML="<div></div>",i.firstChild.style.width="5px",l.shrinkWrapBlocks=3!==i.offsetWidth,l.inlineBlockNeedsLayout&&(n.style.zoom=1)),n.removeChild(o),i=null}})),o=s=r=a=r=o=null,l}();var me=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ge=/([A-Z])/g;Q.extend({cache:{},expando:"jQuery"+("1.9.1"+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?Q.cache[e[Q.expando]]:e[Q.expando])&&!s(e)},data:function(e,t,n){return i(e,t,n)},removeData:function(e,t){return o(e,t)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return o(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&Q.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),Q.fn.extend({data:function(e,n){var i,o=this[0],s=0,a=null;if(e===t){if(this.length&&(a=Q.data(o),1===o.nodeType&&!Q._data(o,"parsedAttrs"))){for(i=o.attributes;s<i.length;s++){var l=i[s].name;l.indexOf("data-")||(l=Q.camelCase(l.slice(5)),r(o,l,a[l]))}Q._data(o,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each((function(){Q.data(this,e)})):Q.access(this,(function(n){if(n===t)return o?r(o,e,Q.data(o,e)):null;this.each((function(){Q.data(this,e,n)}))}),null,n,1<arguments.length,null,!0)},removeData:function(e){return this.each((function(){Q.removeData(this,e)}))}}),Q.extend({queue:function(e,t,n){if(e){t=(t||"fx")+"queue";var i=Q._data(e,t);return n&&(!i||Q.isArray(n)?i=Q._data(e,t,Q.makeArray(n)):i.push(n)),i||[]}},dequeue:function(e,t){t=t||"fx";var n=Q.queue(e,t),i=n.length,o=n.shift(),r=Q._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),(r.cur=o)&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,(function(){Q.dequeue(e,t)}),r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q._data(e,n)||Q._data(e,n,{empty:Q.Callbacks("once memory").add((function(){Q._removeData(e,t+"queue"),Q._removeData(e,n)}))})}}),Q.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?Q.queue(this[0],e):n===t?this:this.each((function(){var t=Q.queue(this,e,n);Q._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&Q.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){Q.dequeue(this,e)}))},delay:function(e,t){return e=Q.fx&&Q.fx.speeds[e]||e,this.queue(t||"fx",(function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,o=1,r=Q.Deferred(),s=this,a=this.length,l=function(){--o||r.resolveWith(s,[s])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";a--;)(i=Q._data(s[a],e+"queueHooks"))&&i.empty&&(o++,i.empty.add(l));return l(),r.promise(n)}});var ve=/[\t\r\n]/g,be=/\r/g,ye=/^(?:input|select|textarea|button|object)$/i,_e=/^(?:a|area)$/i,we=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Ee=/^(?:checked|selected)$/i,xe=Q.support.getSetAttribute,Ce=Q.support.input;Q.fn.extend({attr:function(e,t){return Q.access(this,Q.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each((function(){Q.removeAttr(this,e)}))},prop:function(e,t){return Q.access(this,Q.prop,e,t,1<arguments.length)},removeProp:function(e){return e=Q.propFix[e]||e,this.each((function(){try{this[e]=t,delete this[e]}catch(e){}}))},addClass:function(e){var t,n,i,o=0,r=this.length,s="string"==typeof e&&e;if(Q.isFunction(e))return this.each((function(t){Q(this).addClass(e.call(this,t,this.className))}));if(s)for(s=(e||"").match(ee)||[];o<r;o++){var a=this[o];if(t=1===a.nodeType&&(a.className?(" "+a.className+" ").replace(ve," "):" ")){for(i=0;n=s[i++];)0>t.indexOf(" "+n+" ")&&(t+=n+" ");a.className=Q.trim(t)}}return this},removeClass:function(e){var t,n,i,o=0,r=this.length,s=0===arguments.length||"string"==typeof e&&e;if(Q.isFunction(e))return this.each((function(t){Q(this).removeClass(e.call(this,t,this.className))}));if(s)for(s=(e||"").match(ee)||[];o<r;o++){var a=this[o];if(t=1===a.nodeType&&(a.className?(" "+a.className+" ").replace(ve," "):"")){for(i=0;n=s[i++];)for(;0<=t.indexOf(" "+n+" ");)t=t.replace(" "+n+" "," ");a.className=e?Q.trim(t):""}}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return Q.isFunction(e)?this.each((function(n){Q(this).toggleClass(e.call(this,n,this.className,t),t)})):this.each((function(){if("string"===n)for(var o,r=0,s=Q(this),a=t,l=e.match(ee)||[];o=l[r++];)a=i?a:!s.hasClass(o),s[a?"addClass":"removeClass"](o);else n!==$&&"boolean"!==n||(this.className&&Q._data(this,"__className__",this.className),this.className=this.className||!1===e?"":Q._data(this,"__className__")||"")}))},hasClass:function(e){e=" "+e+" ";for(var t=0,n=this.length;t<n;t++)if(1===this[t].nodeType&&0<=(" "+this[t].className+" ").replace(ve," ").indexOf(e))return!0;return!1},val:function(e){var n,i,o=this[0];if(arguments.length){var r=Q.isFunction(e);return this.each((function(n){var o=Q(this);1===this.nodeType&&(null==(n=r?e.call(this,n,o.val()):e)?n="":"number"==typeof n?n+="":Q.isArray(n)&&(n=Q.map(n,(function(e){return null==e?"":e+""}))),(i=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,n,"value")!==t||(this.value=n))}))}if(o)return(i=Q.valHooks[o.type]||Q.valHooks[o.nodeName.toLowerCase()])&&"get"in i&&(n=i.get(o,"value"))!==t?n:"string"==typeof(n=o.value)?n.replace(be,""):null==n?"":n}}),Q.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n=e.options,i=e.selectedIndex,o=(e="select-one"===e.type||0>i)?null:[],r=e?i+1:n.length,s=0>i?r:e?i:0;s<r;s++)if(!(!(t=n[s]).selected&&s!==i||(Q.support.optDisabled?t.disabled:null!==t.getAttribute("disabled"))||t.parentNode.disabled&&Q.nodeName(t.parentNode,"optgroup"))){if(t=Q(t).val(),e)return t;o.push(t)}return o},set:function(e,t){var n=Q.makeArray(t);return Q(e).find("option").each((function(){this.selected=0<=Q.inArray(Q(this).val(),n)})),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,i){var o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r){if(typeof e.getAttribute===$)return Q.prop(e,n,i);if(r=1!==r||!Q.isXMLDoc(e)){n=n.toLowerCase();var s=Q.attrHooks[n]||(we.test(n)?Se:Te)}if(i===t)return s&&r&&"get"in s&&null!==(o=s.get(e,n))?o:(typeof e.getAttribute!==$&&(o=e.getAttribute(n)),null==o?t:o);if(null!==i)return s&&r&&"set"in s&&(o=s.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i);Q.removeAttr(e,n)}},removeAttr:function(e,t){var n=0,i=t&&t.match(ee);if(i&&1===e.nodeType)for(;t=i[n++];){var o=Q.propFix[t]||t;we.test(t)?!xe&&Ee.test(t)?e[Q.camelCase("default-"+t)]=e[o]=!1:e[o]=!1:Q.attr(e,t,""),e.removeAttribute(xe?t:o)}},attrHooks:{type:{set:function(e,t){if(!Q.support.radioValue&&"radio"===t&&Q.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r){if(1!==r||!Q.isXMLDoc(e)){n=Q.propFix[n]||n;var s=Q.propHooks[n]}return i!==t?s&&"set"in s&&(o=s.set(e,i,n))!==t?o:e[n]=i:s&&"get"in s&&null!==(o=s.get(e,n))?o:e[n]}},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):ye.test(e.nodeName)||_e.test(e.nodeName)&&e.href?0:t}}}});var Se={get:function(e,n){var i=Q.prop(e,n),o="boolean"==typeof i&&e.getAttribute(n);return(e="boolean"==typeof i?Ce&&xe?null!=o:Ee.test(n)?e[Q.camelCase("default-"+n)]:!!o:e.getAttributeNode(n))&&!1!==e.value?n.toLowerCase():t},set:function(e,t,n){return!1===t?Q.removeAttr(e,n):Ce&&xe||!Ee.test(n)?e.setAttribute(!xe&&Q.propFix[n]||n,n):e[Q.camelCase("default-"+n)]=e[n]=!0,n}};if(Ce&&xe||(Q.attrHooks.value={get:function(e,n){return n=e.getAttributeNode(n),Q.nodeName(e,"input")?e.defaultValue:n&&n.specified?n.value:t},set:function(e,t,n){if(!Q.nodeName(e,"input"))return Te&&Te.set(e,t,n);e.defaultValue=t}}),!xe){var Te=Q.valHooks.button={get:function(e,n){return(e=e.getAttributeNode(n))&&("id"===n||"name"===n||"coords"===n?""!==e.value:e.specified)?e.value:t},set:function(e,n,i){var o=e.getAttributeNode(i);return o||e.setAttributeNode(o=e.ownerDocument.createAttribute(i)),o.value=n+="","value"===i||n===e.getAttribute(i)?n:t}};Q.attrHooks.contenteditable={get:Te.get,set:function(e,t,n){Te.set(e,""!==t&&t,n)}},Q.each(["width","height"],(function(e,t){Q.attrHooks[t]=Q.extend(Q.attrHooks[t],{set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}})}))}Q.support.hrefNormalized||(Q.each(["href","src","width","height"],(function(e,n){Q.attrHooks[n]=Q.extend(Q.attrHooks[n],{get:function(e){return null==(e=e.getAttribute(n,2))?t:e}})})),Q.each(["href","src"],(function(e,t){Q.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}))),Q.support.style||(Q.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),Q.support.optSelected||(Q.propHooks.selected=Q.extend(Q.propHooks.selected,{get:function(e){return(e=e.parentNode)&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),Q.support.enctype||(Q.propFix.enctype="encoding"),Q.support.checkOn||Q.each(["radio","checkbox"],(function(){Q.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}})),Q.each(["radio","checkbox"],(function(){Q.valHooks[this]=Q.extend(Q.valHooks[this],{set:function(e,t){if(Q.isArray(t))return e.checked=0<=Q.inArray(Q(e).val(),t)}})}));var Oe=/^(?:input|select|textarea)$/i,Ae=/^key/,Ne=/^(?:mouse|contextmenu)|click/,ke=/^(?:focusinfocus|focusoutblur)$/,Fe=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(e,n,i,o,r){var s,a,l,c,u;if(a=Q._data(e)){if(i.handler){var h=i;i=h.handler,r=h.selector}for(i.guid||(i.guid=Q.guid++),(s=a.events)||(s=a.events={}),(l=a.handle)||(l=a.handle=function(e){return typeof Q===$||e&&Q.event.triggered===e.type?t:Q.event.dispatch.apply(l.elem,arguments)},l.elem=e),a=(n=(n||"").match(ee)||[""]).length;a--;){var d=Fe.exec(n[a])||[],f=c=d[1],p=(d[2]||"").split(".").sort();d=Q.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=Q.event.special[f]||{},c=Q.extend({type:f,origType:c,data:o,handler:i,guid:i.guid,selector:r,needsContext:r&&Q.expr.match.needsContext.test(r),namespace:p.join(".")},h),(u=s[f])||((u=s[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,o,p,l)||(e.addEventListener?e.addEventListener(f,l,!1):e.attachEvent&&e.attachEvent("on"+f,l))),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?u.splice(u.delegateCount++,0,c):u.push(c),Q.event.global[f]=!0}e=null}},remove:function(e,t,n,i,o){var r,s,a,l,c,u=Q.hasData(e)&&Q._data(e);if(u&&(l=u.events)){for(a=(t=(t||"").match(ee)||[""]).length;a--;){var h=Fe.exec(t[a])||[],d=c=h[1],f=(h[2]||"").split(".").sort();if(d){var p=Q.event.special[d]||{},m=l[d=(i?p.delegateType:p.bindType)||d]||[];for(h=h[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=m.length;r--;){var g=m[r];!o&&c!==g.origType||n&&n.guid!==g.guid||h&&!h.test(g.namespace)||i&&i!==g.selector&&("**"!==i||!g.selector)||(m.splice(r,1),g.selector&&m.delegateCount--,p.remove&&p.remove.call(e,g))}s&&!m.length&&(p.teardown&&!1!==p.teardown.call(e,f,u.handle)||Q.removeEvent(e,d,u.handle),delete l[d])}else for(d in l)Q.event.remove(e,d+t[a],n,i,!0)}Q.isEmptyObject(l)&&(delete u.handle,Q._removeData(e,"events"))}},trigger:function(n,i,o,r){var s,a,l=[o||R],c=J.call(n,"type")?n.type:n,u=J.call(n,"namespace")?n.namespace.split("."):[],h=s=o=o||R;if(3!==o.nodeType&&8!==o.nodeType&&!ke.test(c+Q.event.triggered)){0<=c.indexOf(".")&&(u=c.split("."),c=u.shift(),u.sort());var d=0>c.indexOf(":")&&"on"+c;if((n=n[Q.expando]?n:new Q.Event(c,"object"==typeof n&&n)).isTrigger=!0,n.namespace=u.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=o),i=null==i?[n]:Q.makeArray(i,[n]),u=Q.event.special[c]||{},r||!u.trigger||!1!==u.trigger.apply(o,i)){if(!r&&!u.noBubble&&!Q.isWindow(o)){var f=u.delegateType||c;for(ke.test(f+c)||(h=h.parentNode);h;h=h.parentNode)l.push(h),s=h;s===(o.ownerDocument||R)&&l.push(s.defaultView||s.parentWindow||e)}for(a=0;(h=l[a++])&&!n.isPropagationStopped();)n.type=1<a?f:u.bindType||c,(s=(Q._data(h,"events")||{})[n.type]&&Q._data(h,"handle"))&&s.apply(h,i),(s=d&&h[d])&&Q.acceptData(h)&&s.apply&&!1===s.apply(h,i)&&n.preventDefault();if(n.type=c,!(r||n.isDefaultPrevented()||u._default&&!1!==u._default.apply(o.ownerDocument,i)||"click"===c&&Q.nodeName(o,"a"))&&Q.acceptData(o)&&d&&o[c]&&!Q.isWindow(o)){(s=o[d])&&(o[d]=null),Q.event.triggered=c;try{o[c]()}catch(e){}Q.event.triggered=t,s&&(o[d]=s)}return n.result}}},dispatch:function(e){e=Q.event.fix(e);var n,i,o,r=K.call(arguments),s=(Q._data(this,"events")||{})[e.type]||[],a=Q.event.special[e.type]||{};if(r[0]=e,e.delegateTarget=this,!a.preDispatch||!1!==a.preDispatch.call(this,e)){var l=Q.event.handlers.call(this,e,s);for(s=0;(i=l[s++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,o=0;(n=i.handlers[o++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(n.namespace)||(e.handleObj=n,e.data=n.data,(n=((Q.event.special[n.origType]||{}).handle||n.handler).apply(i.elem,r))!==t&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return a.postDispatch&&a.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,o=[],r=n.delegateCount,s=e.target;if(r&&s.nodeType&&(!e.button||"click"!==e.type))for(;s!=this;s=s.parentNode||this)if(1===s.nodeType&&(!0!==s.disabled||"click"!==e.type)){var a=[];for(i=0;i<r;i++){var l=n[i],c=l.selector+" ";a[c]===t&&(a[c]=l.needsContext?0<=Q(c,this).index(s):Q.find(c,this,null,[s]).length),a[c]&&a.push(l)}a.length&&o.push({elem:s,handlers:a})}return r<n.length&&o.push({elem:this,handlers:n.slice(r)}),o},fix:function(e){if(e[Q.expando])return e;var t=e.type,n=e,i=this.fixHooks[t];i||(this.fixHooks[t]=i=Ne.test(t)?this.mouseHooks:Ae.test(t)?this.keyHooks:{});var o=i.props?this.props.concat(i.props):this.props;for(e=new Q.Event(n),t=o.length;t--;){var r=o[t];e[r]=n[r]}return e.target||(e.target=n.srcElement||R),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,n):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i=n.button,o=n.fromElement;if(null==e.pageX&&null!=n.clientX){var r=e.target.ownerDocument||R,s=r.documentElement;r=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)}return!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?n.toElement:o),e.which||i===t||(e.which=1&i?1:2&i?3:4&i?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){if(Q.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==R.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===R.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){e=Q.extend(new Q.Event,n,{type:e,isSimulated:!0,originalEvent:{}}),i?Q.event.trigger(e,null,t):Q.event.dispatch.call(t,e),e.isDefaultPrevented()&&n.preventDefault()}},Q.removeEvent=R.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){t="on"+t,e.detachEvent&&(typeof e[t]===$&&(e[t]=null),e.detachEvent(t,n))},Q.Event=function(e,t){if(!(this instanceof Q.Event))return new Q.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?a:l):this.type=e,t&&Q.extend(this,t),this.timeStamp=e&&e.timeStamp||Q.now(),this[Q.expando]=!0},Q.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=a,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=a,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout"},(function(e,t){Q.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=e.relatedTarget,i=e.handleObj;if(!n||n!==this&&!Q.contains(this,n)){e.type=i.origType;var o=i.handler.apply(this,arguments);e.type=t}return o}}})),Q.support.submitBubbles||(Q.event.special.submit={setup:function(){if(Q.nodeName(this,"form"))return!1;Q.event.add(this,"click._submit keypress._submit",(function(e){e=e.target,(e=Q.nodeName(e,"input")||Q.nodeName(e,"button")?e.form:t)&&!Q._data(e,"submitBubbles")&&(Q.event.add(e,"submit._submit",(function(e){e._submit_bubble=!0})),Q._data(e,"submitBubbles",!0))}))},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Q.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(Q.nodeName(this,"form"))return!1;Q.event.remove(this,"._submit")}}),Q.support.changeBubbles||(Q.event.special.change={setup:function(){if(Oe.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(Q.event.add(this,"propertychange._change",(function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)})),Q.event.add(this,"click._change",(function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Q.event.simulate("change",this,e,!0)}))),!1;Q.event.add(this,"beforeactivate._change",(function(e){e=e.target,Oe.test(e.nodeName)&&!Q._data(e,"changeBubbles")&&(Q.event.add(e,"change._change",(function(e){!this.parentNode||e.isSimulated||e.isTrigger||Q.event.simulate("change",this.parentNode,e,!0)})),Q._data(e,"changeBubbles",!0))}))},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return Q.event.remove(this,"._change"),!Oe.test(this.nodeName)}}),Q.support.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=0,i=function(e){Q.event.simulate(t,e.target,Q.event.fix(e),!0)};Q.event.special[t]={setup:function(){0==n++&&R.addEventListener(e,i,!0)},teardown:function(){0==--n&&R.removeEventListener(e,i,!0)}}})),Q.fn.extend({on:function(e,n,i,o,r){var s;if("object"==typeof e){for(s in"string"!=typeof n&&(i=i||n,n=t),e)this.on(s,n,i,e[s],r);return this}if(null==i&&null==o?(o=n,i=n=t):null==o&&("string"==typeof n?(o=i,i=t):(o=i,i=n,n=t)),!1===o)o=l;else if(!o)return this;if(1===r){var a=o;o=function(e){return Q().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=Q.guid++)}return this.each((function(){Q.event.add(this,e,o,i,n)}))},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){if(e&&e.preventDefault&&e.handleObj){var o=e.handleObj;return Q(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this}if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return!1!==n&&"function"!=typeof n||(i=n,n=t),!1===i&&(i=l),this.each((function(){Q.event.remove(this,e,i,n)}))},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each((function(){Q.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return Q.event.trigger(e,t,n,!0)}}),function(e,t){function n(){var e,t=[];return e=function(n,i){return t.push(n+=" ")>de.cacheLength&&delete e[t.shift()],e[n]=i}}function i(e){return e[F]=!0,e}function o(e){var t=x.createElement("div");try{return e(t)}catch(e){return!1}}function r(e,t,n,i){var o,r,s,a,l;if((t?t.ownerDocument||t:j)!==x&&ue(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=(t=t||x).nodeType)&&9!==a)return[];if(!S&&!i){if(o=ne.exec(e))if(s=o[1]){if(9===a){if(!(r=t.getElementById(s))||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(s))&&N(t,r)&&r.id===s)return n.push(r),n}else{if(o[2])return B.apply(n,U.call(t.getElementsByTagName(e),0)),n;if((s=o[3])&&P.getByClassName&&t.getElementsByClassName)return B.apply(n,U.call(t.getElementsByClassName(s),0)),n}if(P.qsa&&!T.test(e)){o=!0,r=F,s=t;var c=9===a&&e;if(1===a&&"object"!==t.nodeName.toLowerCase()){for(a=u(e),(o=t.getAttribute("id"))?r=o.replace(re,"\\$&"):t.setAttribute("id",r),r="[id='"+r+"'] ",s=a.length;s--;)a[s]=r+h(a[s]);s=ee.test(e)&&t.parentNode||t,c=a.join(",")}if(c)try{return B.apply(n,U.call(s.querySelectorAll(c),0)),n}catch(e){}finally{o||t.removeAttribute("id")}}}e:{if(r=u(e=e.replace(K,"$1")),!i&&1===r.length){if(2<(o=r[0]=r[0].slice(0)).length&&"ID"===(l=o[0]).type&&9===t.nodeType&&!S&&de.relative[o[1].type]){if(!(t=de.find.ID(l.matches[0].replace(ae,le),t)[0])){l=n;break e}e=e.slice(o.shift().value.length)}for(a=Z.needsContext.test(e)?0:o.length;a--&&(l=o[a],!de.relative[s=l.type]);)if((s=de.find[s])&&(i=s(l.matches[0].replace(ae,le),ee.test(o[0].type)&&t.parentNode||t))){if(o.splice(a,1),!(e=i.length&&h(o))){B.apply(n,U.call(i,0)),l=n;break e}break}}fe(e,r)(i,t,S,n,ee.test(e)),l=n}return l}function s(e,t){var n=t&&e,i=n&&(~t.sourceIndex||-2147483648)-(~e.sourceIndex||-2147483648);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i((function(t){return t=+t,i((function(n,i){for(var o,r=e([],n.length,t),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))}))}))}function u(e,t){var n,i,o,s,a;if(s=D[e+" "])return t?0:s.slice(0);s=e;var l=[];for(a=de.preFilter;s;){c&&!(n=G.exec(s))||(n&&(s=s.slice(n[0].length)||s),l.push(i=[]));var c=!1;for(o in(n=X.exec(s))&&(c=n.shift(),i.push({value:c,type:n[0].replace(K," ")}),s=s.slice(c.length)),de.filter)!(n=Z[o].exec(s))||a[o]&&!(n=a[o](n))||(c=n.shift(),i.push({value:c,type:o,matches:n}),s=s.slice(c.length));if(!c)break}return t?s.length:s?r.error(e):D(e,l).slice(0)}function h(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function d(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=I++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var a,l,c=L+" "+r;if(s){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||o){var u=t[F]||(t[F]={});if((l=u[i])&&l[0]===c){if(!0===(a=l[1])||a===_)return!0===a}else if((l=u[i]=[c])[1]=e(t,n,s)||_,!0===l[1])return!0}}}function f(e){return 1<e.length?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function p(e,t,n,i,o){for(var r,s=[],a=0,l=e.length,c=null!=t;a<l;a++)(r=e[a])&&(n&&!n(r,i,o)||(s.push(r),c&&t.push(a)));return s}function m(e,t,n,o,s,a){return o&&!o[F]&&(o=m(o)),s&&!s[F]&&(s=m(s,a)),i((function(i,a,l,c){var u,h,d=[],f=[],m=a.length;if(!(h=i)){h=t||"*";for(var g=l.nodeType?[l]:l,v=[],b=0,y=g.length;b<y;b++)r(h,g[b],v);h=v}if(h=!e||!i&&t?h:p(h,d,e,l,c),g=n?s||(i?e:m||o)?[]:a:h,n&&n(h,g,l,c),o){var _=p(g,f);for(o(_,[],l,c),l=_.length;l--;)(u=_[l])&&(g[f[l]]=!(h[f[l]]=u))}if(i){if(s||e){if(s){for(_=[],l=g.length;l--;)(u=g[l])&&_.push(h[l]=u);s(null,g=[],_,c)}for(l=g.length;l--;)(u=g[l])&&-1<(_=s?z.call(i,u):d[l])&&(i[_]=!(a[_]=u))}}else g=p(g===a?g.splice(m,g.length):g),s?s(null,a,g,c):B.apply(a,g)}))}function g(e){for(var t,n,i=e.length,o=de.relative[e[0].type],r=o||de.relative[" "],s=o?1:0,a=d((function(e){return e===t}),r,!0),l=d((function(e){return-1<z.call(t,e)}),r,!0),c=[function(e,n,i){return!o&&(i||n!==E)||((t=n).nodeType?a(e,n,i):l(e,n,i))}];s<i;s++)if(r=de.relative[e[s].type])c=[d(f(c),r)];else{if((r=de.filter[e[s].type].apply(null,e[s].matches))[F]){for(n=++s;n<i&&!de.relative[e[n].type];n++);return m(1<s&&f(c),1<s&&h(e.slice(0,s-1)).replace(K,"$1"),r,s<n&&g(e.slice(s,n)),n<i&&g(e=e.slice(n)),n<i&&h(e))}c.push(r)}return f(c)}function v(e,t){var n=0,o=0<t.length,s=0<e.length,a=function(i,a,l,c,u){var h,d,f=[],m=0,g="0",v=i&&[],b=null!=u,y=E,w=i||s&&de.find.TAG("*",u&&a.parentNode||a),C=L+=null==y?1:Math.random()||.1;for(b&&(E=a!==x&&a,_=n);null!=(u=w[g]);g++){if(s&&u){for(h=0;d=e[h++];)if(d(u,a,l)){c.push(u);break}b&&(L=C,_=++n)}o&&((u=!d&&u)&&m--,i&&v.push(u))}if(m+=g,o&&g!==m){for(h=0;d=t[h++];)d(v,f,a,l);if(i){if(0<m)for(;g--;)v[g]||f[g]||(f[g]=W.call(c));f=p(f)}B.apply(c,f),b&&!i&&0<f.length&&1<m+t.length&&r.uniqueSort(c)}return b&&(L=C,E=y),v};return o?i(a):a}function b(){}var y,_,w,E,x,C,S,T,O,A,N,k,F="sizzle"+-new Date,j=e.document,P={},L=0,I=0,M=n(),D=n(),$=n(),R=typeof t,H=[],W=H.pop,B=H.push,U=H.slice,z=H.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},q="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+(H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"))+")|)|)[\\x20\\t\\r\\n\\f]*\\]",V=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+q.replace(3,8)+")*)|.*)\\)|)",K=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,G=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,X=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,J=new RegExp(V),Y=new RegExp("^"+H+"$"),Z={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[\w-]|[^\x00-\xa0])+)['"]?\]/,TAG:new RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+V),CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},ee=/[\x20\t\r\n\f]*[+~]/,te=/^[^{]+\{\s*\[native code/,ne=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ie=/^(?:input|select|textarea|button)$/i,oe=/^h\d$/i,re=/'|\\/g,se=/=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,ae=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,le=function(e,t){return(e="0x"+t-65536)!=e?t:0>e?String.fromCharCode(e+65536):String.fromCharCode(e>>10|55296,1023&e|56320)};try{U.call(j.documentElement.childNodes,0)[0].nodeType}catch(e){U=function(e){for(var t,n=[];t=this[e++];)n.push(t);return n}}var ce=r.isXML=function(e){return!!(e=e&&(e.ownerDocument||e).documentElement)&&"HTML"!==e.nodeName},ue=r.setDocument=function(e){var n=e?e.ownerDocument||e:j;return n!==x&&9===n.nodeType&&n.documentElement?(x=n,C=n.documentElement,S=ce(n),P.tagNameNoComments=o((function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length})),P.attributes=o((function(e){return e.innerHTML="<select></select>","boolean"!==(e=typeof e.lastChild.getAttribute("multiple"))&&"string"!==e})),P.getByClassName=o((function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||!e.getElementsByClassName("e").length)&&(e.lastChild.className="e",2===e.getElementsByClassName("e").length)})),P.getByName=o((function(e){e.id=F+0,e.innerHTML="<a name='"+F+"'></a><div name='"+F+"'></div>",C.insertBefore(e,C.firstChild);var t=n.getElementsByName&&n.getElementsByName(F).length===2+n.getElementsByName(F+0).length;return P.getIdNotName=!n.getElementById(F),C.removeChild(e),t})),de.attrHandle=o((function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==R&&"#"===e.firstChild.getAttribute("href")}))?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},P.getIdNotName?(de.find.ID=function(e,t){if(typeof t.getElementById!==R&&!S)return(e=t.getElementById(e))&&e.parentNode?[e]:[]},de.filter.ID=function(e){var t=e.replace(ae,le);return function(e){return e.getAttribute("id")===t}}):(de.find.ID=function(e,n){if(typeof n.getElementById!==R&&!S)return(n=n.getElementById(e))?n.id===e||typeof n.getAttributeNode!==R&&n.getAttributeNode("id").value===e?[n]:t:[]},de.filter.ID=function(e){var t=e.replace(ae,le);return function(e){return(e=typeof e.getAttributeNode!==R&&e.getAttributeNode("id"))&&e.value===t}}),de.find.TAG=P.tagNameNoComments?function(e,t){if(typeof t.getElementsByTagName!==R)return t.getElementsByTagName(e)}:function(e,t){var n=[],i=0;if(t=t.getElementsByTagName(e),"*"===e){for(;e=t[i++];)1===e.nodeType&&n.push(e);return n}return t},de.find.NAME=P.getByName&&function(e,t){if(typeof t.getElementsByName!==R)return t.getElementsByName(name)},de.find.CLASS=P.getByClassName&&function(e,t){if(typeof t.getElementsByClassName!==R&&!S)return t.getElementsByClassName(e)},O=[],T=[":focus"],(P.qsa=te.test(n.querySelectorAll+""))&&(o((function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||T.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||T.push(":checked")})),o((function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&T.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||T.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),T.push(",.*:")}))),(P.matchesSelector=te.test((A=C.matchesSelector||C.mozMatchesSelector||C.webkitMatchesSelector||C.oMatchesSelector||C.msMatchesSelector)+""))&&o((function(e){P.disconnectedMatch=A.call(e,"div"),A.call(e,"[s!='']:x"),O.push("!=",V)})),T=new RegExp(T.join("|")),O=new RegExp(O.join("|")),N=te.test(C.contains+"")||C.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e;return e===(t=t&&t.parentNode)||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=C.compareDocumentPosition?function(e,t){var i;return e===t?(w=!0,0):(i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&i||e.parentNode&&11===e.parentNode.nodeType?e===n||N(j,e)?-1:t===n||N(j,t)?1:0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var i=0,o=e.parentNode,r=t.parentNode,a=[e],l=[t];if(e===t)return w=!0,0;if(!o||!r)return e===n?-1:t===n?1:o?-1:r?1:0;if(o===r)return s(e,t);for(;e=e.parentNode;)a.unshift(e);for(e=t;e=e.parentNode;)l.unshift(e);for(;a[i]===l[i];)i++;return i?s(a[i],l[i]):a[i]===j?-1:l[i]===j?1:0},w=!1,[0,0].sort(k),P.detectDuplicates=w,x):x};r.matches=function(e,t){return r(e,null,null,t)},r.matchesSelector=function(e,t){if((e.ownerDocument||e)!==x&&ue(e),t=t.replace(se,"='$1']"),!(!P.matchesSelector||S||O&&O.test(t)||T.test(t)))try{var n=A.call(e,t);if(n||P.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<r(t,x,null,[e]).length},r.contains=function(e,t){return(e.ownerDocument||e)!==x&&ue(e),N(e,t)},r.attr=function(e,t){var n;return(e.ownerDocument||e)!==x&&ue(e),S||(t=t.toLowerCase()),(n=de.attrHandle[t])?n(e):S||P.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&!0===e[t]?t:n&&n.specified?n.value:null},r.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},r.uniqueSort=function(e){var t,n=[],i=1,o=0;if(w=!P.detectDuplicates,e.sort(k),w){for(;t=e[i];i++)t===e[i-1]&&(o=n.push(i));for(;o--;)e.splice(n[o],1)}return e};var he=r.getText=function(e){var t="",n=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)t+=he(e)}else if(3===i||4===i)return e.nodeValue}else for(;i=e[n];n++)t+=he(i);return t},de=r.selectors={cacheLength:50,createPseudo:i,match:Z,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ae,le),e[3]=(e[4]||e[5]||"").replace(ae,le),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||r.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&r.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return Z.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&J.test(n)&&(t=u(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(ae,le).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=M[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"([\\x20\\t\\r\\n\\f]|$)"),M(e,(function(e){return t.test(e.className||typeof e.getAttribute!==R&&e.getAttribute("class")||"")})))},ATTR:function(e,t,n){return function(i){return null==(i=r.attr(i,e))?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&-1<i.indexOf(n):"$="===t?n&&i.slice(-n.length)===n:"~="===t?-1<(" "+i+" ").indexOf(n):"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c;n=r!==s?"nextSibling":"previousSibling";var u=t.parentNode,h=a&&t.nodeName.toLowerCase();if(l=!l&&!a,u){if(r){for(;n;){for(c=t;c=c[n];)if(a?c.nodeName.toLowerCase()===h:1===c.nodeType)return!1;var d=n="only"===e&&!d&&"nextSibling"}return!0}if(d=[s?u.firstChild:u.lastChild],s&&l){var f=(l=u[F]||(u[F]={}))[e]||[],p=f[0]===L&&f[1],m=f[0]===L&&f[2];for(c=p&&u.childNodes[p];c=++p&&c&&c[n]||(m=p=0)||d.pop();)if(1===c.nodeType&&++m&&c===t){l[e]=[L,p,m];break}}else if(l&&(f=(t[F]||(t[F]={}))[e])&&f[0]===L)m=f[1];else for(;(c=++p&&c&&c[n]||(m=p=0)||d.pop())&&((a?c.nodeName.toLowerCase()!==h:1!==c.nodeType)||!++m||(l&&((c[F]||(c[F]={}))[e]=[L,m]),c!==t)););return(m-=o)===i||0==m%i&&0<=m/i}}},PSEUDO:function(e,t){var n=de.pseudos[e]||de.setFilters[e.toLowerCase()]||r.error("unsupported pseudo: "+e);if(n[F])return n(t);if(1<n.length){var o=[e,e,"",t];return de.setFilters.hasOwnProperty(e.toLowerCase())?i((function(e,i){for(var o,r=n(e,t),s=r.length;s--;)e[o=z.call(e,r[s])]=!(i[o]=r[s])})):function(e){return n(e,0,o)}}return n}},pseudos:{not:i((function(e){var t=[],n=[],o=fe(e.replace(K,"$1"));return o[F]?i((function(e,t,n,i){i=o(e,null,i,[]);for(var r=e.length;r--;)(n=i[r])&&(e[r]=!(t[r]=n))})):function(e,i,r){return t[0]=e,o(t,null,r,n),!n.pop()}})),has:i((function(e){return function(t){return 0<r(e,t).length}})),contains:i((function(e){return function(t){return-1<(t.textContent||t.innerText||he(t)).indexOf(e)}})),lang:i((function(e){return Y.test(e||"")||r.error("unsupported lang: "+e),e=e.replace(ae,le).toLowerCase(),function(t){var n;do{if(n=S?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===C},focus:function(e){return e===x.activeElement&&(!x.hasFocus||x.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if("@"<e.nodeName||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!de.pseudos.empty(e)},header:function(e){return oe.test(e.nodeName)},input:function(e){return ie.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:c((function(){return[0]})),last:c((function(e,t){return[t-1]})),eq:c((function(e,t,n){return[0>n?n+t:n]})),even:c((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:c((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:c((function(e,t,n){for(t=0>n?n+t:n;0<=--t;)e.push(t);return e})),gt:c((function(e,t,n){for(n=0>n?n+t:n;++n<t;)e.push(n);return e}))}};for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})de.pseudos[y]=a(y);for(y in{submit:!0,reset:!0})de.pseudos[y]=l(y);var fe=r.compile=function(e,t){var n,i=[],o=[],r=$[e+" "];if(!r){for(t||(t=u(e)),n=t.length;n--;)(r=g(t[n]))[F]?i.push(r):o.push(r);r=$(e,v(o,i))}return r};de.pseudos.nth=de.pseudos.eq,de.filters=b.prototype=de.pseudos,de.setFilters=new b,ue(),r.attr=Q.attr,Q.find=r,Q.expr=r.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=r.uniqueSort,Q.text=r.getText,Q.isXMLDoc=r.isXML,Q.contains=r.contains}(e);var je=/Until$/,Pe=/^(?:parents|prev(?:Until|All))/,Le=/^.[^:#\[\.,]*$/,Ie=Q.expr.match.needsContext,Me={children:!0,contents:!0,next:!0,prev:!0};Q.fn.extend({find:function(e){var t,n=this.length;if("string"!=typeof e){var i=this;return this.pushStack(Q(e).filter((function(){for(t=0;t<n;t++)if(Q.contains(i[t],this))return!0})))}var o=[];for(t=0;t<n;t++)Q.find(e,this[t],o);return(o=this.pushStack(1<n?Q.unique(o):o)).selector=(this.selector?this.selector+" ":"")+e,o},has:function(e){var t,n=Q(e,this),i=n.length;return this.filter((function(){for(t=0;t<i;t++)if(Q.contains(this,n[t]))return!0}))},not:function(e){return this.pushStack(u(this,e,!1))},filter:function(e){return this.pushStack(u(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?Ie.test(e)?0<=Q(e,this.context).index(this[0]):0<Q.filter(e,this).length:0<this.filter(e).length)},closest:function(e,t){for(var n,i=0,o=this.length,r=[],s=Ie.test(e)||"string"!=typeof e?Q(e,t||this.context):0;i<o;i++)for(n=this[i];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(s?-1<s.index(n):Q.find.matchesSelector(n,e)){r.push(n);break}n=n.parentNode}return this.pushStack(1<r.length?Q.unique(r):r)},index:function(e){return e?"string"==typeof e?Q.inArray(this[0],Q(e)):Q.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return e="string"==typeof e?Q(e,t):Q.makeArray(e&&e.nodeType?[e]:e),e=Q.merge(this.get(),e),this.pushStack(Q.unique(e))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Q.fn.andSelf=Q.fn.addBack,Q.each({parent:function(e){return(e=e.parentNode)&&11!==e.nodeType?e:null},parents:function(e){return Q.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Q.dir(e,"parentNode",n)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")},nextAll:function(e){return Q.dir(e,"nextSibling")},prevAll:function(e){return Q.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Q.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Q.dir(e,"previousSibling",n)},siblings:function(e){return Q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Q.sibling(e.firstChild)},contents:function(e){return Q.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Q.merge([],e.childNodes)}},(function(e,t){Q.fn[e]=function(n,i){var o=Q.map(this,t,n);return je.test(e)||(i=n),i&&"string"==typeof i&&(o=Q.filter(i,o)),o=1<this.length&&!Me[e]?Q.unique(o):o,1<this.length&&Pe.test(e)&&(o=o.reverse()),this.pushStack(o)}})),Q.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?Q.find.matchesSelector(t[0],e)?[t[0]]:[]:Q.find.matches(e,t)},dir:function(e,n,i){var o=[];for(e=e[n];e&&9!==e.nodeType&&(i===t||1!==e.nodeType||!Q(e).is(i));)1===e.nodeType&&o.push(e),e=e[n];return o},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var De="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",$e=/ jQuery\d+="(?:null|\d+)"/g,Re=new RegExp("<(?:"+De+")[\\s/>]","i"),He=/^\s+/,We=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Be=/<([\w:]+)/,Ue=/<tbody/i,ze=/<|&#?\w+;/,qe=/<(?:script|style|link)/i,Ve=/^(?:checkbox|radio)$/i,Ke=/checked\s*(?:[^=]|=\s*.checked.)/i,Ge=/^$|\/(?:java|ecma)script/i,Xe=/^true\/(.*)/,Je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ye={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:Q.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Qe=h(R).appendChild(R.createElement("div"));Ye.optgroup=Ye.option,Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,Q.fn.extend({text:function(e){return Q.access(this,(function(e){return e===t?Q.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(e))}),null,e,arguments.length)},wrapAll:function(e){if(Q.isFunction(e))return this.each((function(t){Q(this).wrapAll(e.call(this,t))}));if(this[0]){var t=Q(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e})).append(this)}return this},wrapInner:function(e){return Q.isFunction(e)?this.each((function(t){Q(this).wrapInner(e.call(this,t))})):this.each((function(){var t=Q(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=Q.isFunction(e);return this.each((function(n){Q(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(){return this.parent().each((function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)})).end()},append:function(){return this.domManip(arguments,!0,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.appendChild(e)}))},prepend:function(){return this.domManip(arguments,!0,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.insertBefore(e,this.firstChild)}))},before:function(){return this.domManip(arguments,!1,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return this.domManip(arguments,!1,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||0<Q.filter(e,[n]).length)&&(t||1!==n.nodeType||Q.cleanData(v(n)),n.parentNode&&(t&&Q.contains(n.ownerDocument,n)&&m(v(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&Q.cleanData(v(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&Q.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return Q.clone(this,e,t)}))},html:function(e){return Q.access(this,(function(e){var n=this[0]||{},i=0,o=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace($e,""):t;if(!("string"!=typeof e||qe.test(e)||!Q.support.htmlSerialize&&Re.test(e)||!Q.support.leadingWhitespace&&He.test(e)||Ye[(Be.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(We,"<$1></$2>");try{for(;i<o;i++)1===(n=this[i]||{}).nodeType&&(Q.cleanData(v(n,!1)),n.innerHTML=e);n=0}catch(e){}}n&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(e){return Q.isFunction(e)||"string"==typeof e||(e=Q(e).not(this).detach()),this.domManip([e],!0,(function(e){var t=this.nextSibling,n=this.parentNode;n&&(Q(this).remove(),n.insertBefore(e,t))}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){e=q.apply([],e);var o,r=0,s=this.length,a=this,l=s-1,c=e[0],u=Q.isFunction(c);if(u||!(1>=s||"string"!=typeof c||Q.support.checkClone)&&Ke.test(c))return this.each((function(o){var r=a.eq(o);u&&(e[0]=c.call(this,o,n?r.html():t)),r.domManip(e,n,i)}));if(s){var h=Q.buildFragment(e,this[0].ownerDocument,!1,this),m=h.firstChild;if(1===h.childNodes.length&&(h=m),m){n=n&&Q.nodeName(m,"tr");var g=Q.map(v(h,"script"),f);for(o=g.length;r<s;r++)m=h,r!==l&&(m=Q.clone(m,!0,!0),o&&Q.merge(g,v(m,"script"))),i.call(n&&Q.nodeName(this[r],"table")?d(this[r],"tbody"):this[r],m,r);if(o)for(h=g[g.length-1].ownerDocument,Q.map(g,p),r=0;r<o;r++)m=g[r],Ge.test(m.type||"")&&!Q._data(m,"globalEval")&&Q.contains(h,m)&&(m.src?Q.ajax({url:m.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):Q.globalEval((m.text||m.textContent||m.innerHTML||"").replace(Je,"")));h=m=null}}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){Q.fn[e]=function(e){for(var n=0,i=[],o=Q(e),r=o.length-1;n<=r;n++)e=n===r?this:this.clone(!0),Q(o[n])[t](e),V.apply(i,e.get());return this.pushStack(i)}})),Q.extend({clone:function(e,t,n){var i,o,r=Q.contains(e.ownerDocument,e);if(Q.support.html5Clone||Q.isXMLDoc(e)||!Re.test("<"+e.nodeName+">"))var s=e.cloneNode(!0);else Qe.innerHTML=e.outerHTML,Qe.removeChild(s=Qe.firstChild);if(!(Q.support.noCloneEvent&&Q.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Q.isXMLDoc(e))){var a=v(s),l=v(e);for(o=0;null!=(i=l[o]);++o)if(a[o]){var c=void 0,u=i,h=a[o];if(1===h.nodeType){var d=h.nodeName.toLowerCase();if(!Q.support.noCloneEvent&&h[Q.expando]){for(c in(i=Q._data(h)).events)Q.removeEvent(h,c,i.handle);h.removeAttribute(Q.expando)}"script"===d&&h.text!==u.text?(f(h).text=u.text,p(h)):"object"===d?(h.parentNode&&(h.outerHTML=u.outerHTML),Q.support.html5Clone&&u.innerHTML&&!Q.trim(h.innerHTML)&&(h.innerHTML=u.innerHTML)):"input"===d&&Ve.test(u.type)?(h.defaultChecked=h.checked=u.checked,h.value!==u.value&&(h.value=u.value)):"option"===d?h.defaultSelected=h.selected=u.defaultSelected:"input"!==d&&"textarea"!==d||(h.defaultValue=u.defaultValue)}}}if(t)if(n)for(l=l||v(e),a=a||v(s),o=0;null!=(i=l[o]);o++)g(i,a[o]);else g(e,s);return 0<(a=v(s,"script")).length&&m(a,!r&&v(e,"script")),s},buildFragment:function(e,t,n,i){for(var o,r,s,a,l,c,u=e.length,d=h(t),f=[],p=0;p<u;p++)if((r=e[p])||0===r)if("object"===Q.type(r))Q.merge(f,r.nodeType?[r]:r);else if(ze.test(r)){for(s=s||d.appendChild(t.createElement("div")),a=(Be.exec(r)||["",""])[1].toLowerCase(),c=Ye[a]||Ye._default,s.innerHTML=c[1]+r.replace(We,"<$1></$2>")+c[2],o=c[0];o--;)s=s.lastChild;if(!Q.support.leadingWhitespace&&He.test(r)&&f.push(t.createTextNode(He.exec(r)[0])),!Q.support.tbody)for(o=(r="table"!==a||Ue.test(r)?"<table>"!==c[1]||Ue.test(r)?0:s:s.firstChild)&&r.childNodes.length;o--;)Q.nodeName(l=r.childNodes[o],"tbody")&&!l.childNodes.length&&r.removeChild(l);for(Q.merge(f,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=d.lastChild}else f.push(t.createTextNode(r));for(s&&d.removeChild(s),Q.support.appendChecked||Q.grep(v(f,"input"),b),p=0;r=f[p++];)if((!i||-1===Q.inArray(r,i))&&(e=Q.contains(r.ownerDocument,r),s=v(d.appendChild(r),"script"),e&&m(s),n))for(o=0;r=s[o++];)Ge.test(r.type||"")&&n.push(r);return d},cleanData:function(e,t){for(var n,i,o,r,s=0,a=Q.expando,l=Q.cache,c=Q.support.deleteExpando,u=Q.event.special;null!=(n=e[s]);s++)if((t||Q.acceptData(n))&&(r=(o=n[a])&&l[o])){if(r.events)for(i in r.events)u[i]?Q.event.remove(n,i):Q.removeEvent(n,i,r.handle);l[o]&&(delete l[o],c?delete n[a]:typeof n.removeAttribute!==$?n.removeAttribute(a):n[a]=null,z.push(o))}}});var Ze,et=/alpha\([^)]*\)/i,tt=/opacity\s*=\s*([^)]*)/,nt=/^(top|right|bottom|left)$/,it=/^(none|table(?!-c[ea]).+)/,ot=/^margin/,rt=new RegExp("^("+Z+")(.*)$","i"),st=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),at=new RegExp("^([+-])=("+Z+")","i"),lt={BODY:"block"},ct={position:"absolute",visibility:"hidden",display:"block"},ut={letterSpacing:0,fontWeight:400},ht=["Top","Right","Bottom","Left"],dt=["Webkit","O","Moz","ms"];if(Q.fn.extend({css:function(e,n){return Q.access(this,(function(e,n,i){var o={},r=0;if(Q.isArray(n)){var s=ft(e);for(i=n.length;r<i;r++)o[n[r]]=Q.css(e,n[r],!1,s);return o}return i!==t?Q.style(e,n,i):Q.css(e,n)}),e,n,1<arguments.length)},show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(e){var t="boolean"==typeof e;return this.each((function(){(t?e:_(this))?Q(this).show():Q(this).hide()}))}}),Q.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(e=pt(e,"opacity"))?"1":e}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:Q.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s=Q.camelCase(n),a=e.style;n=Q.cssProps[s]||(Q.cssProps[s]=y(a,s));var l=Q.cssHooks[n]||Q.cssHooks[s];if(i===t)return l&&"get"in l&&(r=l.get(e,!1,o))!==t?r:a[n];var c=typeof i;if("string"===c&&(r=at.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(Q.css(e,n)),c="number"),!(null==i||"number"===c&&isNaN(i)||("number"!==c||Q.cssNumber[s]||(i+="px"),Q.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(a[n]="inherit"),l&&"set"in l&&(i=l.set(e,i,o))===t)))try{a[n]=i}catch(e){}}},css:function(e,n,i,o){var r,s=Q.camelCase(n);return n=Q.cssProps[s]||(Q.cssProps[s]=y(e.style,s)),(s=Q.cssHooks[n]||Q.cssHooks[s])&&"get"in s&&(r=s.get(e,!0,i)),r===t&&(r=pt(e,n,o)),"normal"===r&&n in ut&&(r=ut[n]),""===i||i?(e=parseFloat(r),!0===i||Q.isNumeric(e)?e||0:r):r},swap:function(e,t,n,i){var o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];for(o in n=n.apply(e,i||[]),t)e.style[o]=r[o];return n}}),e.getComputedStyle)var ft=function(t){return e.getComputedStyle(t,null)},pt=function(e,n,i){var o=(i=i||ft(e))?i.getPropertyValue(n)||i[n]:t,r=e.style;if(i&&(""!==o||Q.contains(e.ownerDocument,e)||(o=Q.style(e,n)),st.test(o)&&ot.test(n))){e=r.width,n=r.minWidth;var s=r.maxWidth;r.minWidth=r.maxWidth=r.width=o,o=i.width,r.width=e,r.minWidth=n,r.maxWidth=s}return o};else R.documentElement.currentStyle&&(ft=function(e){return e.currentStyle},pt=function(e,n,i){var o,r,s=(i=i||ft(e))?i[n]:t,a=e.style;return null==s&&a&&a[n]&&(s=a[n]),st.test(s)&&!nt.test(n)&&(i=a.left,(r=(o=e.runtimeStyle)&&o.left)&&(o.left=e.currentStyle.left),a.left="fontSize"===n?"1em":s,s=a.pixelLeft+"px",a.left=i,r&&(o.left=r)),""===s?"auto":s});Q.each(["height","width"],(function(e,t){Q.cssHooks[t]={get:function(e,n,i){if(n)return 0===e.offsetWidth&&it.test(Q.css(e,"display"))?Q.swap(e,ct,(function(){return C(e,t,i)})):C(e,t,i)},set:function(e,n,i){var o=i&&ft(e);return E(e,n,i?x(e,t,i,Q.support.boxSizing&&"border-box"===Q.css(e,"boxSizing",!1,o),o):0)}}})),Q.support.opacity||(Q.cssHooks.opacity={get:function(e,t){return tt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style;e=e.currentStyle;var i=Q.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=e&&e.filter||n.filter||"";n.zoom=1,(1<=t||""===t)&&""===Q.trim(o.replace(et,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||e&&!e.filter)||(n.filter=et.test(o)?o.replace(et,i):o+" "+i)}}),Q((function(){Q.support.reliableMarginRight||(Q.cssHooks.marginRight={get:function(e,t){if(t)return Q.swap(e,{display:"inline-block"},pt,[e,"marginRight"])}}),!Q.support.pixelPosition&&Q.fn.position&&Q.each(["top","left"],(function(e,t){Q.cssHooks[t]={get:function(e,n){if(n)return n=pt(e,t),st.test(n)?Q(e).position()[t]+"px":n}}}))})),Q.expr&&Q.expr.filters&&(Q.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!Q.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||Q.css(e,"display"))},Q.expr.filters.visible=function(e){return!Q.expr.filters.hidden(e)}),Q.each({margin:"",padding:"",border:"Width"},(function(e,t){Q.cssHooks[e+t]={expand:function(n){var i=0,o={};for(n="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+ht[i]+t]=n[i]||n[i-2]||n[0];return o}},ot.test(e)||(Q.cssHooks[e+t].set=E)}));var mt=/%20/g,gt=/\[\]$/,vt=/\r?\n/g,bt=/^(?:submit|button|image|reset|file)$/i,yt=/^(?:input|select|textarea|keygen)/i;Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=Q.prop(this,"elements");return e?Q.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!Q(this).is(":disabled")&&yt.test(this.nodeName)&&!bt.test(e)&&(this.checked||!Ve.test(e))})).map((function(e,t){return null==(e=Q(this).val())?null:Q.isArray(e)?Q.map(e,(function(e){return{name:t.name,value:e.replace(vt,"\r\n")}})):{name:t.name,value:e.replace(vt,"\r\n")}})).get()}}),Q.param=function(e,n){var i,o=[],r=function(e,t){t=Q.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(e)||e.jquery&&!Q.isPlainObject(e))Q.each(e,(function(){r(this.name,this.value)}));else for(i in e)O(i,e[i],n,r);return o.join("&").replace(mt,"+")},Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){Q.fn[t]=function(e,n){return 0<arguments.length?this.on(t,null,e,n):this.trigger(t)}})),Q.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var _t=Q.now(),wt=/\?/,Et=/#.*$/,xt=/([?&])_=[^&]*/,Ct=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,St=/^(?:GET|HEAD)$/,Tt=/^\/\//,Ot=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,At=Q.fn.load,Nt={},kt={},Ft="*/".concat("*");try{var jt=H.href}catch(e){(jt=R.createElement("a")).href="",jt=jt.href}var Pt=Ot.exec(jt.toLowerCase())||[];Q.fn.load=function(e,n,i){if("string"!=typeof e&&At)return At.apply(this,arguments);var o,r,s=this,a=e.indexOf(" ");if(0<=a){var l=e.slice(a,e.length);e=e.slice(0,a)}return Q.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(r="POST"),0<s.length&&Q.ajax({url:e,type:r,dataType:"html",data:n}).done((function(e){o=arguments,s.html(l?Q("<div>").append(Q.parseHTML(e)).find(l):e)})).complete(i&&function(e,t){s.each(i,o||[e.responseText,t,e])}),this},Q.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),(function(e,t){Q.fn[t]=function(e){return this.on(t,e)}})),Q.each(["get","post"],(function(e,n){Q[n]=function(e,i,o,r){return Q.isFunction(i)&&(r=r||o,o=i,i=t),Q.ajax({url:e,type:n,dataType:r,data:i,success:o})}})),Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Pt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?k(k(e,Q.ajaxSettings),t):k(Q.ajaxSettings,e)},ajaxPrefilter:A(Nt),ajaxTransport:A(kt),ajax:function(e,n){function i(e,n,i,o){var c=n;if(2!==b){if(b=2,s&&clearTimeout(s),l=t,r=o||"",_.readyState=0<e?4:0,i){var g=u;o=_;var v,y,E,x=g.contents,C=g.dataTypes,S=g.responseFields;for(E in S)E in i&&(o[S[E]]=i[E]);for(;"*"===C[0];)C.shift(),y===t&&(y=g.mimeType||o.getResponseHeader("Content-Type"));if(y)for(E in x)if(x[E]&&x[E].test(y)){C.unshift(E);break}if(C[0]in i)var T=C[0];else{for(E in i){if(!C[0]||g.converters[E+" "+C[0]]){T=E;break}v||(v=E)}T=T||v}T?(T!==C[0]&&C.unshift(T),g=i[T]):g=void 0}if(200<=e&&300>e||304===e)if(u.ifModified&&((i=_.getResponseHeader("Last-Modified"))&&(Q.lastModified[w]=i),(i=_.getResponseHeader("etag"))&&(Q.etag[w]=i)),204===e){var O=!0;c="nocontent"}else if(304===e)O=!0,c="notmodified";else{e:{var A,N=u,k=g;if(c={},v=0,T=(y=N.dataTypes.slice())[0],N.dataFilter&&(k=N.dataFilter(k,N.dataType)),y[1])for(F in N.converters)c[F.toLowerCase()]=N.converters[F];for(;i=y[++v];)if("*"!==i){if("*"!==T&&T!==i){var F=c[T+" "+i]||c["* "+i];if(!F)for(A in c)if((O=A.split(" "))[1]===i&&(F=c[T+" "+O[0]]||c["* "+O[0]])){!0===F?F=c[A]:!0!==c[A]&&(i=O[0],y.splice(v--,0,i));break}if(!0!==F)if(F&&N.throws)k=F(k);else try{k=F(k)}catch(e){O={state:"parsererror",error:F?e:"No conversion from "+T+" to "+i};break e}}T=i}O={state:"success",data:k}}c=O.state,N=O.data,O=!(k=O.error)}else k=c,(e||!c)&&(c="error",0>e&&(e=0));_.status=e,_.statusText=(n||c)+"",O?f.resolveWith(h,[N,c,_]):f.rejectWith(h,[_,c,k]),_.statusCode(m),m=t,a&&d.trigger(O?"ajaxSuccess":"ajaxError",[_,u,O?N:k]),p.fireWith(h,[_,c]),a&&(d.trigger("ajaxComplete",[_,u]),--Q.active||Q.event.trigger("ajaxStop"))}}"object"==typeof e&&(n=e,e=t),n=n||{};var o,r,s,a,l,c,u=Q.ajaxSetup({},n),h=u.context||u,d=u.context&&(h.nodeType||h.jquery)?Q(h):Q.event,f=Q.Deferred(),p=Q.Callbacks("once memory"),m=u.statusCode||{},g={},v={},b=0,y="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c)for(c={};t=Ct.exec(r);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?r:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else _.always(e[_.status]);return this},abort:function(e){return e=e||y,l&&l.abort(e),i(0,e),this}};if(f.promise(_).complete=p.add,_.success=_.done,_.error=_.fail,u.url=((e||u.url||jt)+"").replace(Et,"").replace(Tt,Pt[1]+"//"),u.type=n.method||n.type||u.method||u.type,u.dataTypes=Q.trim(u.dataType||"*").toLowerCase().match(ee)||[""],null==u.crossDomain&&(e=Ot.exec(u.url.toLowerCase()),u.crossDomain=!(!e||e[1]===Pt[1]&&e[2]===Pt[2]&&(e[3]||("http:"===e[1]?80:443))==(Pt[3]||("http:"===Pt[1]?80:443)))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=Q.param(u.data,u.traditional)),N(Nt,u,n,_),2===b)return _;(a=u.global)&&0==Q.active++&&Q.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!St.test(u.type);var w=u.url;for(o in u.hasContent||(u.data&&(w=u.url+=(wt.test(w)?"&":"?")+u.data,delete u.data),!1===u.cache&&(u.url=xt.test(w)?w.replace(xt,"$1_="+_t++):w+(wt.test(w)?"&":"?")+"_="+_t++)),u.ifModified&&(Q.lastModified[w]&&_.setRequestHeader("If-Modified-Since",Q.lastModified[w]),Q.etag[w]&&_.setRequestHeader("If-None-Match",Q.etag[w])),(u.data&&u.hasContent&&!1!==u.contentType||n.contentType)&&_.setRequestHeader("Content-Type",u.contentType),_.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Ft+"; q=0.01":""):u.accepts["*"]),u.headers)_.setRequestHeader(o,u.headers[o]);if(u.beforeSend&&(!1===u.beforeSend.call(h,_,u)||2===b))return _.abort();for(o in y="abort",{success:1,error:1,complete:1})_[o](u[o]);if(l=N(kt,u,n,_)){_.readyState=1,a&&d.trigger("ajaxSend",[_,u]),u.async&&0<u.timeout&&(s=setTimeout((function(){_.abort("timeout")}),u.timeout));try{b=1,l.send(g,i)}catch(e){if(!(2>b))throw e;i(-1,e)}}else i(-1,"No Transport");return _},getScript:function(e,n){return Q.get(e,t,n,"script")},getJSON:function(e,t,n){return Q.get(e,t,n,"json")}}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Q.globalEval(e),e}}}),Q.ajaxPrefilter("script",(function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)})),Q.ajaxTransport("script",(function(e){if(e.crossDomain){var n,i=R.head||Q("head")[0]||R.documentElement;return{send:function(t,o){(n=R.createElement("script")).async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||o(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(t,!0)}}}}));var Lt=[],It=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||Q.expando+"_"+_t++;return this[e]=!0,e}}),Q.ajaxPrefilter("json jsonp",(function(n,i,o){var r,s=!1!==n.jsonp&&(It.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&It.test(n.data)&&"data");if(s||"jsonp"===n.dataTypes[0]){var a=n.jsonpCallback=Q.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback;s?n[s]=n[s].replace(It,"$1"+a):!1!==n.jsonp&&(n.url+=(wt.test(n.url)?"&":"?")+n.jsonp+"="+a),n.converters["script json"]=function(){return r||Q.error(a+" was not called"),r[0]},n.dataTypes[0]="json";var l=e[a];return e[a]=function(){r=arguments},o.always((function(){e[a]=l,n[a]&&(n.jsonpCallback=i.jsonpCallback,Lt.push(a)),r&&Q.isFunction(l)&&l(r[0]),r=l=t})),"script"}}));var Mt,Dt=0,$t=e.ActiveXObject&&function(){for(var e in Mt)Mt[e](t,!0)};Q.ajaxSettings.xhr=e.ActiveXObject?function(){var t;if(!(t=!this.isLocal&&F()))e:{try{t=new e.ActiveXObject("Microsoft.XMLHTTP");break e}catch(e){}t=void 0}return t}:F;var Rt=Q.ajaxSettings.xhr();Q.support.cors=!!Rt&&"withCredentials"in Rt,(Rt=Q.support.ajax=!!Rt)&&Q.ajaxTransport((function(n){var i;if(!n.crossDomain||Q.support.cors)return{send:function(o,r){var s,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)a[s]=n.xhrFields[s];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(s in o)a.setRequestHeader(s,o[s])}catch(e){}if(a.send(n.hasContent&&n.data||null),i=function(e,o){try{if(i&&(o||4===a.readyState))if(i=t,l&&(a.onreadystatechange=Q.noop,$t&&delete Mt[l]),o)4!==a.readyState&&a.abort();else{var s={},c=a.status,u=a.getAllResponseHeaders();"string"==typeof a.responseText&&(s.text=a.responseText);try{var h=a.statusText}catch(e){h=""}c||!n.isLocal||n.crossDomain?1223===c&&(c=204):c=s.text?200:404}}catch(e){o||r(-1,e)}s&&r(c,h,s,u)},n.async)if(4===a.readyState)setTimeout(i);else{var l=++Dt;$t&&(Mt||(Mt={},Q(e).unload($t)),Mt[l]=i),a.onreadystatechange=i}else i()},abort:function(){i&&i(t,!0)}}}));var Ht,Wt,Bt=/^(?:toggle|show|hide)$/,Ut=new RegExp("^(?:([+-])=|)("+Z+")([a-z%]*)$","i"),zt=/queueHooks$/,qt=[function(e,t,n){var i,o=this,r=e.style,s={},a=[],l=e.nodeType&&_(e);if(!n.queue){var c=Q._queueHooks(e,"fx");if(null==c.unqueued){c.unqueued=0;var u=c.empty.fire;c.empty.fire=function(){c.unqueued||u()}}c.unqueued++,o.always((function(){o.always((function(){c.unqueued--,Q.queue(e,"fx").length||c.empty.fire()}))}))}for(i in 1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[r.overflow,r.overflowX,r.overflowY],"inline"===Q.css(e,"display")&&"none"===Q.css(e,"float")&&(Q.support.inlineBlockNeedsLayout&&"inline"!==S(e.nodeName)?r.zoom=1:r.display="inline-block")),n.overflow&&(r.overflow="hidden",Q.support.shrinkWrapBlocks||o.always((function(){r.overflow=n.overflow[0],r.overflowX=n.overflow[1],r.overflowY=n.overflow[2]}))),t){var h=t[i];if(Bt.exec(h)){delete t[i];var d=d||"toggle"===h;h!==(l?"hide":"show")&&a.push(i)}}if(t=a.length)for(("hidden"in(h=Q._data(e,"fxshow")||Q._data(e,"fxshow",{}))&&(l=h.hidden),d&&(h.hidden=!l),l?Q(e).show():o.done((function(){Q(e).hide()})),o.done((function(){var t;for(t in Q._removeData(e,"fxshow"),s)Q.style(e,t,s[t])})),i=0);i<t;i++){d=a[i];var f=o.createTween(d,l?h[d]:0);s[d]=h[d]||Q.style(e,d),d in h||(h[d]=f.start,l&&(f.end=f.start,f.start="width"===d||"height"===d?1:0))}}],Vt={"*":[function(e,t){var n=this.createTween(e,t),i=Ut.exec(t),o=n.cur(),r=+o||0,s=1,a=20;if(i){t=+i[2];var l=i[3]||(Q.cssNumber[e]?"":"px");if("px"!==l&&r){r=Q.css(n.elem,e,!0)||t||1;do{r/=s=s||".5",Q.style(n.elem,e,r+l)}while(s!==(s=n.cur()/o)&&1!==s&&--a)}n.unit=l,n.start=r,n.end=i[1]?r+(i[1]+1)*t:t}return n}]};Q.Animation=Q.extend(P,{tweener:function(e,t){Q.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,o=e.length;i<o;i++)n=e[i],Vt[n]=Vt[n]||[],Vt[n].unshift(t)},prefilter:function(e,t){t?qt.unshift(e):qt.push(e)}}),Q.Tween=L,L.prototype={constructor:L,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(Q.cssNumber[n]?"":"px")},cur:function(){var e=L.propHooks[this.prop];return e&&e.get?e.get(this):L.propHooks._default.get(this)},run:function(e){var t,n=L.propHooks[this.prop];return this.pos=t=this.options.duration?Q.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(e){return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(e=Q.css(e.elem,e.prop,""))&&"auto"!==e?e:0:e.elem[e.prop]},set:function(e){Q.fx.step[e.prop]?Q.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Q.cssProps[e.prop]]||Q.cssHooks[e.prop])?Q.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Q.each(["toggle","show","hide"],(function(e,t){var n=Q.fn[t];Q.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(I(t,!0),e,i,o)}})),Q.fn.extend({fadeTo:function(e,t,n,i){return this.filter(_).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=Q.isEmptyObject(e),r=Q.speed(t,n,i),s=function(){var t=P(this,Q.extend({},e),r);s.finish=function(){t.stop(!0)},(o||Q._data(this,"finish"))&&t.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(e,n,i){var o=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,n=null!=e&&e+"queueHooks",r=Q.timers,s=Q._data(this);if(n)s[n]&&s[n].stop&&o(s[n]);else for(n in s)s[n]&&s[n].stop&&zt.test(n)&&o(s[n]);for(n=r.length;n--;)r[n].elem!==this||null!=e&&r[n].queue!==e||(r[n].anim.stop(i),t=!1,r.splice(n,1));!t&&i||Q.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t=Q._data(this),n=t[e+"queue"],i=t[e+"queueHooks"],o=Q.timers,r=n?n.length:0;for(t.finish=!0,Q.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),i=o.length;i--;)o[i].elem===this&&o[i].queue===e&&(o[i].anim.stop(!0),o.splice(i,1));for(i=0;i<r;i++)n[i]&&n[i].finish&&n[i].finish.call(this);delete t.finish}))}}),Q.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){Q.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),Q.speed=function(e,t,n){var i=e&&"object"==typeof e?Q.extend({},e):{complete:n||!n&&t||Q.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Q.isFunction(t)&&t};return i.duration=Q.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Q.fx.speeds?Q.fx.speeds[i.duration]:Q.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){Q.isFunction(i.old)&&i.old.call(this),i.queue&&Q.dequeue(this,i.queue)},i},Q.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Q.timers=[],Q.fx=L.prototype.init,Q.fx.tick=function(){var e=Q.timers,n=0;for(Ht=Q.now();n<e.length;n++){var i=e[n];i()||e[n]!==i||e.splice(n--,1)}e.length||Q.fx.stop(),Ht=t},Q.fx.timer=function(e){e()&&Q.timers.push(e)&&Q.fx.start()},Q.fx.interval=13,Q.fx.start=function(){Wt||(Wt=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){clearInterval(Wt),Wt=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fx.step={},Q.expr&&Q.expr.filters&&(Q.expr.filters.animated=function(e){return Q.grep(Q.timers,(function(t){return e===t.elem})).length}),Q.fn.offset=function(e){if(arguments.length)return e===t?this:this.each((function(t){Q.offset.setOffset(this,e,t)}));var n,i={top:0,left:0},o=(n=this[0])&&n.ownerDocument;if(o){var r=o.documentElement;return Q.contains(r,n)?(typeof n.getBoundingClientRect!==$&&(i=n.getBoundingClientRect()),n=M(o),{top:i.top+(n.pageYOffset||r.scrollTop)-(r.clientTop||0),left:i.left+(n.pageXOffset||r.scrollLeft)-(r.clientLeft||0)}):i}},Q.offset={setOffset:function(e,t,n){var i=Q.css(e,"position");"static"===i&&(e.style.position="relative");var o=Q(e),r=o.offset(),s=Q.css(e,"top"),a=Q.css(e,"left"),l={};("absolute"===i||"fixed"===i)&&-1<Q.inArray("auto",[s,a])?(i=(a=o.position()).top,a=a.left):(i=parseFloat(s)||0,a=parseFloat(a)||0),Q.isFunction(t)&&(t=t.call(e,n,r)),null!=t.top&&(l.top=t.top-r.top+i),null!=t.left&&(l.left=t.left-r.left+a),"using"in t?t.using.call(e,l):o.css(l)}},Q.fn.extend({position:function(){if(this[0]){var e={top:0,left:0},t=this[0];if("fixed"===Q.css(t,"position"))var n=t.getBoundingClientRect();else{var i=this.offsetParent();n=this.offset(),Q.nodeName(i[0],"html")||(e=i.offset()),e.top+=Q.css(i[0],"borderTopWidth",!0),e.left+=Q.css(i[0],"borderLeftWidth",!0)}return{top:n.top-e.top-Q.css(t,"marginTop",!0),left:n.left-e.left-Q.css(t,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||R.documentElement;e&&!Q.nodeName(e,"html")&&"static"===Q.css(e,"position");)e=e.offsetParent;return e||R.documentElement}))}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,n){var i=/Y/.test(n);Q.fn[e]=function(o){return Q.access(this,(function(e,o,r){var s=M(e);if(r===t)return s?n in s?s[n]:s.document.documentElement[o]:e[o];s?s.scrollTo(i?Q(s).scrollLeft():r,i?r:Q(s).scrollTop()):e[o]=r}),e,o,arguments.length,null)}})),Q.each({Height:"height",Width:"width"},(function(e,n){Q.each({padding:"inner"+e,content:n,"":"outer"+e},(function(i,o){Q.fn[o]=function(o,r){var s=arguments.length&&(i||"boolean"!=typeof o),a=i||(!0===o||!0===r?"margin":"border");return Q.access(this,(function(n,i,o){return Q.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(i=n.documentElement,Math.max(n.body["scroll"+e],i["scroll"+e],n.body["offset"+e],i["offset"+e],i["client"+e])):o===t?Q.css(n,i,a):Q.style(n,i,o,a)}),n,s?o:t,s,null)}}))})),e.jQuery=e.$=Q,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],(function(){return Q}))}(window),jQuery.noConflict();var $j=jQuery;!function(e,t){var n=0,i=Array.prototype.slice,o=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(e){}o(t)},e.widget=function(t,n,i){var o={},r=t.split(".")[0],s=r+"-"+(t=t.split(".")[1]);i||(i=n,n=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[r]=e[r]||{};var a=e[r][t],l=e[r][t]=function(e,t){if(!this._createWidget)return new l(e,t);arguments.length&&this._createWidget(e,t)};e.extend(l,a,{version:i.version,_proto:e.extend({},i),_childConstructors:[]});var c=new n;c.options=e.widget.extend({},c.options),e.each(i,(function(t,i){e.isFunction(i)?o[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},o=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply;this._super=e,this._superApply=o;var r=i.apply(this,arguments);return this._super=t,this._superApply=n,r}}():o[t]=i})),l.prototype=e.widget.extend(c,{widgetEventPrefix:a&&c.widgetEventPrefix||t},o,{constructor:l,namespace:r,widgetName:t,widgetFullName:s}),a?(e.each(a._childConstructors,(function(t,n){t=n.prototype,e.widget(t.namespace+"."+t.widgetName,l,n._proto)})),delete a._childConstructors):n._childConstructors.push(l),e.widget.bridge(t,l)},e.widget.extend=function(n){for(var o,r,s=i.call(arguments,1),a=0,l=s.length;a<l;a++)for(o in s[a])r=s[a][o],s[a].hasOwnProperty(o)&&r!==t&&(e.isPlainObject(r)?n[o]=e.isPlainObject(n[o])?e.widget.extend({},n[o],r):e.widget.extend({},r):n[o]=r);return n},e.widget.bridge=function(n,o){var r=o.prototype.widgetFullName||n;e.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,a?this.each((function(){var i=e.data(this,r);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'");if(!e.isFunction(i[s])||"_"===s.charAt(0))return e.error("no such method '"+s+"' for "+n+" widget instance");var o=i[s].apply(i,l);return o!==i&&o!==t?(c=o&&o.jquery?c.pushStack(o.get()):o,!1):void 0})):this.each((function(){var t=e.data(this,r);t?t.option(s||{})._init():e.data(this,r,new o(s,this))})),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var o,r=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n){r={};var s=n.split(".");if(n=s.shift(),s.length){var a=r[n]=e.widget.extend({},this.options[n]);for(o=0;o<s.length-1;o++)a[s[o]]=a[s[o]]||{},a=a[s[o]];if(n=s.pop(),1===arguments.length)return a[n]===t?null:a[n];a[n]=i}else{if(1===arguments.length)return this.options[n]===t?null:this.options[n];r[n]=i}}return this._setOptions(r),this},_setOptions:function(e){for(var t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var o,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,(function(i,s){function a(){if(t||!0!==r.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/);i=l[1]+r.eventNamespace,(l=l[2])?o.delegate(l,i,a):n.bind(i,a)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var n=this;return setTimeout((function(){return("string"==typeof e?n[e]:e).apply(n,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var o,r=this.options[t];if(i=i||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],t=n.originalEvent)for(o in t)o in n||(n[o]=t[o]);return this.element.trigger(n,i),!(e.isFunction(r)&&!1===r.apply(this.element[0],[n].concat(i))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,n){e.Widget.prototype["_"+t]=function(i,o,r){"string"==typeof o&&(o={effect:o});var s=o?!0===o||"number"==typeof o?n:o.effect||n:t;"number"==typeof(o=o||{})&&(o={duration:o});var a=!e.isEmptyObject(o);o.complete=r,o.delay&&i.delay(o.delay),a&&e.effects&&e.effects.effect[s]?i[t](o):s!==t&&i[s]?i[s](o.duration,o.easing,r):i.queue((function(n){e(this)[t](),r&&r.call(i[0]),n()}))}}))}(jQuery),function(e,t){function n(e,t,n){return[parseFloat(e[0])*(h.test(e[0])?t/100:1),parseFloat(e[1])*(h.test(e[1])?n/100:1)]}e.ui=e.ui||{};var i,o=Math.max,r=Math.abs,s=Math.round,a=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,h=/%$/,d=e.fn.position;e.position={scrollbarWidth:function(){if(undefined!==i)return i;var t=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=t.children()[0];e("body").append(t);var o=n.offsetWidth;return t.css("overflow","scroll"),o===(n=n.offsetWidth)&&(n=t[0].clientWidth),t.remove(),i=o-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y");return n="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){t=e(t||window);var n=e.isWindow(t[0]);return{element:t,isWindow:n,isDocument:!!t[0]&&9===t[0].nodeType,offset:t.offset()||{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:n?t.width():t.outerWidth(),height:n?t.height():t.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return d.apply(this,arguments);t=e.extend({},t);var i=e(t.of),h=e.position.getWithinInfo(t.within),f=e.position.getScrollInfo(h),p=(t.collision||"flip").split(" "),m={},g=function(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}(i);i[0].preventDefault&&(t.at="left top");var v=g.width,b=g.height,y=g.offset,_=e.extend({},y);e.each(["my","at"],(function(){var e=(t[this]||"").split(" ");1===e.length&&(e=a.test(e[0])?e.concat(["center"]):l.test(e[0])?["center"].concat(e):["center","center"]),e[0]=a.test(e[0])?e[0]:"center",e[1]=l.test(e[1])?e[1]:"center";var n=c.exec(e[0]),i=c.exec(e[1]);m[this]=[n?n[0]:0,i?i[0]:0],t[this]=[u.exec(e[0])[0],u.exec(e[1])[0]]})),1===p.length&&(p[1]=p[0]),"right"===t.at[0]?_.left+=v:"center"===t.at[0]&&(_.left+=v/2),"bottom"===t.at[1]?_.top+=b:"center"===t.at[1]&&(_.top+=b/2);var w=n(m.at,v,b);return _.left+=w[0],_.top+=w[1],this.each((function(){var a,l=e(this),c=l.outerWidth(),u=l.outerHeight(),d=parseInt(e.css(this,"marginLeft"),10)||0,g=parseInt(e.css(this,"marginTop"),10)||0,E=c+d+(parseInt(e.css(this,"marginRight"),10)||0)+f.width,x=u+g+(parseInt(e.css(this,"marginBottom"),10)||0)+f.height,C=e.extend({},_),S=n(m.my,l.outerWidth(),l.outerHeight());"right"===t.my[0]?C.left-=c:"center"===t.my[0]&&(C.left-=c/2),"bottom"===t.my[1]?C.top-=u:"center"===t.my[1]&&(C.top-=u/2),C.left+=S[0],C.top+=S[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top));var T={marginLeft:d,marginTop:g};e.each(["left","top"],(function(n,i){e.ui.position[p[n]]&&e.ui.position[p[n]][i](C,{targetWidth:v,targetHeight:b,elemWidth:c,elemHeight:u,collisionPosition:T,collisionWidth:E,collisionHeight:x,offset:[w[0]+S[0],w[1]+S[1]],my:t.my,at:t.at,within:h,elem:l})})),t.using&&(a=function(e){var n=y.left-C.left,s=n+v-c,a=y.top-C.top,h=a+b-u,d={target:{element:i,left:y.left,top:y.top,width:v,height:b},element:{element:l,left:C.left,top:C.top,width:c,height:u},horizontal:0>s?"left":0<n?"right":"center",vertical:0>h?"top":0<a?"bottom":"middle"};v<c&&r(n+s)<v&&(d.horizontal="center"),b<u&&r(a+h)<b&&(d.vertical="middle"),o(r(n),r(s))>o(r(a),r(h))?d.important="horizontal":d.important="vertical",t.using.call(this,e,d)}),l.offset(e.extend(C,{using:a}))}))},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,s=e.left-t.collisionPosition.marginLeft;n=i-s;var a=s+t.collisionWidth-r-i;t.collisionWidth>r?0<n&&0>=a?(t=e.left+n+t.collisionWidth-r-i,e.left+=n-t):e.left=0<a&&0>=n?i:n>a?i+r-t.collisionWidth:i:e.left=0<n?e.left+n:0<a?e.left-a:o(e.left-s,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,r=t.within.height,s=e.top-t.collisionPosition.marginTop;n=i-s;var a=s+t.collisionHeight-r-i;t.collisionHeight>r?0<n&&0>=a?(t=e.top+n+t.collisionHeight-r-i,e.top+=n-t):e.top=0<a&&0>=n?i:n>a?i+r-t.collisionHeight:i:e.top=0<n?e.top+n:0<a?e.top-a:o(e.top-s,e.top)}},flip:{left:function(e,t){var n=t.within,i=n.offset.left+n.scrollLeft,o=n.width,s=n.isWindow?n.scrollLeft:n.offset.left,a=e.left-t.collisionPosition.marginLeft;n=a-s;var l=a+t.collisionWidth-o-s;a="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0;var c="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,u=-2*t.offset[0];0>n?(0>(t=e.left+a+c+u+t.collisionWidth-o-i)||t<r(n))&&(e.left+=a+c+u):0<l&&(0<(t=e.left-t.collisionPosition.marginLeft+a+c+u-s)||r(t)<l)&&(e.left+=a+c+u)},top:function(e,t){var n=t.within,i=n.offset.top+n.scrollTop,o=n.height,s=n.isWindow?n.scrollTop:n.offset.top,a=e.top-t.collisionPosition.marginTop;n=a-s;var l=a+t.collisionHeight-o-s;a="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0;var c="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,u=-2*t.offset[1];0>n?(t=e.top+a+c+u+t.collisionHeight-o-i,e.top+a+c+u>n&&(0>t||t<r(n))&&(e.top+=a+c+u)):0<l&&(t=e.top-t.collisionPosition.marginTop+a+c+u-s,e.top+a+c+u>l&&(0<t||r(t)<l)&&(e.top+=a+c+u))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n=document.getElementsByTagName("body")[0],i=document.createElement("div"),o=document.createElement(n?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};for(t in n&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"}),r)o.style[t]=r[t];o.appendChild(i),(r=n||document.documentElement).insertBefore(o,r.firstChild),i.style.cssText="position: absolute; left: 10.7432222px;",i=e(i).offset().left,e.support.offsetFractions=10<i&&11>i,o.innerHTML="",r.removeChild(o)}()}(jQuery),function(e){var t=0;e.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var i=this;"disabled"===t?(this[n?"_disable":"_enable"](),this.options[t]=n):(this._super(t,n),"content"===t&&e.each(this.tooltips,(function(e,t){i._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,(function(n,i){(n=e.Event("blur")).target=n.currentTarget=i[0],t.close(n,!0)})),this.element.find(this.options.items).addBack().each((function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")}))},_enable:function(){this.element.find(this.options.items).addBack().each((function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}))},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each((function(){var t=e(this);if(t.data("ui-tooltip-open")){var i=e.Event("blur");i.target=i.currentTarget=this,n.close(i,!0)}t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))})),this._updateContent(i,t))},_updateContent:function(e,t){var n=this.options.content,i=this,o=t?t.type:null;if("string"==typeof n)return this._open(t,e,n);(n=n.call(e[0],(function(n){e.data("ui-tooltip-open")&&i._delay((function(){t&&(t.type=o),this._open(t,e,n)}))})))&&this._open(t,e,n)},_open:function(t,n,i){function o(e){r.of=e,s.is(":hidden")||s.position(r)}var r=e.extend({},this.options.position);if(i){var s=this._find(n);if(s.length)s.find(".ui-tooltip-content").html(i);else{if(n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),s=this._tooltip(n),function(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))}(n,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:o}),o(t)):s.position(e.extend({of:n},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay)var a=this.delayedShow=setInterval((function(){s.is(":visible")&&(o(r.of),clearInterval(a))}),e.fx.interval);this._trigger("open",t,{tooltip:s}),i={keyup:function(t){t.keyCode===e.ui.keyCode.ESCAPE&&((t=e.Event(t)).currentTarget=n[0],this.close(t,!0))},remove:function(){this._removeTooltip(s)}},t&&"mouseover"!==t.type||(i.mouseleave="close"),t&&"focusin"!==t.type||(i.focusout="close"),this._on(!0,n,i)}}},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),o=this._find(i);this.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),function(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/);-1!==(n=e.inArray(n,i))&&i.splice(n,1),t.removeData("ui-tooltip-id"),(i=e.trim(i.join(" ")))?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")}(i),o.stop(!0),this._hide(o,this.options.hide,(function(){n._removeTooltip(e(this))})),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,(function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]})),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1)},_tooltip:function(n){var i="ui-tooltip-"+t++,o=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(o),o.appendTo(this.document[0].body),this.tooltips[i]=n,o},_find:function(t){return(t=t.data("ui-tooltip-id"))?e("#"+t):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,(function(n,i){var o=e.Event("blur");o.target=o.currentTarget=i[0],t.close(o,!0),e("#"+n).remove(),i.data("ui-tooltip-title")&&(i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))}))}})}(jQuery),function(e,t){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy((function(e){this.options.disabled&&e.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay((function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:i=!1;var o=this.previousFilter||"",r=String.fromCharCode(t.keyCode),s=!1;clearTimeout(this.filterTimer),r===o?s=!0:r=o+r;var a=new RegExp("^"+n(r),"i");o=this.activeMenu.children(".ui-menu-item").filter((function(){return a.test(e(this).children("a").text())})),(o=s&&-1!==o.index(this.active.next())?this.active.nextAll(".ui-menu-item"):o).length||(r=String.fromCharCode(t.keyCode),a=new RegExp("^"+n(r),"i"),o=this.activeMenu.children(".ui-menu-item").filter((function(){return a.test(e(this).children("a").text())}))),o.length?(this.focus(t,o),1<o.length?(this.previousFilter=r,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}i&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var n=e(this),i=n.prev("a"),o=e("<span>").addClass("ui-menu-icon ui-icon "+t).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(o),n.attr("aria-labelledby",i.attr("id"))})),(n=n.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),n.children(":not(.ui-menu-item)").each((function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")})),n.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first();var n=this.active.children("a").addClass("ui-state-focus");this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(n=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){if(this._hasScroll()){var n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0;n=t.offset().top-this.activeMenu.offset().top-n-i,i=this.activeMenu.scrollTop();var o=this.activeMenu.height();t=t.height(),0>n?this.activeMenu.scrollTop(i+n):n+t>o&&this.activeMenu.scrollTop(i+n-o+t)}},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay((function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n;if(this.active){if(!this.isLastItem())if(this._hasScroll()){var i=this.active.offset().top,o=this.element.height();this.active.nextAll(".ui-menu-item").each((function(){return 0>(n=e(this)).offset().top-i-o})),this.focus(t,n)}else this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())}else this.next(t)},previousPage:function(t){var n;if(this.active){if(!this.isFirstItem())if(this._hasScroll()){var i=this.active.offset().top,o=this.element.height();this.active.prevAll(".ui-menu-item").each((function(){return 0<(n=e(this)).offset().top-i+o})),this.focus(t,n)}else this.focus(t,this.activeMenu.children(".ui-menu-item").first())}else this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),function(e,t){function n(t,n){var o=t.nodeName.toLowerCase();return"area"===o?(o=(n=t.parentNode).name,!(!t.href||!o||"map"!==n.nodeName.toLowerCase())&&(!!(t=e("img[usemap=#"+o+"]")[0])&&i(t))):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o&&t.href||n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter((function(){return"hidden"===e.css(this,"visibility")})).length}var o=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each((function(){var t=this;setTimeout((function(){e(t).focus(),i&&i.call(t)}),n)})):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0);return/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){n=e(this[0]);for(var i;n.length&&n[0]!==document;){if(("absolute"===(i=n.css("position"))||"relative"===i||"fixed"===i)&&(i=parseInt(n.css("zIndex"),10),!isNaN(i)&&0!==i))return i;n=n.parent()}}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++o)}))},removeUniqueId:function(){return this.each((function(){r.test(this.id)&&e(this).removeAttr("id")}))}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(n){return!!e.data(n,t)}})):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),o=isNaN(i);return(o||0<=i)&&n(t,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(n,i){function o(t,n,i,o){return e.each(r,(function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)})),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?a["inner"+i].call(this):this.each((function(){e(this).css(s,o(this,n)+"px")}))},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?a["outer"+i].call(this,t):this.each((function(){e(this).css(s,o(this,t,!0,n)+"px")}))}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var o;for(o in t=e.ui[t].prototype,i)t.plugins[o]=t.plugins[o]||[],t.plugins[o].push([n,i[o]])},call:function(e,t,n){var i=e.plugins[t];if(i&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(t=0;t<i.length;t++)e.options[i[t][0]]&&i[t][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;if(0<t[n=n&&"left"===n?"scrollLeft":"scrollTop"])return!0;t[n]=1;var i=0<t[n];return t[n]=0,i}})}(jQuery),function(e,t){var n=!1;e(document).mouseup((function(){n=!1})),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).bind("click."+this.widgetName,(function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,o=1===t.which,r=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(o&&!r&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t))?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o;o="input"===o,this.isMultiLine=!!r||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[r||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))n=i=t=!0;else{n=i=t=!1;var r=e.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case r.UP:t=!0,this._keyEvent("previous",o);break;case r.DOWN:t=!0,this._keyEvent("next",o);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}}},keypress:function(i){if(t)t=!1,this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault();else if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){i?(i=!1,e.preventDefault()):this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay((function(){var t=this;this.document.one("mousedown",(function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()}))}))},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));n=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=n}))),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t=this;if(e.isArray(this.options.source)){var n=this.options.source;this.source=function(t,i){i(e.ui.autocomplete.filter(n,t.term))}}else if("string"==typeof this.options.source){var i=this.options.source;this.source=function(n,o){t.xhr&&t.xhr.abort(),t.xhr=e.ajax({url:i,data:n,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}}else this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy((function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")}),this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)}))},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,(function(e,n){i._renderItemData(t,n)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur()):this.menu[e](t):this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(1<e?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){if(this._superApply(arguments),!this.options.disabled&&!this.cancelSearch){var t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults;this.liveRegion.text(t)}}})}(jQuery),new function(e){var t=e.separator||"&",n=!1!==e.spaces,i=!1!==e.prefix?!0===e.hash?"#":"?":"",o=!1!==e.numbers;jQuery.query=new function(){var e=function(e,t){return null!=e&&null!==e&&(!t||e.constructor==t)},r=function(e){for(var t=/\[([^[]*)\]/g,n=/^([^[]+)(\[.*\])?$/.exec(e),i=n[1],o=[];e=t.exec(n[2]);)o.push(e[1]);return[i,o]},s=function(t,n,i){var o=n.shift();if("object"!=typeof t&&(t=null),""===o)if(t||(t=[]),e(t,Array))t.push(0==n.length?i:s(null,n.slice(0),i));else if(e(t,Object)){for(o=0;null!=t[o++];);t[--o]=0==n.length?i:s(t[o],n.slice(0),i)}else(t=[]).push(0==n.length?i:s(null,n.slice(0),i));else if(o&&o.match(/^\s*[0-9]+\s*$/)){var r=parseInt(o,10);t||(t=[]),t[r]=0==n.length?i:s(t[r],n.slice(0),i)}else{if(!o)return i;if(r=o.replace(/^\s*|\s*$/g,""),t||(t={}),e(t,Array)){var a={};for(o=0;o<t.length;++o)a[o]=t[o];t=a}t[r]=0==n.length?i:s(t[r],n.slice(0),i)}return t},a=function(e){var t=this;return t.keys={},e.queryObject?jQuery.each(e.get(),(function(e,n){t.SET(e,n)})):jQuery.each(arguments,(function(){var e=(""+this).replace(/^[?#]/,"");e=e.replace(/[;&]$/,""),n&&(e=e.replace(/[+]/g," ")),jQuery.each(e.split(/[&;]/),(function(){var e=decodeURIComponent(this.split("=")[0]||""),n=decodeURIComponent(this.split("=")[1]||"");e&&(o&&(/^[+-]?[0-9]+\.[0-9]*$/.test(n)?n=parseFloat(n):/^[+-]?[0-9]+$/.test(n)&&(n=parseInt(n,10))),t.SET(e,!n&&0!==n||n))}))})),t};return a.prototype={queryObject:!0,has:function(t,n){return t=this.get(t),e(t,n)},GET:function(t){if(!e(t))return this.keys;var n=r(t);for(t=n[1],n=this.keys[n[0]];null!=n&&0!=t.length;)n=n[t.shift()];return"number"==typeof n?n:n||""},get:function(t){return t=this.GET(t),e(t,Object)?jQuery.extend(!0,{},t):e(t,Array)?t.slice(0):t},SET:function(t,n){n=e(n)?n:null;var i=(t=r(t))[0];return this.keys[i]=s(this.keys[i],t[1].slice(0),n),this},set:function(e,t){return this.copy().SET(e,t)},REMOVE:function(e){return this.SET(e,null).COMPACT()},remove:function(e){return this.copy().REMOVE(e)},EMPTY:function(){var e=this;return jQuery.each(e.keys,(function(t,n){delete e.keys[t]})),e},load:function(e){var t=e.replace(/^.*?[#](.+?)(?:\?.+)?$/,"$1"),n=e.replace(/^.*?[?](.+?)(?:#.+)?$/,"$1");return new a(e.length==n.length?"":n,e.length==t.length?"":t)},empty:function(){return this.copy().EMPTY()},copy:function(){return new a(this)},COMPACT:function(){return this.keys=function t(n){var i="object"==typeof n?e(n,Array)?[]:{}:n;return"object"==typeof n&&jQuery.each(n,(function(n,o){if(!e(o))return!0;o=t(o),e(i,Array)?i.push(o):i[n]=o})),i}(this.keys),this},compact:function(){return this.copy().COMPACT()},toString:function(){var o=[],r=[],s=function(e){return e+="",n&&(e=e.replace(/ /g,"+")),encodeURIComponent(e)},a=function(t,n){var i=function(e){return n&&""!=n?[n,"[",e,"]"].join(""):[e].join("")};jQuery.each(t,(function(t,n){"object"==typeof n?a(n,i(t)):(t=i(t),e(n)&&!1!==n&&(t=[s(t)],!0!==n&&(t.push("="),t.push(s(n))),r.push(t.join(""))))}))};return a(this.keys),0<r.length&&o.push(i),o.push(r.join(t)),o.join("")}},new a(location.search,location.hash)}}(jQuery.query||{}),String.prototype.parseColor=function(e){var t="#";if("rgb("==this.slice(0,4)){var n=this.slice(4,this.length-1).split(","),i=0;do{t+=parseInt(n[i]).toColorPart()}while(3>++i)}else if("#"==this.slice(0,1)){if(4==this.length)for(i=1;4>i;i++)t+=(this.charAt(i)+this.charAt(i)).toLowerCase();7==this.length&&(t=this.toLowerCase())}return 7==t.length?t:e||this},Element.collectTextNodes=function(e){return $A($(e).childNodes).collect((function(e){return 3==e.nodeType?e.nodeValue:e.hasChildNodes()?Element.collectTextNodes(e):""})).flatten().join("")},Element.collectTextNodesIgnoreClass=function(e,t){return $A($(e).childNodes).collect((function(e){return 3==e.nodeType?e.nodeValue:e.hasChildNodes()&&!Element.hasClassName(e,t)?Element.collectTextNodesIgnoreClass(e,t):""})).flatten().join("")},Element.setContentZoom=function(e,t){return(e=$(e)).setStyle({fontSize:t/100+"em"}),Prototype.Browser.WebKit&&window.scrollBy(0,0),e},Element.getInlineOpacity=function(e){return $(e).style.opacity||""},Element.forceRerendering=function(e){try{e=$(e);var t=document.createTextNode(" ");e.appendChild(t),e.removeChild(t)}catch(e){}};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(e){return-Math.cos(e*Math.PI)/2+.5},reverse:function(e){return 1-e},flicker:function(e){return 1<(e=-Math.cos(e*Math.PI)/4+.75+Math.random()/4)?1:e},wobble:function(e){return-Math.cos(e*Math.PI*9*e)/2+.5},pulse:function(e,t){return-Math.cos(e*((t||5)-.5)*2*Math.PI)/2+.5},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)},none:function(e){return 0},full:function(e){return 1}},DefaultOptions:{duration:1,fps:100,sync:!1,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(e){var t="position:relative";Prototype.Browser.IE&&(t+=";zoom:1"),$A((e=$(e)).childNodes).each((function(n){3==n.nodeType&&(n.nodeValue.toArray().each((function(i){e.insertBefore(new Element("span",{style:t}).update(" "==i?String.fromCharCode(160):i),n)})),Element.remove(n))}))},multiple:function(e,t,n){e=("object"==typeof e||Object.isFunction(e))&&e.length?e:$(e).childNodes;var i=Object.extend({speed:.1,delay:0},n||{}),o=i.delay;$A(e).each((function(e,n){new t(e,Object.extend(i,{delay:n*i.speed+o}))}))},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(e,t,n){e=$(e),t=(t||"appear").toLowerCase(),n=Object.extend({queue:{position:"end",scope:e.id||"global",limit:1}},n||{}),Effect[e.visible()?Effect.PAIRS[t][1]:Effect.PAIRS[t][0]](e,n)}};if(Effect.DefaultOptions.transition=Effect.Transitions.sinoidal,Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[],this.interval=null},_each:function(e){this.effects._each(e)},add:function(e){var t=(new Date).getTime();switch(Object.isString(e.options.queue)?e.options.queue:e.options.queue.position){case"front":this.effects.findAll((function(e){return"idle"==e.state})).each((function(t){t.startOn+=e.finishOn,t.finishOn+=e.finishOn}));break;case"with-last":t=this.effects.pluck("startOn").max()||t;break;case"end":t=this.effects.pluck("finishOn").max()||t}e.startOn+=t,e.finishOn+=t,(!e.options.queue.limit||this.effects.length<e.options.queue.limit)&&this.effects.push(e),this.interval||(this.interval=setInterval(this.loop.bind(this),15))},remove:function(e){this.effects=this.effects.reject((function(t){return t==e})),0==this.effects.length&&(clearInterval(this.interval),this.interval=null)},loop:function(){for(var e=(new Date).getTime(),t=0,n=this.effects.length;t<n;t++)this.effects[t]&&this.effects[t].loop(e)}}),Effect.Queues={instances:$H(),get:function(e){return Object.isString(e)?this.instances.get(e)||this.instances.set(e,new Effect.ScopedQueue):e}},Effect.Queue=Effect.Queues.get("global"),Effect.Base=Class.create({position:null,start:function(e){e&&!1===e.transition&&(e.transition=Effect.Transitions.linear),this.options=Object.extend(Object.extend({},Effect.DefaultOptions),e||{}),this.currentFrame=0,this.state="idle",this.startOn=1e3*this.options.delay,this.finishOn=this.startOn+1e3*this.options.duration,this.fromToDelta=this.options.to-this.options.from,this.totalTime=this.finishOn-this.startOn,this.totalFrames=this.options.fps*this.options.duration,this.render=function(){function e(e,t){e.options[t+"Internal"]&&e.options[t+"Internal"](e),e.options[t]&&e.options[t](e)}return function(t){"idle"===this.state&&(this.state="running",e(this,"beforeSetup"),this.setup&&this.setup(),e(this,"afterSetup")),"running"===this.state&&(this.position=t=this.options.transition(t)*this.fromToDelta+this.options.from,e(this,"beforeUpdate"),this.update&&this.update(t),e(this,"afterUpdate"))}}(),this.event("beforeStart"),this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).add(this)},loop:function(e){if(e>=this.startOn)if(e>=this.finishOn)this.render(1),this.cancel(),this.event("beforeFinish"),this.finish&&this.finish(),this.event("afterFinish");else{var t=((e=(e-this.startOn)/this.totalTime)*this.totalFrames).round();t>this.currentFrame&&(this.render(e),this.currentFrame=t)}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this),this.state="finished"},event:function(e){this.options[e+"Internal"]&&this.options[e+"Internal"](this),this.options[e]&&this.options[e](this)},inspect:function(){var e=$H();for(property in this)Object.isFunction(this[property])||e.set(property,this[property]);return"#<Effect:"+e.inspect()+",options:"+$H(this.options).inspect()+">"}}),Effect.Parallel=Class.create(Effect.Base,{initialize:function(e,t){this.effects=e||[],this.start(t)},update:function(e){this.effects.invoke("render",e)},finish:function(e){this.effects.each((function(t){t.render(1),t.cancel(),t.event("beforeFinish"),t.finish&&t.finish(e),t.event("afterFinish")}))}}),Effect.Tween=Class.create(Effect.Base,{initialize:function(e,t,n){e=Object.isString(e)?$(e):e;var i=$A(arguments),o=i.last();i=5==i.length?i[3]:null,this.method=Object.isFunction(o)?o.bind(e):Object.isFunction(e[o])?e[o].bind(e):function(t){e[o]=t},this.start(Object.extend({from:t,to:n},i||{}))},update:function(e){this.method(e)}}),Effect.Event=Class.create(Effect.Base,{initialize:function(e){this.start(Object.extend({duration:0},e||{}))},update:Prototype.emptyFunction}),Effect.Opacity=Class.create(Effect.Base,{initialize:function(e,t){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1}),e=Object.extend({from:this.element.getOpacity()||0,to:1},t||{}),this.start(e)},update:function(e){this.element.setOpacity(e)}}),Effect.Move=Class.create(Effect.Base,{initialize:function(e,t){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;e=Object.extend({x:0,y:0,mode:"relative"},t||{}),this.start(e)},setup:function(){this.element.makePositioned(),this.originalLeft=parseFloat(this.element.getStyle("left")||"0"),this.originalTop=parseFloat(this.element.getStyle("top")||"0"),"absolute"==this.options.mode&&(this.options.x-=this.originalLeft,this.options.y-=this.originalTop)},update:function(e){this.element.setStyle({left:(this.options.x*e+this.originalLeft).round()+"px",top:(this.options.y*e+this.originalTop).round()+"px"})}}),Effect.MoveBy=function(e,t,n,i){return new Effect.Move(e,Object.extend({x:n,y:t},i||{}))},Effect.Scale=Class.create(Effect.Base,{initialize:function(e,t,n){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;e=Object.extend({scaleX:!0,scaleY:!0,scaleContent:!0,scaleFromCenter:!1,scaleMode:"box",scaleFrom:100,scaleTo:t},n||{}),this.start(e)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||!1,this.elementPositioning=this.element.getStyle("position"),this.originalStyle={},["top","left","width","height","fontSize"].each(function(e){this.originalStyle[e]=this.element.style[e]}.bind(this)),this.originalTop=this.element.offsetTop,this.originalLeft=this.element.offsetLeft;var e=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(t){0<e.indexOf(t)&&(this.fontSize=parseFloat(e),this.fontSizeType=t)}.bind(this)),this.factor=(this.options.scaleTo-this.options.scaleFrom)/100,this.dims=null,"box"==this.options.scaleMode&&(this.dims=[this.element.offsetHeight,this.element.offsetWidth]),/^content/.test(this.options.scaleMode)&&(this.dims=[this.element.scrollHeight,this.element.scrollWidth]),this.dims||(this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth])},update:function(e){e=this.options.scaleFrom/100+this.factor*e,this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*e+this.fontSizeType}),this.setDimensions(this.dims[0]*e,this.dims[1]*e)},finish:function(e){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(e,t){var n={};this.options.scaleX&&(n.width=t.round()+"px"),this.options.scaleY&&(n.height=e.round()+"px"),this.options.scaleFromCenter&&(e=(e-this.dims[0])/2,t=(t-this.dims[1])/2,"absolute"==this.elementPositioning?(this.options.scaleY&&(n.top=this.originalTop-e+"px"),this.options.scaleX&&(n.left=this.originalLeft-t+"px")):(this.options.scaleY&&(n.top=-e+"px"),this.options.scaleX&&(n.left=-t+"px"))),this.element.setStyle(n)}}),Effect.Highlight=Class.create(Effect.Base,{initialize:function(e,t){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;e=Object.extend({startcolor:"#fffae2"},t||{}),this.start(e)},setup:function(){"none"==this.element.getStyle("display")?this.cancel():(this.oldStyle={},this.options.keepBackgroundImage||(this.oldStyle.backgroundImage=this.element.getStyle("background-image"),this.element.setStyle({backgroundImage:"none"})),this.options.endcolor||(this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")),this.options.restorecolor||(this.options.restorecolor=this.element.getStyle("background-color")),this._base=$R(0,2).map(function(e){return parseInt(this.options.startcolor.slice(2*e+1,2*e+3),16)}.bind(this)),this._delta=$R(0,2).map(function(e){return parseInt(this.options.endcolor.slice(2*e+1,2*e+3),16)-this._base[e]}.bind(this)))},update:function(e){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(t,n,i){return t+(this._base[i]+this._delta[i]*e).round().toColorPart()}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}}),Effect.ScrollTo=function(e,t){t=t||{};var n=document.viewport.getScrollOffsets();return e=$(e).cumulativeOffset(),t.offset&&(e[1]+=t.offset),new Effect.Tween(null,n.top,e[1],t,(function(e){scrollTo(n.left,e.round())}))},Effect.Fade=function(e,t){var n=(e=$(e)).getInlineOpacity();return t=Object.extend({from:e.getOpacity()||1,to:0,afterFinishInternal:function(e){0==e.options.to&&e.element.hide().setStyle({opacity:n})}},t||{}),new Effect.Opacity(e,t)},Effect.Appear=function(e,t){return e=$(e),t=Object.extend({from:"none"==e.getStyle("display")?0:e.getOpacity()||0,to:1,afterFinishInternal:function(e){e.element.forceRerendering()},beforeSetup:function(e){e.element.setOpacity(e.options.from).show()}},t||{}),new Effect.Opacity(e,t)},Effect.Puff=function(e,t){var n={opacity:(e=$(e)).getInlineOpacity(),position:e.getStyle("position"),top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height};return new Effect.Parallel([new Effect.Scale(e,200,{sync:!0,scaleFromCenter:!0,scaleContent:!0,restoreAfterFinish:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:1,beforeSetupInternal:function(e){Position.absolutize(e.effects[0].element)},afterFinishInternal:function(e){e.effects[0].element.hide().setStyle(n)}},t||{}))},Effect.BlindUp=function(e,t){return(e=$(e)).makeClipping(),new Effect.Scale(e,0,Object.extend({scaleContent:!1,scaleX:!1,restoreAfterFinish:!0,afterFinishInternal:function(e){e.element.hide().undoClipping()}},t||{}))},Effect.BlindDown=function(e,t){var n=(e=$(e)).getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:0,scaleMode:{originalHeight:n.height,originalWidth:n.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.element.undoClipping()}},t||{}))},Effect.SwitchOff=function(e,t){var n=(e=$(e)).getInlineOpacity();return new Effect.Appear(e,Object.extend({duration:.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(e){new Effect.Scale(e.element,1,{duration:.3,scaleFromCenter:!0,scaleX:!1,scaleContent:!1,restoreAfterFinish:!0,beforeSetup:function(e){e.element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned().setStyle({opacity:n})}})}},t||{}))},Effect.DropOut=function(e,t){var n={top:(e=$(e)).getStyle("top"),left:e.getStyle("left"),opacity:e.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(e,{x:0,y:100,sync:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:.5,beforeSetup:function(e){e.effects[0].element.makePositioned()},afterFinishInternal:function(e){e.effects[0].element.hide().undoPositioned().setStyle(n)}},t||{}))},Effect.Shake=function(e,t){e=$(e),t=Object.extend({distance:20,duration:.5},t||{});var n=parseFloat(t.distance),i=parseFloat(t.duration)/10,o={top:e.getStyle("top"),left:e.getStyle("left")};return new Effect.Move(e,{x:n,y:0,duration:i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*-n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*-n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*n,y:0,duration:2*i,afterFinishInternal:function(e){new Effect.Move(e.element,{x:-n,y:0,duration:i,afterFinishInternal:function(e){e.element.undoPositioned().setStyle(o)}})}})}})}})}})}})},Effect.SlideDown=function(e,t){var n=(e=$(e).cleanWhitespace()).down().getStyle("bottom"),i=e.getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:i.height,originalWidth:i.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.undoClipping().undoPositioned(),e.element.down().undoPositioned().setStyle({bottom:n})}},t||{}))},Effect.SlideUp=function(e,t){var n=(e=$(e).cleanWhitespace()).down().getStyle("bottom"),i=e.getDimensions();return new Effect.Scale(e,window.opera?0:1,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:100,scaleMode:{originalHeight:i.height,originalWidth:i.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned(),e.element.down().undoPositioned().setStyle({bottom:n})}},t||{}))},Effect.Squish=function(e){return new Effect.Scale(e,window.opera?1:0,{restoreAfterFinish:!0,beforeSetup:function(e){e.element.makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping()}})},Effect.Grow=function(e,t){e=$(e);var n,i,o,r=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},t||{}),s={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},a=e.getDimensions();switch(r.direction){case"top-left":var l=n=i=o=0;break;case"top-right":l=a.width,n=o=0,i=-a.width;break;case"bottom-left":l=i=0,n=a.height,o=-a.height;break;case"bottom-right":l=a.width,n=a.height,i=-a.width,o=-a.height;break;case"center":l=a.width/2,n=a.height/2,i=-a.width/2,o=-a.height/2}return new Effect.Move(e,{x:l,y:n,duration:.01,beforeSetup:function(e){e.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(e){new Effect.Parallel([new Effect.Opacity(e.element,{sync:!0,to:1,from:0,transition:r.opacityTransition}),new Effect.Move(e.element,{x:i,y:o,sync:!0,transition:r.moveTransition}),new Effect.Scale(e.element,100,{scaleMode:{originalHeight:a.height,originalWidth:a.width},sync:!0,scaleFrom:window.opera?1:0,transition:r.scaleTransition,restoreAfterFinish:!0})],Object.extend({beforeSetup:function(e){e.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.effects[0].element.undoClipping().undoPositioned().setStyle(s)}},r))}})},Effect.Shrink=function(e,t){e=$(e),t=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},t||{});var n,i={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},o=e.getDimensions();switch(t.direction){case"top-left":var r=n=0;break;case"top-right":r=o.width,n=0;break;case"bottom-left":r=0,n=o.height;break;case"bottom-right":r=o.width,n=o.height;break;case"center":r=o.width/2,n=o.height/2}return new Effect.Parallel([new Effect.Opacity(e,{sync:!0,to:0,from:1,transition:t.opacityTransition}),new Effect.Scale(e,window.opera?1:0,{sync:!0,transition:t.scaleTransition,restoreAfterFinish:!0}),new Effect.Move(e,{x:r,y:n,sync:!0,transition:t.moveTransition})],Object.extend({beforeStartInternal:function(e){e.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.effects[0].element.hide().undoClipping().undoPositioned().setStyle(i)}},t))},Effect.Pulsate=function(e,t){e=$(e);var n=t||{},i=e.getInlineOpacity(),o=n.transition||Effect.Transitions.linear;return new Effect.Opacity(e,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(e){e.element.setStyle({opacity:i})}},n),{transition:function(e){return 1-o(-Math.cos(e*(n.pulses||5)*2*Math.PI)/2+.5)}}))},Effect.Fold=function(e,t){var n={top:(e=$(e)).style.top,left:e.style.left,width:e.style.width,height:e.style.height};return e.makeClipping(),new Effect.Scale(e,5,Object.extend({scaleContent:!1,scaleX:!1,afterFinishInternal:function(t){new Effect.Scale(e,1,{scaleContent:!1,scaleY:!1,afterFinishInternal:function(e){e.element.hide().undoClipping().setStyle(n)}})}},t||{}))},Effect.Morph=Class.create(Effect.Base,{initialize:function(e,t){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;if(e=Object.extend({style:{}},t||{}),Object.isString(e.style))if(e.style.include(":"))this.style=e.style.parseStyle();else{this.element.addClassName(e.style),this.style=$H(this.element.getStyles()),this.element.removeClassName(e.style);var n=this.element.getStyles();this.style=this.style.reject((function(e){return e.value==n[e.key]})),e.afterFinishInternal=function(e){e.element.addClassName(e.options.style),e.transforms.each((function(t){e.element.style[t.style]=""}))}}else this.style=$H(e.style);this.start(e)},setup:function(){function e(e){return e&&!["rgba(0, 0, 0, 0)","transparent"].include(e)||(e="#ffffff"),e=e.parseColor(),$R(0,2).map((function(t){return parseInt(e.slice(2*t+1,2*t+3),16)}))}this.transforms=this.style.map(function(t){var n=t[0],i=null;"#zzzzzz"!=(t=t[1]).parseColor("#zzzzzz")?(t=t.parseColor(),i="color"):"opacity"==n?(t=parseFloat(t),Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1})):Element.CSS_LENGTH.test(t)&&(i=t.match(/^([\+\-]?[0-9\.]+)(.*)$/),t=parseFloat(i[1]),i=3==i.length?i[2]:null);var o=this.element.getStyle(n);return{style:n.camelize(),originalValue:"color"==i?e(o):parseFloat(o||0),targetValue:"color"==i?e(t):t,unit:i}}.bind(this)).reject((function(e){return e.originalValue==e.targetValue||"color"!=e.unit&&(isNaN(e.originalValue)||isNaN(e.targetValue))}))},update:function(e){for(var t,n={},i=this.transforms.length;i--;)n[(t=this.transforms[i]).style]="color"==t.unit?"#"+Math.round(t.originalValue[0]+(t.targetValue[0]-t.originalValue[0])*e).toColorPart()+Math.round(t.originalValue[1]+(t.targetValue[1]-t.originalValue[1])*e).toColorPart()+Math.round(t.originalValue[2]+(t.targetValue[2]-t.originalValue[2])*e).toColorPart():(t.originalValue+(t.targetValue-t.originalValue)*e).toFixed(3)+(null===t.unit?"":t.unit);this.element.setStyle(n,!0)}}),Effect.Transform=Class.create({initialize:function(e,t){this.tracks=[],this.options=t||{},this.addTracks(e)},addTracks:function(e){return e.each(function(e){var t=(e=$H(e)).values().first();this.tracks.push($H({ids:e.keys().first(),effect:Effect.Morph,options:{style:t}}))}.bind(this)),this},play:function(){return new Effect.Parallel(this.tracks.map((function(e){var t=e.get("ids"),n=e.get("effect"),i=e.get("options");return[$(t)||$$(t)].flatten().map((function(e){return new n(e,Object.extend({sync:!0},i))}))})).flatten(),this.options)}}),Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex"),Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|%))|0$/,String.__parseStyleElement=document.createElement("div"),String.prototype.parseStyle=function(){var e=$H();if(Prototype.Browser.WebKit)var t=new Element("div",{style:this}).style;else String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>',t=String.__parseStyleElement.childNodes[0].style;return Element.CSS_PROPERTIES.each((function(n){t[n]&&e.set(n,t[n])})),Prototype.Browser.IE&&this.include("opacity")&&e.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]),e},Element.getStyles=document.defaultView&&document.defaultView.getComputedStyle?function(e){var t=document.defaultView.getComputedStyle($(e),null);return Element.CSS_PROPERTIES.inject({},(function(e,n){return e[n]=t[n],e}))}:function(e){var t=(e=$(e)).currentStyle,n=Element.CSS_PROPERTIES.inject({},(function(e,n){return e[n]=t[n],e}));return n.opacity||(n.opacity=e.getOpacity()),n},Effect.Methods={morph:function(e,t,n){return e=$(e),new Effect.Morph(e,Object.extend({style:t},n||{})),e},visualEffect:function(e,t,n){return e=$(e),t=(t=t.dasherize().camelize()).charAt(0).toUpperCase()+t.substring(1),new Effect[t](e,n),e},highlight:function(e,t){return e=$(e),new Effect.Highlight(e,t),e}},$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each((function(e){Effect.Methods[e]=function(t,n){return t=$(t),Effect[e.charAt(0).toUpperCase()+e.substring(1)](t,n),t}})),$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each((function(e){Effect.Methods[e]=Element[e]})),Element.addMethods(Effect.Methods),void 0===Effect)throw"controls.js requires including script.aculo.us' effects.js library";var Autocompleter={};if(Autocompleter.Base=Class.create({baseInitialize:function(e,t,n){this.element=e=$(e),this.update=$(t),this.active=this.changed=this.hasFocus=!1,this.entryCount=this.index=0,this.oldElementValue=this.element.value,this.setOptions?this.setOptions(n):this.options=n||{},this.options.paramName=this.options.paramName||this.element.name,this.options.tokens=this.options.tokens||[],this.options.frequency=this.options.frequency||.4,this.options.minChars=this.options.minChars||1,this.options.onShow=this.options.onShow||function(e,t){t.style.position&&"absolute"!=t.style.position||(t.style.position="absolute",Position.clone(e,t,{setHeight:!1,offsetTop:e.offsetHeight})),Effect.Appear(t,{duration:.15})},this.options.onHide=this.options.onHide||function(e,t){new Effect.Fade(t,{duration:.15})},"string"==typeof this.options.tokens&&(this.options.tokens=Array(this.options.tokens)),this.options.tokens.include("\n")||this.options.tokens.push("\n"),this.observer=null,this.element.setAttribute("autocomplete","off"),Element.hide(this.update),Event.observe(this.element,"blur",this.onBlur.bindAsEventListener(this)),Event.observe(this.element,"keydown",this.onKeyPress.bindAsEventListener(this))},show:function(){"none"==Element.getStyle(this.update,"display")&&this.options.onShow(this.element,this.update),!this.iefix&&Prototype.Browser.IE&&"absolute"==Element.getStyle(this.update,"position")&&(new Insertion.After(this.update,'<iframe id="'+this.update.id+'_iefix" style="display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);" src="javascript:false;" frameborder="0" scrolling="no"></iframe>'),this.iefix=$(this.update.id+"_iefix")),this.iefix&&setTimeout(this.fixIEOverlapping.bind(this),50)},fixIEOverlapping:function(){Position.clone(this.update,this.iefix,{setTop:!this.update.style.height}),this.iefix.style.zIndex=1,this.update.style.zIndex=2,Element.show(this.iefix)},hide:function(){this.stopIndicator(),"none"!=Element.getStyle(this.update,"display")&&this.options.onHide(this.element,this.update),this.iefix&&Element.hide(this.iefix)},startIndicator:function(){this.options.indicator&&Element.show(this.options.indicator)},stopIndicator:function(){this.options.indicator&&Element.hide(this.options.indicator)},onKeyPress:function(e){if(this.active)switch(e.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry(),Event.stop(e);case Event.KEY_ESC:return this.hide(),this.active=!1,void Event.stop(e);case Event.KEY_LEFT:case Event.KEY_RIGHT:return;case Event.KEY_UP:return this.markPrevious(),this.render(),void Event.stop(e);case Event.KEY_DOWN:return this.markNext(),this.render(),void Event.stop(e)}else if(e.keyCode==Event.KEY_TAB||e.keyCode==Event.KEY_RETURN||0<Prototype.Browser.WebKit&&0==e.keyCode)return;this.hasFocus=this.changed=!0,this.observer&&clearTimeout(this.observer),this.observer=setTimeout(this.onObserverEvent.bind(this),1e3*this.options.frequency)},activate:function(){this.changed=!1,this.hasFocus=!0,this.getUpdatedChoices()},onHover:function(e){var t=Event.findElement(e,"LI");this.index!=t.autocompleteIndex&&(this.index=t.autocompleteIndex,this.render()),Event.stop(e)},onClick:function(e){this.index=Event.findElement(e,"LI").autocompleteIndex,this.selectEntry(),this.hide()},onBlur:function(e){setTimeout(this.hide.bind(this),250),this.active=this.hasFocus=!1},render:function(){if(0<this.entryCount){for(var e=0;e<this.entryCount;e++)this.index==e?Element.addClassName(this.getEntry(e),"selected"):Element.removeClassName(this.getEntry(e),"selected");this.hasFocus&&(this.show(),this.active=!0)}else this.active=!1,this.hide()},markPrevious:function(){0<this.index?this.index--:this.index=this.entryCount-1,this.getEntry(this.index).scrollIntoView(!0)},markNext:function(){this.index<this.entryCount-1?this.index++:this.index=0,this.getEntry(this.index).scrollIntoView(!1)},getEntry:function(e){return this.update.firstChild.childNodes[e]},getCurrentEntry:function(){return this.getEntry(this.index)},selectEntry:function(){this.active=!1,this.updateElement(this.getCurrentEntry())},updateElement:function(e){if(this.options.updateElement)this.options.updateElement(e);else{var t="";if(this.options.select){var n=$(e).select("."+this.options.select)||[];0<n.length&&(t=Element.collectTextNodes(n[0],this.options.select))}else t=Element.collectTextNodesIgnoreClass(e,"informal");if(-1!=(n=this.getTokenBounds())[0]){var i=this.element.value.substr(0,n[0]),o=this.element.value.substr(n[0]).match(/^\s+/);o&&(i+=o[0]),this.element.value=i+t+this.element.value.substr(n[1])}else this.element.value=t;this.oldElementValue=this.element.value,this.element.focus(),this.options.afterUpdateElement&&this.options.afterUpdateElement(this.element,e)}},updateChoices:function(e){if(!this.changed&&this.hasFocus){if(this.update.innerHTML=e,Element.cleanWhitespace(this.update),Element.cleanWhitespace(this.update.down()),this.update.firstChild&&this.update.down().childNodes)for(this.entryCount=this.update.down().childNodes.length,e=0;e<this.entryCount;e++){var t=this.getEntry(e);t.autocompleteIndex=e,this.addObservers(t)}else this.entryCount=0;this.stopIndicator(),this.index=0,1==this.entryCount&&this.options.autoSelect?(this.selectEntry(),this.hide()):this.render()}},addObservers:function(e){Event.observe(e,"mouseover",this.onHover.bindAsEventListener(this)),Event.observe(e,"click",this.onClick.bindAsEventListener(this))},onObserverEvent:function(){this.changed=!1,this.tokenBounds=null,this.getToken().length>=this.options.minChars?this.getUpdatedChoices():(this.active=!1,this.hide()),this.oldElementValue=this.element.value},getToken:function(){var e=this.getTokenBounds();return this.element.value.substring(e[0],e[1]).strip()},getTokenBounds:function(){if(null!=this.tokenBounds)return this.tokenBounds;var e=this.element.value;if(e.strip().empty())return[-1,0];for(var t,n=arguments.callee.getFirstDifferencePos(e,this.oldElementValue),i=n==this.oldElementValue.length?1:0,o=-1,r=e.length,s=0,a=this.options.tokens.length;s<a;++s)(t=e.lastIndexOf(this.options.tokens[s],n+i-1))>o&&(o=t),-1!=(t=e.indexOf(this.options.tokens[s],n+i))&&t<r&&(r=t);return this.tokenBounds=[o+1,r]}}),Autocompleter.Base.prototype.getTokenBounds.getFirstDifferencePos=function(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;++i)if(e[i]!=t[i])return i;return n},Ajax.Autocompleter=Class.create(Autocompleter.Base,{initialize:function(e,t,n,i){this.baseInitialize(e,t,i),this.options.asynchronous=!0,this.options.onComplete=this.onComplete.bind(this),this.options.defaultParams=this.options.parameters||null,this.url=n},getUpdatedChoices:function(){this.startIndicator();var e=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(this.getToken());this.options.parameters=this.options.callback?this.options.callback(this.element,e):e,this.options.defaultParams&&(this.options.parameters+="&"+this.options.defaultParams),new Ajax.Request(this.url,this.options)},onComplete:function(e){this.updateChoices(e.responseText)}}),Autocompleter.Local=Class.create(Autocompleter.Base,{initialize:function(e,t,n,i){this.baseInitialize(e,t,i),this.options.array=n},getUpdatedChoices:function(){this.updateChoices(this.options.selector(this))},setOptions:function(e){this.options=Object.extend({choices:10,partialSearch:!0,partialChars:2,ignoreCase:!0,fullSearch:!1,selector:function(e){for(var t=[],n=[],i=e.getToken(),o=0;o<e.options.array.length&&t.length<e.options.choices;o++)for(var r=e.options.array[o],s=e.options.ignoreCase?r.toLowerCase().indexOf(i.toLowerCase()):r.indexOf(i);-1!=s;){if(0==s&&r.length!=i.length){t.push("<li><strong>"+r.substr(0,i.length)+"</strong>"+r.substr(i.length)+"</li>");break}if(i.length>=e.options.partialChars&&e.options.partialSearch&&-1!=s&&(e.options.fullSearch||/\s/.test(r.substr(s-1,1)))){n.push("<li>"+r.substr(0,s)+"<strong>"+r.substr(s,i.length)+"</strong>"+r.substr(s+i.length)+"</li>");break}s=e.options.ignoreCase?r.toLowerCase().indexOf(i.toLowerCase(),s+1):r.indexOf(i,s+1)}return n.length&&(t=t.concat(n.slice(0,e.options.choices-t.length))),"<ul>"+t.join("")+"</ul>"}},e||{})}}),Field.scrollFreeActivate=function(e){setTimeout((function(){Field.activate(e)}),1)},Ajax.InPlaceEditor=Class.create({initialize:function(e,t,n){this.url=t,this.element=e=$(e),this.prepareOptions(),this._controls={},arguments.callee.dealWithDeprecatedOptions(n),Object.extend(this.options,n||{}),!this.options.formId&&this.element.id&&(this.options.formId=this.element.id+"-inplaceeditor",$(this.options.formId)&&(this.options.formId="")),this.options.externalControl&&(this.options.externalControl=$(this.options.externalControl)),this.options.externalControl||(this.options.externalControlOnly=!1),this._originalBackground=this.element.getStyle("background-color")||"transparent",this.element.title=this.options.clickToEditText,this._boundCancelHandler=this.handleFormCancellation.bind(this),this._boundComplete=(this.options.onComplete||Prototype.emptyFunction).bind(this),this._boundFailureHandler=this.handleAJAXFailure.bind(this),this._boundSubmitHandler=this.handleFormSubmission.bind(this),this._boundWrapperHandler=this.wrapUp.bind(this),this.registerListeners()},checkForEscapeOrReturn:function(e){!this._editing||e.ctrlKey||e.altKey||e.shiftKey||(Event.KEY_ESC==e.keyCode?this.handleFormCancellation(e):Event.KEY_RETURN==e.keyCode&&this.handleFormSubmission(e))},createControl:function(e,t,n){var i=this.options[e+"Control"];t=this.options[e+"Text"],"button"==i?((n=document.createElement("input")).type="submit",n.value=t,n.className="editor_"+e+"_button","cancel"==e&&(n.onclick=this._boundCancelHandler),this._form.appendChild(n),this._controls[e]=n):"link"==i&&((i=document.createElement("a")).href="#",i.appendChild(document.createTextNode(t)),i.onclick="cancel"==e?this._boundCancelHandler:this._boundSubmitHandler,i.className="editor_"+e+"_link",n&&(i.className+=" "+n),this._form.appendChild(i),this._controls[e]=i)},createEditField:function(){var e=this.options.loadTextURL?this.options.loadingText:this.getText();if(1>=this.options.rows&&!/\r|\n/.test(this.getText())){var t=document.createElement("input");t.type="text";var n=this.options.size||this.options.cols||0;0<n&&(t.size=n)}else(t=document.createElement("textarea")).rows=1>=this.options.rows?this.options.autoRows:this.options.rows,t.cols=this.options.cols||40;t.name=this.options.paramName,t.value=e,t.className="editor_field",this.options.submitOnBlur&&(t.onblur=this._boundSubmitHandler),this._controls.editor=t,this.options.loadTextURL&&this.loadExternalText(),this._form.appendChild(this._controls.editor)},createForm:function(){function e(e,n){(e=t.options["text"+e+"Controls"])&&!1!==n&&t._form.appendChild(document.createTextNode(e))}var t=this;this._form=$(document.createElement("form")),this._form.id=this.options.formId,this._form.addClassName(this.options.formClassName),this._form.onsubmit=this._boundSubmitHandler,this.createEditField(),"textarea"==this._controls.editor.tagName.toLowerCase()&&this._form.appendChild(document.createElement("br")),this.options.onFormCustomization&&this.options.onFormCustomization(this,this._form),e("Before",this.options.okControl||this.options.cancelControl),this.createControl("ok",this._boundSubmitHandler),e("Between",this.options.okControl&&this.options.cancelControl),this.createControl("cancel",this._boundCancelHandler,"editor_cancel"),e("After",this.options.okControl||this.options.cancelControl)},destroy:function(){this._oldInnerHTML&&(this.element.innerHTML=this._oldInnerHTML),this.leaveEditMode(),this.unregisterListeners()},enterEditMode:function(e){this._saving||this._editing||(this._editing=!0,this.triggerCallback("onEnterEditMode"),this.options.externalControl&&this.options.externalControl.hide(),this.element.hide(),this.createForm(),this.element.parentNode.insertBefore(this._form,this.element),this.options.loadTextURL||this.postProcessEditField(),e&&Event.stop(e))},enterHover:function(e){this.options.hoverClassName&&this.element.addClassName(this.options.hoverClassName),this._saving||this.triggerCallback("onEnterHover")},getText:function(){return this.element.innerHTML.unescapeHTML()},handleAJAXFailure:function(e){this.triggerCallback("onFailure",e),this._oldInnerHTML&&(this.element.innerHTML=this._oldInnerHTML,this._oldInnerHTML=null)},handleFormCancellation:function(e){this.wrapUp(),e&&Event.stop(e)},handleFormSubmission:function(e){var t=this._form,n=$F(this._controls.editor);this.prepareSubmission(),t=this.options.callback(t,n)||"",Object.isString(t)&&(t=t.toQueryParams()),t.editorId=this.element.id,this.options.htmlResponse?(n=Object.extend({evalScripts:!0},this.options.ajaxOptions),Object.extend(n,{parameters:t,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler}),new Ajax.Updater({success:this.element},this.url,n)):(n=Object.extend({method:"get"},this.options.ajaxOptions),Object.extend(n,{parameters:t,onComplete:this._boundWrapperHandler,onFailure:this._boundFailureHandler}),new Ajax.Request(this.url,n)),e&&Event.stop(e)},leaveEditMode:function(){this.element.removeClassName(this.options.savingClassName),this.removeForm(),this.leaveHover(),this.element.style.backgroundColor=this._originalBackground,this.element.show(),this.options.externalControl&&this.options.externalControl.show(),this._editing=this._saving=!1,this._oldInnerHTML=null,this.triggerCallback("onLeaveEditMode")},leaveHover:function(e){this.options.hoverClassName&&this.element.removeClassName(this.options.hoverClassName),this._saving||this.triggerCallback("onLeaveHover")},loadExternalText:function(){this._form.addClassName(this.options.loadingClassName),this._controls.editor.disabled=!0;var e=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(e,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(e){this._form.removeClassName(this.options.loadingClassName),e=e.responseText,this.options.stripLoadedTextTags&&(e=e.stripTags()),this._controls.editor.value=e,this._controls.editor.disabled=!1,this.postProcessEditField()}.bind(this),onFailure:this._boundFailureHandler}),new Ajax.Request(this.options.loadTextURL,e)},postProcessEditField:function(){var e=this.options.fieldPostCreation;e&&$(this._controls.editor)["focus"==e?"focus":"activate"]()},prepareOptions:function(){this.options=Object.clone(Ajax.InPlaceEditor.DefaultOptions),Object.extend(this.options,Ajax.InPlaceEditor.DefaultCallbacks),[this._extraDefaultOptions].flatten().compact().each(function(e){Object.extend(this.options,e)}.bind(this))},prepareSubmission:function(){this._saving=!0,this.removeForm(),this.leaveHover(),this.showSaving()},registerListeners:function(){var e;this._listeners={},$H(Ajax.InPlaceEditor.Listeners).each(function(t){e=this[t.value].bind(this),this._listeners[t.key]=e,this.options.externalControlOnly||this.element.observe(t.key,e),this.options.externalControl&&this.options.externalControl.observe(t.key,e)}.bind(this))},removeForm:function(){this._form&&(this._form.remove(),this._form=null,this._controls={})},showSaving:function(){this._oldInnerHTML=this.element.innerHTML,this.element.innerHTML=this.options.savingText,this.element.addClassName(this.options.savingClassName),this.element.style.backgroundColor=this._originalBackground,this.element.show()},triggerCallback:function(e,t){"function"==typeof this.options[e]&&this.options[e](this,t)},unregisterListeners:function(){$H(this._listeners).each(function(e){this.options.externalControlOnly||this.element.stopObserving(e.key,e.value),this.options.externalControl&&this.options.externalControl.stopObserving(e.key,e.value)}.bind(this))},wrapUp:function(e){this.leaveEditMode(),this._boundComplete(e,this.element)}}),Object.extend(Ajax.InPlaceEditor.prototype,{dispose:Ajax.InPlaceEditor.prototype.destroy}),Ajax.InPlaceCollectionEditor=Class.create(Ajax.InPlaceEditor,{initialize:function(e,t,n,i){this._extraDefaultOptions=Ajax.InPlaceCollectionEditor.DefaultOptions,e(t,n,i)},createEditField:function(){var e=document.createElement("select");e.name=this.options.paramName,e.size=1,this._controls.editor=e,this._collection=this.options.collection||[],this.options.loadCollectionURL?this.loadCollection():this.checkForExternalText(),this._form.appendChild(this._controls.editor)},loadCollection:function(){this._form.addClassName(this.options.loadingClassName),this.showLoadingText(this.options.loadingCollectionText);var a=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(a,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(a){if(a=a.responseText.strip(),!/^\[.*\]$/.test(a))throw"Server returned an invalid collection representation.";this._collection=eval(a),this.checkForExternalText()}.bind(this),onFailure:this.onFailure}),new Ajax.Request(this.options.loadCollectionURL,a)},showLoadingText:function(e){this._controls.editor.disabled=!0;var t=this._controls.editor.firstChild;t||((t=document.createElement("option")).value="",this._controls.editor.appendChild(t),t.selected=!0),t.update((e||"").stripScripts().stripTags())},checkForExternalText:function(){this._text=this.getText(),this.options.loadTextURL?this.loadExternalText():this.buildOptionList()},loadExternalText:function(){this.showLoadingText(this.options.loadingText);var e=Object.extend({method:"get"},this.options.ajaxOptions);Object.extend(e,{parameters:"editorId="+encodeURIComponent(this.element.id),onComplete:Prototype.emptyFunction,onSuccess:function(e){this._text=e.responseText.strip(),this.buildOptionList()}.bind(this),onFailure:this.onFailure}),new Ajax.Request(this.options.loadTextURL,e)},buildOptionList:function(){this._form.removeClassName(this.options.loadingClassName),this._collection=this._collection.map((function(e){return 2===e.length?e:[e,e].flatten()}));var e,t="value"in this.options?this.options.value:this._text,n=this._collection.any(function(e){return e[0]==t}.bind(this));this._controls.editor.update(""),this._collection.each(function(i,o){(e=document.createElement("option")).value=i[0],e.selected=n?i[0]==t:0==o,e.appendChild(document.createTextNode(i[1])),this._controls.editor.appendChild(e)}.bind(this)),this._controls.editor.disabled=!1,Field.scrollFreeActivate(this._controls.editor)}}),Ajax.InPlaceEditor.prototype.initialize.dealWithDeprecatedOptions=function(e){function t(t,n){t in e||void 0===n||(e[t]=n)}e&&(t("cancelControl",e.cancelLink?"link":e.cancelButton?"button":e.cancelLink==e.cancelButton!=0&&void 0),t("okControl",e.okLink?"link":e.okButton?"button":e.okLink==e.okButton!=0&&void 0),t("highlightColor",e.highlightcolor),t("highlightEndColor",e.highlightendcolor))},Object.extend(Ajax.InPlaceEditor,{DefaultOptions:{ajaxOptions:{},autoRows:3,cancelControl:"link",cancelText:"cancel",clickToEditText:"Click to edit",externalControl:null,externalControlOnly:!1,fieldPostCreation:"activate",formClassName:"inplaceeditor-form",formId:null,highlightColor:"#ffff99",highlightEndColor:"#ffffff",hoverClassName:"",htmlResponse:!0,loadingClassName:"inplaceeditor-loading",loadingText:"Loading...",okControl:"button",okText:"ok",paramName:"value",rows:1,savingClassName:"inplaceeditor-saving",savingText:"Saving...",size:0,stripLoadedTextTags:!1,submitOnBlur:!1,textAfterControls:"",textBeforeControls:"",textBetweenControls:""},DefaultCallbacks:{callback:function(e){return Form.serialize(e)},onComplete:function(e,t){new Effect.Highlight(t,{startcolor:this.options.highlightColor,keepBackgroundImage:!0})},onEnterEditMode:null,onEnterHover:function(e){e.element.style.backgroundColor=e.options.highlightColor,e._effect&&e._effect.cancel()},onFailure:function(e,t){alert("Error communication with the server: "+e.responseText.stripTags())},onFormCustomization:null,onLeaveEditMode:null,onLeaveHover:function(e){e._effect=new Effect.Highlight(e.element,{startcolor:e.options.highlightColor,endcolor:e.options.highlightEndColor,restorecolor:e._originalBackground,keepBackgroundImage:!0})}},Listeners:{click:"enterEditMode",keydown:"checkForEscapeOrReturn",mouseover:"enterHover",mouseout:"leaveHover"}}),Ajax.InPlaceCollectionEditor.DefaultOptions={loadingCollectionText:"Loading options..."},Form.Element.DelayedObserver=Class.create({initialize:function(e,t,n){this.delay=t||.5,this.element=$(e),this.callback=n,this.timer=null,this.lastValue=$F(this.element),Event.observe(this.element,"keyup",this.delayedListener.bindAsEventListener(this))},delayedListener:function(e){this.lastValue!=$F(this.element)&&(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(this.onTimerEvent.bind(this),1e3*this.delay),this.lastValue=$F(this.element))},onTimerEvent:function(){this.timer=null,this.callback(this.element,$F(this.element))}}),Object.isUndefined(Effect))throw"dragdrop.js requires including script.aculo.us' effects.js library";var Droppables={drops:[],remove:function(e){this.drops=this.drops.reject((function(t){return t.element==$(e)}))},add:function(e,t){e=$(e);var n=Object.extend({greedy:!0,hoverclass:null,tree:!1},t||{});n.containment&&(n._containers=[],t=n.containment,Object.isArray(t)?t.each((function(e){n._containers.push($(e))})):n._containers.push($(t))),n.accept&&(n.accept=[n.accept].flatten()),Element.makePositioned(e),n.element=e,this.drops.push(n)},findDeepestChild:function(e){for(deepest=e[0],i=1;i<e.length;++i)Element.isParent(e[i].element,deepest.element)&&(deepest=e[i]);return deepest},isContained:function(e,t){var n=t.tree?e.treeNode:e.parentNode;return t._containers.detect((function(e){return n==e}))},isAffected:function(e,t,n){return n.element!=t&&(!n._containers||this.isContained(t,n))&&(!n.accept||Element.classNames(t).detect((function(e){return n.accept.include(e)})))&&Position.within(n.element,e[0],e[1])},deactivate:function(e){e.hoverclass&&Element.removeClassName(e.element,e.hoverclass),this.last_active=null},activate:function(e){e.hoverclass&&Element.addClassName(e.element,e.hoverclass),this.last_active=e},show:function(e,t){if(this.drops.length){var n,i=[];this.drops.each((function(n){Droppables.isAffected(e,t,n)&&i.push(n)})),0<i.length&&(n=Droppables.findDeepestChild(i)),this.last_active&&this.last_active!=n&&this.deactivate(this.last_active),n&&(Position.within(n.element,e[0],e[1]),n.onHover&&n.onHover(t,n.element,Position.overlap(n.overlap,n.element)),n!=this.last_active&&Droppables.activate(n))}},fire:function(e,t){if(this.last_active&&(Position.prepare(),this.isAffected([Event.pointerX(e),Event.pointerY(e)],t,this.last_active)&&this.last_active.onDrop))return this.last_active.onDrop(t,this.last_active.element,e),!0},reset:function(){this.last_active&&this.deactivate(this.last_active)}},Draggables={drags:[],observers:[],register:function(e){0==this.drags.length&&(this.eventMouseUp=this.endDrag.bindAsEventListener(this),this.eventMouseMove=this.updateDrag.bindAsEventListener(this),this.eventKeypress=this.keyPress.bindAsEventListener(this),Event.observe(document,"mouseup",this.eventMouseUp),Event.observe(document,"mousemove",this.eventMouseMove),Event.observe(document,"keypress",this.eventKeypress)),this.drags.push(e)},unregister:function(e){this.drags=this.drags.reject((function(t){return t==e})),0==this.drags.length&&(Event.stopObserving(document,"mouseup",this.eventMouseUp),Event.stopObserving(document,"mousemove",this.eventMouseMove),Event.stopObserving(document,"keypress",this.eventKeypress))},activate:function(e){e.options.delay?this._timeout=setTimeout(function(){Draggables._timeout=null,window.focus(),Draggables.activeDraggable=e}.bind(this),e.options.delay):(window.focus(),this.activeDraggable=e)},deactivate:function(){this.activeDraggable=null},updateDrag:function(e){if(this.activeDraggable){var t=[Event.pointerX(e),Event.pointerY(e)];this._lastPointer&&this._lastPointer.inspect()==t.inspect()||(this._lastPointer=t,this.activeDraggable.updateDrag(e,t))}},endDrag:function(e){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.activeDraggable&&(this._lastPointer=null,this.activeDraggable.endDrag(e),this.activeDraggable=null)},keyPress:function(e){this.activeDraggable&&this.activeDraggable.keyPress(e)},addObserver:function(e){this.observers.push(e),this._cacheObserverCallbacks()},removeObserver:function(e){this.observers=this.observers.reject((function(t){return t.element==e})),this._cacheObserverCallbacks()},notify:function(e,t,n){0<this[e+"Count"]&&this.observers.each((function(i){i[e]&&i[e](e,t,n)})),t.options[e]&&t.options[e](t,n)},_cacheObserverCallbacks:function(){["onStart","onEnd","onDrag"].each((function(e){Draggables[e+"Count"]=Draggables.observers.select((function(t){return t[e]})).length}))}},Draggable=Class.create({initialize:function(e,t){var n={handle:!1,reverteffect:function(e,t,n){new Effect.Move(e,{x:-n,y:-t,duration:.02*Math.sqrt(Math.abs(2^t)+Math.abs(2^n)),queue:{scope:"_draggable",position:"end"}})},endeffect:function(e){var t=Object.isNumber(e._opacity)?e._opacity:1;new Effect.Opacity(e,{duration:.2,from:.7,to:t,queue:{scope:"_draggable",position:"end"},afterFinish:function(){Draggable._dragging[e]=!1}})},zindex:1e3,revert:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,snap:!1,delay:0};t&&!Object.isUndefined(t.endeffect)||Object.extend(n,{starteffect:function(e){e._opacity=Element.getOpacity(e),Draggable._dragging[e]=!0,new Effect.Opacity(e,{duration:.2,from:e._opacity,to:.7})}}),t=Object.extend(n,t||{}),this.element=$(e),t.handle&&Object.isString(t.handle)&&(this.handle=this.element.down("."+t.handle,0)),this.handle||(this.handle=$(t.handle)),this.handle||(this.handle=this.element),!t.scroll||t.scroll.scrollTo||t.scroll.outerHTML||(t.scroll=$(t.scroll),this._isScrollChild=Element.childOf(this.element,t.scroll)),Element.makePositioned(this.element),this.options=t,this.dragging=!1,this.eventMouseDown=this.initDrag.bindAsEventListener(this),Event.observe(this.handle,"mousedown",this.eventMouseDown),Draggables.register(this)},destroy:function(){Event.stopObserving(this.handle,"mousedown",this.eventMouseDown),Draggables.unregister(this)},currentDelta:function(){return[parseInt(Element.getStyle(this.element,"left")||"0"),parseInt(Element.getStyle(this.element,"top")||"0")]},initDrag:function(e){if((Object.isUndefined(Draggable._dragging[this.element])||!Draggable._dragging[this.element])&&Event.isLeftClick(e)&&(!(tag_name=Event.element(e).tagName.toUpperCase())||"INPUT"!=tag_name&&"SELECT"!=tag_name&&"OPTION"!=tag_name&&"BUTTON"!=tag_name&&"TEXTAREA"!=tag_name)){var t=[Event.pointerX(e),Event.pointerY(e)],n=Position.cumulativeOffset(this.element);this.offset=[0,1].map((function(e){return t[e]-n[e]})),Draggables.activate(this),Event.stop(e)}},startDrag:function(e){if(this.dragging=!0,this.delta||(this.delta=this.currentDelta()),this.options.zindex&&(this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0),this.element.style.zIndex=this.options.zindex),this.options.ghosting&&(this._clone=this.element.cloneNode(!0),(this._originallyAbsolute="absolute"==this.element.getStyle("position"))||Position.absolutize(this.element),this.element.parentNode.insertBefore(this._clone,this.element)),this.options.scroll)if(this.options.scroll==window){var t=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=t.left,this.originalScrollTop=t.top}else this.originalScrollLeft=this.options.scroll.scrollLeft,this.originalScrollTop=this.options.scroll.scrollTop;Draggables.notify("onStart",this,e),this.options.starteffect&&this.options.starteffect(this.element)},updateDrag:function(a,b){if(this.dragging||this.startDrag(a),this.options.quiet||(Position.prepare(),Droppables.show(b,this.element)),Draggables.notify("onDrag",this,a),this.draw(b),this.options.change&&this.options.change(this),this.options.scroll){if(this.stopScrolling(),this.options.scroll==window)with(this._getWindowScroll(this.options.scroll))var c=[left,top,left+width,top+height];else c=Position.page(this.options.scroll),c[0]+=this.options.scroll.scrollLeft+Position.deltaX,c[1]+=this.options.scroll.scrollTop+Position.deltaY,c.push(c[0]+this.options.scroll.offsetWidth),c.push(c[1]+this.options.scroll.offsetHeight);var d=[0,0];b[0]<c[0]+this.options.scrollSensitivity&&(d[0]=b[0]-(c[0]+this.options.scrollSensitivity)),b[1]<c[1]+this.options.scrollSensitivity&&(d[1]=b[1]-(c[1]+this.options.scrollSensitivity)),b[0]>c[2]-this.options.scrollSensitivity&&(d[0]=b[0]-(c[2]-this.options.scrollSensitivity)),b[1]>c[3]-this.options.scrollSensitivity&&(d[1]=b[1]-(c[3]-this.options.scrollSensitivity)),this.startScrolling(d)}Prototype.Browser.WebKit&&window.scrollBy(0,0),Event.stop(a)},finishDrag:function(e,t){if(this.dragging=!1,this.options.quiet){Position.prepare();var n=[Event.pointerX(e),Event.pointerY(e)];Droppables.show(n,this.element)}this.options.ghosting&&(this._originallyAbsolute||Position.relativize(this.element),delete this._originallyAbsolute,Element.remove(this._clone),this._clone=null),n=!1,t&&((n=Droppables.fire(e,this.element))||(n=!1)),n&&this.options.onDropped&&this.options.onDropped(this.element),Draggables.notify("onEnd",this,e),(e=this.options.revert)&&Object.isFunction(e)&&(e=e(this.element)),t=this.currentDelta(),e&&this.options.reverteffect?(0==n||"failure"!=e)&&this.options.reverteffect(this.element,t[1]-this.delta[1],t[0]-this.delta[0]):this.delta=t,this.options.zindex&&(this.element.style.zIndex=this.originalZ),this.options.endeffect&&this.options.endeffect(this.element),Draggables.deactivate(this),Droppables.reset()},keyPress:function(e){e.keyCode==Event.KEY_ESC&&(this.finishDrag(e,!1),Event.stop(e))},endDrag:function(e){this.dragging&&(this.stopScrolling(),this.finishDrag(e,!0),Event.stop(e))},draw:function(e){var t=Position.cumulativeOffset(this.element);if(this.options.ghosting){var n=Position.realOffset(this.element);t[0]+=n[0]-Position.deltaX,t[1]+=n[1]-Position.deltaY}n=this.currentDelta(),t[0]-=n[0],t[1]-=n[1],this.options.scroll&&this.options.scroll!=window&&this._isScrollChild&&(t[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft,t[1]-=this.options.scroll.scrollTop-this.originalScrollTop),n=[0,1].map(function(n){return e[n]-t[n]-this.offset[n]}.bind(this)),this.options.snap&&(n=Object.isFunction(this.options.snap)?this.options.snap(n[0],n[1],this):Object.isArray(this.options.snap)?n.map(function(e,t){return(e/this.options.snap[t]).round()*this.options.snap[t]}.bind(this)):n.map(function(e){return(e/this.options.snap).round()*this.options.snap}.bind(this)));var i=this.element.style;this.options.constraint&&"horizontal"!=this.options.constraint||(i.left=n[0]+"px"),this.options.constraint&&"vertical"!=this.options.constraint||(i.top=n[1]+"px"),"hidden"==i.visibility&&(i.visibility="")},stopScrolling:function(){this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=null,Draggables._lastScrollPointer=null)},startScrolling:function(e){(e[0]||e[1])&&(this.scrollSpeed=[e[0]*this.options.scrollSpeed,e[1]*this.options.scrollSpeed],this.lastScrolled=new Date,this.scrollInterval=setInterval(this.scroll.bind(this),10))},scroll:function(){var a=new Date,b=a-this.lastScrolled;if(this.lastScrolled=a,this.options.scroll==window)with(this._getWindowScroll(this.options.scroll))(this.scrollSpeed[0]||this.scrollSpeed[1])&&(a=b/1e3,this.options.scroll.scrollTo(left+a*this.scrollSpeed[0],top+a*this.scrollSpeed[1]));else this.options.scroll.scrollLeft+=this.scrollSpeed[0]*b/1e3,this.options.scroll.scrollTop+=this.scrollSpeed[1]*b/1e3;Position.prepare(),Droppables.show(Draggables._lastPointer,this.element),Draggables.notify("onDrag",this),this._isScrollChild&&(Draggables._lastScrollPointer=Draggables._lastScrollPointer||$A(Draggables._lastPointer),Draggables._lastScrollPointer[0]+=this.scrollSpeed[0]*b/1e3,Draggables._lastScrollPointer[1]+=this.scrollSpeed[1]*b/1e3,0>Draggables._lastScrollPointer[0]&&(Draggables._lastScrollPointer[0]=0),0>Draggables._lastScrollPointer[1]&&(Draggables._lastScrollPointer[1]=0),this.draw(Draggables._lastScrollPointer)),this.options.change&&this.options.change(this)},_getWindowScroll:function(a){with(a.document){if(a.document.documentElement&&documentElement.scrollTop)var b=documentElement.scrollTop,c=documentElement.scrollLeft;else a.document.body&&(b=body.scrollTop,c=body.scrollLeft);if(a.innerWidth){var d=a.innerWidth;a=a.innerHeight}else a.document.documentElement&&documentElement.clientWidth?(d=documentElement.clientWidth,a=documentElement.clientHeight):(d=body.offsetWidth,a=body.offsetHeight)}return{top:b,left:c,width:d,height:a}}});Draggable._dragging={};var SortableObserver=Class.create({initialize:function(e,t){this.element=$(e),this.observer=t,this.lastValue=Sortable.serialize(this.element)},onStart:function(){this.lastValue=Sortable.serialize(this.element)},onEnd:function(){Sortable.unmark(),this.lastValue!=Sortable.serialize(this.element)&&this.observer(this.element)}}),Sortable={SERIALIZE_RULE:/^[^_\-](?:[A-Za-z0-9\-_]*)[_](.*)$/,sortables:{},_findRootElement:function(e){for(;"BODY"!=e.tagName.toUpperCase();){if(e.id&&Sortable.sortables[e.id])return e;e=e.parentNode}},options:function(e){if(e=Sortable._findRootElement($(e)))return Sortable.sortables[e.id]},destroy:function(e){e=$(e),(e=Sortable.sortables[e.id])&&(Draggables.removeObserver(e.element),e.droppables.each((function(e){Droppables.remove(e)})),e.draggables.invoke("destroy"),delete Sortable.sortables[e.element.id])},create:function(e,t){e=$(e);var n=Object.extend({element:e,tag:"li",dropOnEmpty:!1,tree:!1,treeTag:"ul",overlap:"vertical",constraint:"vertical",containment:e,handle:!1,only:!1,delay:0,hoverclass:null,ghosting:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,format:this.SERIALIZE_RULE,elements:!1,handles:!1,onChange:Prototype.emptyFunction,onUpdate:Prototype.emptyFunction},t||{});this.destroy(e);var i={revert:!0,quiet:n.quiet,scroll:n.scroll,scrollSpeed:n.scrollSpeed,scrollSensitivity:n.scrollSensitivity,delay:n.delay,ghosting:n.ghosting,constraint:n.constraint,handle:n.handle};n.starteffect&&(i.starteffect=n.starteffect),n.reverteffect?i.reverteffect=n.reverteffect:n.ghosting&&(i.reverteffect=function(e){e.style.top=0,e.style.left=0}),n.endeffect&&(i.endeffect=n.endeffect),n.zindex&&(i.zindex=n.zindex);var o={overlap:n.overlap,containment:n.containment,tree:n.tree,hoverclass:n.hoverclass,onHover:Sortable.onHover},r={onHover:Sortable.onEmptyHover,overlap:n.overlap,containment:n.containment,hoverclass:n.hoverclass};Element.cleanWhitespace(e),n.draggables=[],n.droppables=[],(n.dropOnEmpty||n.tree)&&(Droppables.add(e,r),n.droppables.push(e)),(n.elements||this.findElements(e,n)||[]).each((function(t,r){r=n.handles?$(n.handles[r]):n.handle?$(t).select("."+n.handle)[0]:t,n.draggables.push(new Draggable(t,Object.extend(i,{handle:r}))),Droppables.add(t,o),n.tree&&(t.treeNode=e),n.droppables.push(t)})),n.tree&&(Sortable.findTreeElements(e,n)||[]).each((function(t){Droppables.add(t,r),t.treeNode=e,n.droppables.push(t)})),this.sortables[e.id]=n,Draggables.addObserver(new SortableObserver(e,n.onUpdate))},findElements:function(e,t){return Element.findChildren(e,t.only,!!t.tree,t.tag)},findTreeElements:function(e,t){return Element.findChildren(e,t.only,!!t.tree,t.treeTag)},onHover:function(e,t,n){if(!(Element.isParent(t,e)||.33<n&&.66>n&&Sortable.options(t).tree))if(.5<n)Sortable.mark(t,"before"),t.previousSibling!=e&&(n=e.parentNode,e.style.visibility="hidden",t.parentNode.insertBefore(e,t),t.parentNode!=n&&Sortable.options(n).onChange(e),Sortable.options(t.parentNode).onChange(e));else{Sortable.mark(t,"after");var i=t.nextSibling||null;i!=e&&(n=e.parentNode,e.style.visibility="hidden",t.parentNode.insertBefore(e,i),t.parentNode!=n&&Sortable.options(n).onChange(e),Sortable.options(t.parentNode).onChange(e))}},onEmptyHover:function(e,t,n){var i=e.parentNode,o=Sortable.options(t);if(!Element.isParent(t,e)){var r=Sortable.findElements(t,{tag:o.tag,only:o.only}),s=null;if(r){var a=Element.offsetSize(t,o.overlap)*(1-n);for(n=0;n<r.length;n+=1){if(!(0<=a-Element.offsetSize(r[n],o.overlap))){s=0<=a-Element.offsetSize(r[n],o.overlap)/2?n+1<r.length?r[n+1]:null:r[n];break}a-=Element.offsetSize(r[n],o.overlap)}}t.insertBefore(e,s),Sortable.options(i).onChange(e),o.onChange(e)}},unmark:function(){Sortable._marker&&Sortable._marker.hide()},mark:function(e,t){var n=Sortable.options(e.parentNode);if(!n||n.ghosting){Sortable._marker||(Sortable._marker=($("dropmarker")||Element.extend(document.createElement("DIV"))).hide().addClassName("dropmarker").setStyle({position:"absolute"}),document.getElementsByTagName("body").item(0).appendChild(Sortable._marker));var i=Position.cumulativeOffset(e);Sortable._marker.setStyle({left:i[0]+"px",top:i[1]+"px"}),"after"==t&&("horizontal"==n.overlap?Sortable._marker.setStyle({left:i[0]+e.clientWidth+"px"}):Sortable._marker.setStyle({top:i[1]+e.clientHeight+"px"})),Sortable._marker.show()}},_tree:function(e,t,n){for(var i=Sortable.findElements(e,t)||[],o=0;o<i.length;++o){var r=i[o].id.match(t.format);r&&((r={id:encodeURIComponent(r?r[1]:null),element:e,parent:n,children:[],position:n.children.length,container:$(i[o]).down(t.treeTag)}).container&&this._tree(r.container,t,r),n.children.push(r))}return n},tree:function(e,t){e=$(e);var n=this.options(e);return t=Object.extend({tag:n.tag,treeTag:n.treeTag,only:n.only,name:e.id,format:n.format},t||{}),Sortable._tree(e,t,{id:null,parent:null,children:[],container:e,position:0})},_constructIndex:function(e){var t="";do{e.id&&(t="["+e.position+"]"+t)}while(null!=(e=e.parent));return t},sequence:function(e,t){e=$(e);var n=Object.extend(this.options(e),t||{});return $(this.findElements(e,n)||[]).map((function(e){return e.id.match(n.format)?e.id.match(n.format)[1]:""}))},setSequence:function(e,t,n){e=$(e);var i=Object.extend(this.options(e),n||{}),o={};this.findElements(e,i).each((function(e){e.id.match(i.format)&&(o[e.id.match(i.format)[1]]=[e,e.parentNode]),e.parentNode.removeChild(e)})),t.each((function(e){var t=o[e];t&&(t[1].appendChild(t[0]),delete o[e])}))},serialize:function(e,t){e=$(e);var n=Object.extend(Sortable.options(e),t||{}),i=encodeURIComponent(t&&t.name?t.name:e.id);return n.tree?Sortable.tree(e,t).children.map((function(e){return[i+Sortable._constructIndex(e)+"[id]="+encodeURIComponent(e.id)].concat(e.children.map(arguments.callee))})).flatten().join("&"):Sortable.sequence(e,t).map((function(e){return i+"[]="+encodeURIComponent(e)})).join("&")}};if(Element.isParent=function(e,t){return!(!e.parentNode||e==t)&&(e.parentNode==t||Element.isParent(e.parentNode,t))},Element.findChildren=function(e,t,n,i){if(!e.hasChildNodes())return null;i=i.toUpperCase(),t&&(t=[t].flatten());var o=[];return $A(e.childNodes).each((function(e){!e.tagName||e.tagName.toUpperCase()!=i||t&&!Element.classNames(e).detect((function(e){return t.include(e)}))||o.push(e),n&&(e=Element.findChildren(e,t,n,i))&&o.push(e)})),0<o.length?o.flatten():[]},Element.offsetSize=function(e,t){return e["offset"+("vertical"==t||"height"==t?"Height":"Width")]},Array.prototype.some=function(e,t){e=e||Prototype.K;for(var n=0,i=this.length;n<i;n++)if(n in this&&e.call(t,this[n],n,this))return!0;return!1},Prototype.Browser.IE6=-1<navigator.userAgent.indexOf("MSIE 6."),Prototype.Browser.IE7=-1<navigator.userAgent.indexOf("MSIE 7."),Prototype.Browser.IE8=-1<navigator.userAgent.indexOf("MSIE 8."),Prototype.Browser.IE9=-1<navigator.userAgent.indexOf("MSIE 9."),Prototype.Browser.IE10=-1<navigator.userAgent.indexOf("MSIE 10."),Prototype.Browser.IE8&&(Element._attributeTranslations.write.names.class=void 0),Prototype.Browser.WebKit){var indexOfVersion=navigator.userAgent.indexOf("Version");if(-1<indexOfVersion){var versionString=navigator.userAgent.substr(indexOfVersion,13),version=versionString.split("/")[1];version&&(version=parseInt(version.gsub(".","")),503<=version&&(Prototype.Browser.Safari503=!0))}}Ajax.CachedAutocompleter=Class.create(),Object.extend(Object.extend(Ajax.CachedAutocompleter.prototype,Autocompleter.Base.prototype),{initialize:function(e,t,n,i){this.baseInitialize(e,t,i),this.options.asynchronous=!0,this.options.onComplete=this.onComplete.bind(this),this.options.defaultParams=this.options.parameters||null,this.url=n,this.cache={},this.options.forceActivation&&(Event.stopObserving(this.element,"keydown"),Event.observe(this.element,"keydown",this.onKeyPressWithForcedActivation.bindAsEventListener(this)),Event.observe(this.element,"focus",this.onFocus.bindAsEventListener(this)))},getUpdatedChoices:function(){var e=this.getToken().toLowerCase();this.cache[e]?this.updateChoices(this.cache[e]):(this.startIndicator(),entry=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(e),this.options.parameters=this.options.callback?this.options.callback(this.element,entry):entry,this.options.defaultParams&&(this.options.parameters+="&"+this.options.defaultParams),new Ajax.Request(this.url,this.options))},onComplete:function(e){this.updateChoices(this.cache[e.request.parameters.search]=e.responseText)},markPrevious:function(){0<this.index?this.index--:(this.index=this.entryCount-1,this.update.scrollTop=this.update.scrollHeight),selection=this.getEntry(this.index),selection_top=selection.offsetTop,selection_top<this.update.scrollTop&&(this.update.scrollTop-=selection.offsetHeight)},markNext:function(){this.index<this.entryCount-1?this.index++:(this.index=0,this.update.scrollTop=0),selection=this.getEntry(this.index),selection_bottom=selection.offsetTop+selection.offsetHeight,selection_bottom>this.update.scrollTop+this.update.offsetHeight&&(this.update.scrollTop+=selection.offsetHeight)},selectEntry:function(){if(0<=this.index)this.active=!1,this.updateElement(this.getCurrentEntry());else{try{this.element.form.onsubmit()}catch(e){}this.element.form.submit()}},onFocus:function(e){this.hasFocus=!0,this.oldElementValue==this.element.value&&this.element.value.length>=this.options.minChars&&(0<this.entryCount?this.render():this.show())},onKeyPressWithForcedActivation:function(e){var t=e.keyCode==Event.KEY_TAB||e.keyCode==Event.KEY_RETURN||0<Prototype.Browser.WebKit&&0===e.keyCode,n=this.element.value.length>=this.options.minChars;!this.active&&t&&n?(Event.stop(e),this.observer&&clearTimeout(this.observer),this.changed=!1,this.hasFocus=!0,this.getUpdatedChoices()):this.onKeyPress(e)},updateChoices:function(e){if(!this.changed&&this.hasFocus){if(this.update.innerHTML=e,Element.cleanWhitespace(this.update),Element.cleanWhitespace(this.update.down()),this.update.firstChild&&this.update.down().childNodes)for(this.entryCount=this.update.down().childNodes.length,e=0;e<this.entryCount;e++){var t=this.getEntry(e);t.autocompleteIndex=e,this.addObservers(t)}else this.entryCount=0;this.stopIndicator(),this.update.scrollTop=0,this.index=this.options.noAutoDefault?-1:0,1==this.entryCount&&this.options.autoSelect?(this.selectEntry(),this.hide()):this.render()}}}),Element.collectTextNodesIgnoreClass=function(e,t){return $A($(e).childNodes).collect((function(e){return 3==e.nodeType?e.nodeValue:e.hasChildNodes()&&!Element.hasClassName(e,t)?Element.collectTextNodesIgnoreClass(e,t):""})).flatten().join("").strip()},Element.Methods.collectTextNodesIgnoreClass=Element.collectTextNodesIgnoreClass,Element.addMethods(Element.Methods),HandlerQueue=function(){var e=[];return{add:function(t){e.push(t)},handle:function(){for(var t=e.length-1;0<=t;t--)e[t].apply(this,arguments)}}},Number.prototype.withDelimiters=function(e,t){e||(e=","),t||(t=1e3);for(var n=[],i=Math.floor(this);i;)n.unshift(i%t),i=Math.floor(i/t);return[n.shift()].concat(n.map((function(e){return e.toPaddedString((t-1+"").length)}))).join(e)},Ajax.Poller=function(e,t,n,i){this.initialize(e,t,n,i)},Ajax.Poller.prototype={initialize:function(e,t,n,i){this._stopped=!0,n=n||5e3,i=i||3e4;var o=this,r=Object.extend(Object.extend({method:"get"},t),{on202:function(){o._stopped||(setTimeout(o._poll,n),t.on202&&t.on202.apply(t,arguments))},onFailure:function(){o._stopped||(setTimeout(o._poll,i),t.onFailure&&t.onFailure.apply(t,arguments))}});this._poll=function(){new Ajax.Request(e,r)}},start:function(e){this._stopped=!1,setTimeout(this._poll.bind(this),e||0)},stop:function(){this._stopped=!0}},Element.Methods.selectedOptionValue=function(e){if("SELECT"===(e=$(e)).tagName)return(e=e.select("option")[e.selectedIndex])&&e.readAttribute("value")},Element.Methods.selectOptionValue=function(e,t){"SELECT"==(e=$(e)).tagName&&(e.selectedIndex=e.select("option").pluck("value").indexOf(t))},Element.addMethods(Element.Methods),function(e,t){var n=0;Function.prototype.toGlobalReference=function(){var t=this,i="_tgrFn"+n++;return e[i]=function(){try{delete e[i]}catch(t){e[i]=void 0}t()},i}}(this),jQuery.ajaxPrefilter((function(e,t,n){e.crossDomain||(e=jQuery('meta[name="csrf-token"]').attr("content"))&&n.setRequestHeader("X-CSRF-Token",e)})),jQuery.csrfPost=function(e){return e=jQuery.extend({},e,{type:"POST",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",jQuery('meta[name="csrf-token"]').attr("content"))}}),jQuery.ajax(e)},jQuery.csrfDelete=function(e){return e=jQuery.extend({},e,{type:"DELETE",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",jQuery('meta[name="csrf-token"]').attr("content"))}}),jQuery.ajax(e)};var RFC822SingleEmailRegex=/^(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x22(?:[^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(?:\x2e(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x22(?:[^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x5b(?:[^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(?:\x2e(?:[^\x00-\x2a\x2c\x2e\x2f\x3a-\x40\x5b-\x5e\x60\x7b-\xff]+|\x5b(?:[^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))+$/;function makeDynamicFrameTarget(e){var t="dynamic_frame_"+ +new Date,n=new Element("iframe",{name:t}).setStyle({display:"none"});$(document.body).insert(n),e.target=t}function makeDynamicFrameTargetForUrl(e){return e=new Element("form",{action:e,method:"post"}).setStyle({display:"none"}),$(document.body).insert(e),makeDynamicFrameTarget(e),e}document.onunload||(document.onunload=function(){});var lastFacebookStatus="unknown";function disableFacebookButtons(){$$("a.sprite_facebook").each((function(e){if(e.hide(),!e.next(".spinner")){var t=e.hasClassName("no_inverse");e.insert({after:'<span class="spinner facebook_spinner'+(t?"":" spinner_inverse")+'">loading&hellip;</span>'})}}))}function reenableFacebookButtons(){$$("a.sprite_facebook").each((function(e){e.show(),(e=e.next(".spinner"))&&e.remove()}))}function showFacebookErrorLightbox(){if(active_user.isAuthenticated())var e='<h1 class="phl">There\'s been an error!</h1><p class="regtext mhl mvm">The connection with Facebook\'s servers has timed out. Please refresh your page and try the linking process again.</p>';else{e='<h1 class="phl">There\'s been an error!</h1><p class="regtext mhl mvm">We were unable to create a Kongregate account with Facebook.</p><p class="regtext mhl mvm">Click on "Create My Account" below to create a Kongregate account using your email address instead.</p><a id="error_signup_link" href="#" class="submission_button mhl mvm">Create My Account</a>';var t=function(){$("error_signup_link").observe("click",(function(e){e.preventDefault();try{lightbox.prototype.shutdown()}catch(e){}lightbox.prototype.initializeKongregateLightboxFromAjax("/accounts/new/behind_login?no_facebook_connect=true&game_id="+active_user.gameId(),{afterStaticContentLoad:function(){lightbox.prototype.toggleRegistration(),$("lightbox_email_register").show(),$("lightbox_facebook_register").hide(),$("lightbox").removeClassName("lightbox_login")}})}))}}try{lightbox.prototype.shutdown()}catch(e){}lightbox.prototype.initializeKongregateLightboxFromContent(e,{done_class_name:"lightbox_login",afterStaticContentLoad:t}),reenableFacebookButtons()}function showMatchingUserForm(e,t,n){e="/facebook_connection/login_lightbox?username="+e+"&matched_on="+t,active_user.gameId()&&(e+="&game_id="+active_user.gameId());try{lightbox.prototype.shutdown()}catch(e){}lightbox.prototype.initializeKongregateLightboxFromAjax(e,{done_class_name:"lightbox_login"})}function write_to_document(e){document.write(e)}function toggleTabs(e,t){Element.show(e),Element.show(e+"_title"),Element.show(t+"_link"),Element.hide(t),Element.hide(t+"_title"),Element.hide(e+"_link"),$(e+"_tab").className="tab current",$(t+"_tab").className="tab"}function showChatSelector(e,t){new lightbox("/rooms/change?game_rooms="+e+"&game_id="+t)}function limitText(e,t){e.value.length>t&&(e.value=e.value.substring(0,t))}function limitCheckedBoxes(e,t,n){for(var i=0,o=0;o<e.length;o++)i+=e[o].checked?1:0;i>t&&(e[n].checked=!1)}function observePopup(e,t,n,i){var o=window.open(e,"",n||""),r=setInterval((function(){try{o.closed&&(clearInterval(r),i())}catch(e){clearInterval(r)}}),100);return o}function autoTruncate(e,t){t||(t=1),$$("."+e).each((function(e){var n=e.down("a"),i=n.getStyle("font-size");e=e.getWidth();var o=11;i&&(o=parseInt(i.sub("px",""),10)),n.update(n.innerHTML.truncate(Math.round(e/(o-4.5)*t)))}))}function insertTrackingPixelWithTimestamp(e){stamp=+new Date,document.write('<img src="'+e+stamp+'?"/>')}Prototype.Platform={Windows:!!navigator.platform.match(/Win/),Macintosh:!!navigator.platform.match(/Mac/),Linux:!!navigator.platform.match(/Linux/)},Hash.prototype.getWithDefault=function(e,t){var n=this.get(e);return void 0===n?this.set(e,t()):n},Hash.prototype.getOrSet=function(e,t){var n=this.get(e);return void 0===n?this.set(e,t):n},Element.addMethods("textarea",{positionCaretAtEnd:function(e){if((e=$(e)).createTextRange){var t=e.createTextRange();t.move("character",e.value.length),t.select()}else null!==e.selectionStart?(t=e.value.length,e.focus(),e.setSelectionRange(t,t)):(e.focus(),e.value+="");return e}}),Element.addMethods({ieHappyHide:function(e){return(e=$(e)).style.display="none",e.style.visibility="hidden",e},ieHappyShow:function(e){return(e=$(e)).style.display="",e.style.visibility="visible",e},setText:function(e,t){return(e=$(e))[Prototype.Browser.Gecko?"textContent":"innerText"]=t,e}}),Prototype.Browser.Gecko&&Event.observe(document,"keypress",(function(e){if(e.keyCode==Event.KEY_TAB&&-1<"select,input,button,textarea".indexOf(e.target.nodeName.toLowerCase())){var t=$(e.target),n=t.up("form").getElements().findAll((function(e){return"hidden"!=e.type&&!e.disabled}));t=n.indexOf(t);var i=null;(i=e.shiftKey?0<=t-1?n[t-1]:null:t+1<n.length?n[t+1]:null)&&(e.stop(),i.focus())}})),"undefined"==typeof Control&&(Control={});var $proc=function(e){return"function"==typeof e?e:function(){return e}},$value=function(e){return"function"==typeof e?e():e};Object.Event={extend:function(e){e._objectEventSetup=function(e){this._observers=this._observers||{},this._observers[e]=this._observers[e]||[]},e.observe=function(e,t){if("string"==typeof e&&void 0!==t)this._objectEventSetup(e),this._observers[e].include(t)||this._observers[e].push(t);else for(var n in e)this.observe(n,e[n])},e.stopObserving=function(e,t){this._objectEventSetup(e),e&&t?this._observers[e]=this._observers[e].without(t):e?this._observers[e]=[]:this._observers={}},e.observeOnce=function(e,t){var n=function(){t.apply(this,arguments),this.stopObserving(e,n)}.bind(this);this._objectEventSetup(e),this._observers[e].push(n)},e.notify=function(e){this._objectEventSetup(e);var t=[],n=$A(arguments).slice(1);try{for(var i=0;i<this._observers[e].length;++i)t.push(this._observers[e][i].apply(this._observers[e][i],n)||null)}catch(e){if(e==$break)return!1;throw e}return t},e.prototype&&(e.prototype._objectEventSetup=e._objectEventSetup,e.prototype.observe=e.observe,e.prototype.stopObserving=e.stopObserving,e.prototype.observeOnce=e.observeOnce,e.prototype.notify=function(t){if(e.notify){var n=$A(arguments).slice(1);n.unshift(this),n.unshift(t),e.notify.apply(e,n)}this._objectEventSetup(t),n=$A(arguments).slice(1);var i=[];try{this.options&&this.options[t]&&"function"==typeof this.options[t]&&i.push(this.options[t].apply(this,n)||null);for(var o=0;o<this._observers[t].length;++o)i.push(this._observers[t][o].apply(this._observers[t][o],n)||null)}catch(e){if(e==$break)return!1;throw e}return i})}},Element.addMethods({observeOnce:function(e,t,n){var i=function(){n.apply(this,arguments),Element.stopObserving(e,t,i)};Element.observe(e,t,i)}}),document.observe("mousewheel",(function(e){var t;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t&&e.element().fire("mouse:wheel",{delta:t}).stopped)return e.stop(),!1}));var IframeShim=Class.create({initialize:function(){this.element=new Element("iframe",{style:"position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);display:none",src:"javascript:void(0);",frameborder:0}),$(document.body).insert(this.element)},hide:function(){return this.element.hide(),this},show:function(){return this.element.show(),this},positionUnder:function(e){var t=(e=$(e)).cumulativeOffset(),n=e.getDimensions();return this.element.setStyle({left:t[0]+"px",top:t[1]+"px",width:n.width+"px",height:n.height+"px",zIndex:e.getStyle("zIndex")-1}).show(),this},setBounds:function(e){for(prop in e)e[prop]+="px";return this.element.setStyle(e),this},destroy:function(){return this.element&&this.element.remove(),this}});if(void 0!==Draggable&&(Draggable.prototype.draw=function(e){var t=Position.cumulativeOffset(this.element);if(this.options.ghosting){var n=Position.realOffset(this.element);t[0]+=n[0]-Position.deltaX,t[1]+=n[1]-Position.deltaY}if(n=this.currentDelta(),t[0]-=n[0],t[1]-=n[1],this.options.scroll&&this.options.scroll!=window&&this._isScrollChild&&(t[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft,t[1]-=this.options.scroll.scrollTop-this.originalScrollTop),n=[0,1].map(function(n){return e[n]-t[n]-this.offset[n]}.bind(this)),this.options.snap&&(n="function"==typeof this.options.snap?this.options.snap(n[0],n[1],this):this.options.snap instanceof Array?n.map(function(e,t){return Math.round(e/this.options.snap[t])*this.options.snap[t]}.bind(this)):n.map(function(e){return Math.round(e/this.options.snap)*this.options.snap}.bind(this))),this.options.onDraw)this.options.onDraw.bind(this)(n);else{var i=this.element.style;if(this.options.constrainToViewport){var o=document.viewport.getDimensions(),r=this.element.getDimensions(),s=parseInt(this.element.getStyle("margin-top")),a=parseInt(this.element.getStyle("margin-left"));o=[[0-a,0-s],[o.width-r.width-a,o.height-r.height-s]],this.options.constraint&&"horizontal"!=this.options.constraint||(this.element.style.left=n[0]>=o[0][0]&&n[0]<=o[1][0]?n[0]+"px":(n[0]<o[0][0]?o[0][0]:o[1][0])+"px"),this.options.constraint&&"vertical"!=this.options.constraint||(this.element.style.top=n[1]>=o[0][1]&&n[1]<=o[1][1]?n[1]+"px":(n[1]<=o[0][1]?o[0][1]:o[1][1])+"px")}else this.options.constraint&&"horizontal"!=this.options.constraint||(i.left=n[0]+"px"),this.options.constraint&&"vertical"!=this.options.constraint||(i.top=n[1]+"px");"hidden"==i.visibility&&(i.visibility="")}}),void 0===Prototype)throw"Control.Window requires Prototype to be loaded.";if(void 0===IframeShim)throw"Control.Window requires IframeShim to be loaded.";if(void 0===Object.Event)throw"Control.Window requires Object.Event to be loaded.";function CommentsController(e){this.initialize(e)}Control.Window=Class.create({initialize:function(e,t){Control.Window.windows.push(this),this.remoteContentLoaded=this.ajaxRequest=this.sourceContainer=this.href=this.isOpen=this.container=!1,this.numberInSequence=Control.Window.windows.length+1,this.indicator=!1,this.effects={fade:!1,appear:!1},this.indicatorEffects={fade:!1,appear:!1},this.options=Object.extend({beforeOpen:Prototype.emptyFunction,afterOpen:Prototype.emptyFunction,beforeClose:Prototype.emptyFunction,afterClose:Prototype.emptyFunction,height:null,width:null,className:!1,position:"center",offsetLeft:0,offsetTop:0,iframe:!1,hover:!1,indicator:!1,closeOnClick:!1,iframeshim:!0,fade:!1,fadeDuration:.75,draggable:!1,onDrag:Prototype.emptyFunction,resizable:!1,minHeight:!1,minWidth:!1,maxHeight:!1,maxWidth:!1,onResize:Prototype.emptyFunction,constrainToViewport:!1,method:"post",parameters:{},onComplete:Prototype.emptyFunction,onSuccess:Prototype.emptyFunction,onFailure:Prototype.emptyFunction,onException:Prototype.emptyFunction,onRemoteContentLoaded:Prototype.emptyFunction,insertRemoteContentAt:!1},t||{}),this.indicator=!!this.options.indicator&&$(this.options.indicator),e&&("string"==typeof e&&e.match(Control.Window.uriRegex)?this.href=e:(this.container=$(e),this.createDefaultContainer(e),this.container&&(this.container.readAttribute("href")&&""!=this.container.readAttribute("href")||this.options.hover&&!0!==this.options.hover)&&(this.options.hover&&!0!==this.options.hover?this.sourceContainer=$(this.options.hover):(this.sourceContainer=this.container,this.href=this.container.readAttribute("href"),(t=this.href.match(/^#(.+)$/))&&t[1]?(this.container=$(t[1]),this.href=!1):this.container=!1),this.sourceContainerOpenHandler=function(e){return this.open(e),e.stop(),!1}.bindAsEventListener(this),this.sourceContainerCloseHandler=function(e){this.close(e)}.bindAsEventListener(this),this.sourceContainerMouseMoveHandler=function(e){this.position(e)}.bindAsEventListener(this),this.options.hover?(this.sourceContainer.observe("mouseenter",this.sourceContainerOpenHandler),this.sourceContainer.observe("mouseleave",this.sourceContainerCloseHandler),"mouse"==this.options.position&&this.sourceContainer.observe("mousemove",this.sourceContainerMouseMoveHandler)):this.sourceContainer.observe("click",this.sourceContainerOpenHandler)))),this.createDefaultContainer(e),!1===this.options.insertRemoteContentAt&&(this.options.insertRemoteContentAt=this.container),e={margin:0,position:"absolute",zIndex:Control.Window.initialZIndexForWindow()},this.options.width&&(e.width=$value(this.options.width)+"px"),this.options.height&&(e.height=$value(this.options.height)+"px"),this.container.setStyle(e),this.options.className&&this.container.addClassName(this.options.className),this.positionHandler=this.position.bindAsEventListener(this),this.outOfBoundsPositionHandler=this.ensureInBounds.bindAsEventListener(this),this.bringToFrontHandler=this.bringToFront.bindAsEventListener(this),this.container.observe("mousedown",this.bringToFrontHandler),this.container.hide(),this.closeHandler=this.close.bindAsEventListener(this),this.options.iframeshim&&(this.iFrameShim=new IframeShim,this.iFrameShim.hide()),this.applyResizable(),this.applyDraggable(),Event.observe(window,"resize",this.outOfBoundsPositionHandler),this.notify("afterInitialize")},open:function(e){if(this.isOpen)return this.bringToFront(),!1;if(!1===this.notify("beforeOpen"))return!1;if(this.options.closeOnClick&&(!0===this.options.closeOnClick?this.closeOnClickContainer=$(document.body):"container"==this.options.closeOnClick?this.closeOnClickContainer=this.container:"overlay"==this.options.closeOnClick?(Control.Overlay.load(),this.closeOnClickContainer=Control.Overlay.container):this.closeOnClickContainer=$(this.options.closeOnClick),this.closeOnClickContainer.observe("click",this.closeHandler)),this.href&&!this.options.iframe&&!this.remoteContentLoaded)return this.remoteContentLoaded=!0,this.href.match(/\.(jpe?g|gif|png|tiff?)$/i)?((e=new Element("img")).observe("load",function(e){this.getRemoteContentInsertionTarget().insert(e),this.position(),!1!==this.notify("onRemoteContentLoaded")&&(this.options.indicator&&this.hideIndicator(),this.finishOpen())}.bind(this,e)),e.writeAttribute("src",this.href)):this.ajaxRequest||(this.options.indicator&&this.showIndicator(),this.ajaxRequest=new Ajax.Request(this.href,{method:this.options.method,parameters:this.options.parameters,onComplete:function(e){this.notify("onComplete",e),this.ajaxRequest=!1}.bind(this),onSuccess:function(e){this.getRemoteContentInsertionTarget().insert(e.responseText),this.notify("onSuccess",e),!1!==this.notify("onRemoteContentLoaded")&&(this.options.indicator&&this.hideIndicator(),this.finishOpen())}.bind(this),onFailure:function(e){this.notify("onFailure",e),this.options.indicator&&this.hideIndicator()}.bind(this),onException:function(e,t){this.notify("onException",e,t),this.options.indicator&&this.hideIndicator()}.bind(this)})),!0;if(this.options.iframe&&!this.remoteContentLoaded){this.remoteContentLoaded=!0,this.options.indicator&&this.showIndicator(),this.getRemoteContentInsertionTarget().insert(Control.Window.iframeTemplate.evaluate({href:this.href}));var t=this.container.down("iframe");t.onload=function(){this.notify("onRemoteContentLoaded"),this.options.indicator&&this.hideIndicator(),t.onload=null}.bind(this)}return this.finishOpen(e),!0},close:function(e){return!(!this.isOpen||!1===this.notify("beforeClose",e))&&(this.options.closeOnClick&&this.closeOnClickContainer.stopObserving("click",this.closeHandler),this.options.fade?this.effects.fade=new Effect.Fade(this.container,{queue:{position:"front",scope:"Control.Window"+this.numberInSequence},from:1,to:0,duration:this.options.fadeDuration/2,afterFinish:function(){this.iFrameShim&&this.iFrameShim.hide(),this.isOpen=!1,this.notify("afterClose")}.bind(this)}):(this.container.hide(),this.iFrameShim&&this.iFrameShim.hide()),this.ajaxRequest&&this.ajaxRequest.transport.abort(),this.options.draggable||this.options.resizable||"center"!=this.options.position||Event.stopObserving(window,"resize",this.positionHandler),this.options.draggable||"center"!=this.options.position||Event.stopObserving(window,"scroll",this.positionHandler),this.options.indicator&&this.hideIndicator(),this.options.fade||(this.isOpen=!1,this.notify("afterClose")),!0)},position:function(e){if("mouse"==this.options.position){var t=[Event.pointerX(e),Event.pointerY(e)];this.container.setStyle({top:t[1]+$value(this.options.offsetTop)+"px",left:t[0]+$value(this.options.offsetLeft)+"px"})}else{e=this.container.getDimensions();var n=document.viewport.getDimensions();Position.prepare();var i=Position.deltaX+Math.floor((n.width-e.width)/2);t=Position.deltaY+(n.height>e.height?Math.floor((n.height-e.height)/2):0),"center"==this.options.position?this.container.setStyle({top:e.height<=n.height?(null!=t&&0<t?t:0)+"px":0,left:e.width<=n.width?(null!=i&&0<i?i:0)+"px":0}):"relative"==this.options.position?(i=(t=this.sourceContainer.cumulativeOffset())[1]+$value(this.options.offsetTop),t=t[0]+$value(this.options.offsetLeft),this.container.setStyle({top:e.height<=n.height?(this.options.constrainToViewport?Math.max(0,Math.min(n.height-e.height,i)):i)+"px":0,left:e.width<=n.width?(this.options.constrainToViewport?Math.max(0,Math.min(n.width-e.width,t)):t)+"px":0})):this.options.position.length&&(i=$value(this.options.position[1])+$value(this.options.offsetTop),t=$value(this.options.position[0])+$value(this.options.offsetLeft),this.container.setStyle({top:e.height<=n.height?(this.options.constrainToViewport?Math.max(0,Math.min(n.height-e.height,i)):i)+"px":0,left:e.width<=n.width?(this.options.constrainToViewport?Math.max(0,Math.min(n.width-e.width,t)):t)+"px":0})),this.iFrameShim&&this.updateIFrameShimZIndex()}},ensureInBounds:function(){if(this.isOpen){var e=document.viewport.getDimensions(),t=this.container.cumulativeOffset(),n=this.container.getDimensions();t.left+n.width>e.width&&this.container.setStyle({left:Math.max(0,e.width-n.width)+"px"}),t.top+n.height>e.height&&this.container.setStyle({top:Math.max(0,e.height-n.height)+"px"})}},bringToFront:function(){Control.Window.bringToFront(this),this.notify("bringToFront")},destroy:function(){this.container.stopObserving("mousedown",this.bringToFrontHandler),this.draggable&&(Resizables.removeObserver(this.container),this.draggable.handle.stopObserving("mousedown",this.bringToFrontHandler),this.draggable.destroy()),this.resizable&&(Resizables.removeObserver(this.container),this.resizable.handle.stopObserving("mousedown",this.bringToFrontHandler),this.resizable.destroy()),this.container&&!this.sourceContainer&&this.container.remove(),this.sourceContainer&&(this.options.hover?(this.sourceContainer.stopObserving("mouseenter",this.sourceContainerOpenHandler),this.sourceContainer.stopObserving("mouseleave",this.sourceContainerCloseHandler),"mouse"==this.options.position&&this.sourceContainer.stopObserving("mousemove",this.sourceContainerMouseMoveHandler)):this.sourceContainer.stopObserving("click",this.sourceContainerOpenHandler)),this.iFrameShim&&this.iFrameShim.destroy(),Event.stopObserving(window,"resize",this.outOfBoundsPositionHandler),Control.Window.windows=Control.Window.windows.without(this),this.notify("afterDestroy")},applyResizable:function(){if(this.options.resizable){if("undefined"==typeof Resizable)throw"Control.Window requires resizable.js to be loaded.";var e=null;!0===this.options.resizable?(e=new Element("div",{className:"resizable_handle"}),this.container.insert(e)):e=$(this.options.resziable),this.resizable=new Resizable(this.container,{handle:e,minHeight:this.options.minHeight,minWidth:this.options.minWidth,maxHeight:this.options.constrainToViewport?function(e){return document.viewport.getDimensions().height-parseInt(e.style.top||0)-(e.getHeight()-parseInt(e.style.height||0))}:this.options.maxHeight,maxWidth:this.options.constrainToViewport?function(e){return document.viewport.getDimensions().width-parseInt(e.style.left||0)-(e.getWidth()-parseInt(e.style.width||0))}:this.options.maxWidth}),this.resizable.handle.observe("mousedown",this.bringToFrontHandler),Resizables.addObserver(new Control.Window.LayoutUpdateObserver(this,function(){this.iFrameShim&&this.updateIFrameShimZIndex(),this.notify("onResize")}.bind(this)))}},applyDraggable:function(){if(this.options.draggable){if(void 0===Draggables)throw"Control.Window requires dragdrop.js to be loaded.";var e=null;!0===this.options.draggable?(e=new Element("div",{className:"draggable_handle"}),this.container.insert(e)):e=$(this.options.draggable),this.draggable=new Draggable(this.container,{handle:e,constrainToViewport:this.options.constrainToViewport,zindex:this.container.getStyle("z-index"),starteffect:function(){Prototype.Browser.IE&&(this.old_onselectstart=document.onselectstart,document.onselectstart=function(){return!1})}.bind(this),endeffect:function(){document.onselectstart=this.old_onselectstart}.bind(this)}),this.draggable.handle.observe("mousedown",this.bringToFrontHandler),Draggables.addObserver(new Control.Window.LayoutUpdateObserver(this,function(){this.iFrameShim&&this.updateIFrameShimZIndex(),this.notify("onDrag")}.bind(this)))}},createDefaultContainer:function(e){this.container||(this.container=new Element("div",{id:"control_window_"+this.numberInSequence}),$(document.body).insert(this.container),"string"!=typeof e||null!=$(e)||e.match(/^#(.+)$/)||e.match(Control.Window.uriRegex)||this.container.update(e))},finishOpen:function(e){if(this.bringToFront(),this.options.fade){if(void 0===Effect)throw"Control.Window requires effects.js to be loaded.";this.effects.fade&&this.effects.fade.cancel(),this.effects.appear=new Effect.Appear(this.container,{queue:{position:"end",scope:"Control.Window."+this.numberInSequence},from:0,to:1,duration:this.options.fadeDuration/2,afterFinish:function(){this.iFrameShim&&this.updateIFrameShimZIndex(),this.isOpen=!0,this.notify("afterOpen")}.bind(this)})}else this.container.show();return this.position(e),this.options.draggable||this.options.resizable||"center"!=this.options.position||Event.observe(window,"resize",this.positionHandler,!1),this.options.draggable||"center"!=this.options.position||Event.observe(window,"scroll",this.positionHandler,!1),this.options.fade||(this.isOpen=!0,this.notify("afterOpen")),!0},showIndicator:function(){this.showIndicatorTimeout=window.setTimeout(function(){this.options.fade?this.indicatorEffects.appear=new Effect.Appear(this.indicator,{queue:{position:"front",scope:"Control.Window.indicator."+this.numberInSequence},from:0,to:1,duration:this.options.fadeDuration/2}):this.indicator.show()}.bind(this),Control.Window.indicatorTimeout)},hideIndicator:function(){this.showIndicatorTimeout&&window.clearTimeout(this.showIndicatorTimeout),this.indicator.hide()},getRemoteContentInsertionTarget:function(){return"string"==typeof this.options.insertRemoteContentAt?this.container.down(this.options.insertRemoteContentAt):$(this.options.insertRemoteContentAt)},updateIFrameShimZIndex:function(){this.iFrameShim&&this.iFrameShim.positionUnder(this.container)}}),Object.extend(Control.Window,{windows:[],baseZIndex:1000001,indicatorTimeout:250,iframeTemplate:new Template('<iframe src="#{href}" width="100%" height="100%" frameborder="0"></iframe>'),uriRegex:/^(\/|#|https?:\/\/|[\w]+\/)/,bringToFront:function(e){Control.Window.windows=Control.Window.windows.without(e),Control.Window.windows.push(e),Control.Window.windows.each((function(e,t){t=Control.Window.baseZIndex+t,e.container.setStyle({zIndex:t}),e.isOpen&&e.iFrameShim&&e.updateIFrameShimZIndex(),e.options.draggable&&(e.draggable.options.zindex=t)}))},open:function(e,t){return(e=new Control.Window(e,t)).open(),e},initialZIndexForWindow:function(e){return Control.Window.baseZIndex+(Control.Window.windows.length-1)}}),Object.Event.extend(Control.Window),Control.Window.LayoutUpdateObserver=Class.create({initialize:function(e,t){this.w=e,this.element=$(e.container),this.observer=t},onStart:Prototype.emptyFunction,onEnd:function(e,t){t.element==this.element&&this.iFrameShim&&this.w.updateIFrameShimZIndex()},onResize:function(e,t){t.element==this.element&&this.observer(this.element)},onDrag:function(e,t){t.element==this.element&&this.observer(this.element)}}),Control.Overlay={id:"control_overlay",loaded:!1,container:!1,lastOpacity:0,styles:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9998},ieStyles:{position:"absolute",top:0,left:0,zIndex:9998},effects:{fade:!1,appear:!1},load:function(){return!Control.Overlay.loaded&&(Control.Overlay.loaded=!0,Control.Overlay.container=new Element("div",{id:Control.Overlay.id}),$(document.body).insert(Control.Overlay.container),Prototype.Browser.IE?(Control.Overlay.container.setStyle(Control.Overlay.ieStyles),Event.observe(window,"scroll",Control.Overlay.positionOverlay),Event.observe(window,"resize",Control.Overlay.positionOverlay),Control.Overlay.observe("beforeShow",Control.Overlay.positionOverlay)):Control.Overlay.container.setStyle(Control.Overlay.styles),Control.Overlay.iFrameShim=new IframeShim,Control.Overlay.iFrameShim.hide(),Event.observe(window,"resize",Control.Overlay.positionIFrameShim),Control.Overlay.container.hide(),!0)},unload:function(){return!!Control.Overlay.loaded&&(Event.stopObserving(window,"resize",Control.Overlay.positionOverlay),Control.Overlay.stopObserving("beforeShow",Control.Overlay.positionOverlay),Event.stopObserving(window,"resize",Control.Overlay.positionIFrameShim),Control.Overlay.iFrameShim.destroy(),Control.Overlay.container.remove(),Control.Overlay.loaded=!1,!0)},show:function(e,t){if(!1===Control.Overlay.notify("beforeShow"))return!1;if(Control.Overlay.lastOpacity=e,Control.Overlay.positionIFrameShim(),Control.Overlay.iFrameShim.show(),t){if(void 0===Effect)throw"Control.Window requires effects.js to be loaded.";Control.Overlay.effects.fade&&Control.Overlay.effects.fade.cancel(),Control.Overlay.effects.appear=new Effect.Appear(Control.Overlay.container,{queue:{position:"end",scope:"Control.Overlay"},afterFinish:function(){Control.Overlay.notify("afterShow")},from:0,to:Control.Overlay.lastOpacity,duration:(!0===t?.75:t)/2})}else Control.Overlay.container.setStyle({opacity:e||1}),Control.Overlay.container.show(),Control.Overlay.notify("afterShow");return!0},hide:function(e){return!1!==Control.Overlay.notify("beforeHide")&&(Control.Overlay.effects.appear&&Control.Overlay.effects.appear.cancel(),Control.Overlay.iFrameShim.hide(),e?Control.Overlay.effects.fade=new Effect.Fade(Control.Overlay.container,{queue:{position:"front",scope:"Control.Overlay"},afterFinish:function(){Control.Overlay.notify("afterHide")},from:Control.Overlay.lastOpacity,to:0,duration:(!0===e?.75:e)/2}):(Control.Overlay.container.hide(),Control.Overlay.notify("afterHide")),!0)},positionIFrameShim:function(){Control.Overlay.container.visible()&&Control.Overlay.iFrameShim.positionUnder(Control.Overlay.container)},positionOverlay:function(){Control.Overlay.container.setStyle({width:document.body.clientWidth+"px",height:document.body.clientHeight+"px"})}},Object.Event.extend(Control.Overlay),Control.ToolTip=Class.create(Control.Window,{initialize:function(e,t,n,i){e(n,Object.extend(Object.extend(Object.clone(Control.ToolTip.defaultOptions),i||{}),{position:"mouse",hover:t}))}}),Object.extend(Control.ToolTip,{defaultOptions:{offsetLeft:10}}),Control.Modal=Class.create(Control.Window,{initialize:function(e,t,n){Control.Modal.InstanceMethods.beforeInitialize.bind(this)(),e(t,Object.extend(Object.clone(Control.Modal.defaultOptions),n||{}))}}),Object.extend(Control.Modal,{defaultOptions:{overlayOpacity:.5,closeOnClick:"overlay"},current:!1,open:function(e,t){return(e=new Control.Modal(e,t)).open(),e},close:function(){Control.Modal.current&&Control.Modal.current.close()},InstanceMethods:{beforeInitialize:function(){Control.Overlay.load(),this.overlayFinishedOpening=!1,this.observe("beforeOpen",Control.Modal.Observers.beforeOpen.bind(this)),this.observe("afterOpen",Control.Modal.Observers.afterOpen.bind(this)),this.observe("afterClose",Control.Modal.Observers.afterClose.bind(this))}},Observers:{beforeOpen:function(){if(!this.overlayFinishedOpening)throw Control.Overlay.observeOnce("afterShow",function(){this.overlayFinishedOpening=!0,this.open()}.bind(this)),Control.Overlay.show(this.options.overlayOpacity,!!this.options.fade&&this.options.fadeDuration),$break;Control.Window.windows.without(this).invoke("close")},afterOpen:function(){Control.Modal.current=this},afterClose:function(){Control.Overlay.hide(!!this.options.fade&&this.options.fadeDuration),this.overlayFinishedOpening=Control.Modal.current=!1}}}),Control.LightBox=Class.create(Control.Window,{initialize:function(e,t,n){this.allImagesLoaded=!1,n.modal?(n=Object.extend(Object.clone(Control.LightBox.defaultOptions),n||{}),n=Object.extend(Object.clone(Control.Modal.defaultOptions),n),e(t,n=Control.Modal.InstanceMethods.beforeInitialize.bind(this)(n))):e(t,Object.extend(Object.clone(Control.LightBox.defaultOptions),n||{})),(this.hasRemoteContent=this.href&&!this.options.iframe)?this.observe("onRemoteContentLoaded",Control.LightBox.Observers.onRemoteContentLoaded.bind(this)):this.applyImageObservers(),this.observe("beforeOpen",Control.LightBox.Observers.beforeOpen.bind(this))},applyImageObservers:function(){var e=this.getImages();this.numberImagesToLoad=e.length,this.numberofImagesLoaded=0,e.each(function(e){e.observe("load",function(e){++this.numberofImagesLoaded,this.numberImagesToLoad==this.numberofImagesLoaded&&(this.allImagesLoaded=!0,this.onAllImagesLoaded())}.bind(this,e)),e.hide()}.bind(this))},onAllImagesLoaded:function(){this.getImages().each(function(e){this.showImage(e)}.bind(this)),this.hasRemoteContent?(this.options.indicator&&this.hideIndicator(),this.finishOpen()):this.open()},getImages:function(){return this.container.select(Control.LightBox.imageSelector)},showImage:function(e){e.show()}}),Object.extend(Control.LightBox,{imageSelector:"img",defaultOptions:{},Observers:{beforeOpen:function(){if(!this.hasRemoteContent&&!this.allImagesLoaded)throw $break},onRemoteContentLoaded:function(){if(this.applyImageObservers(),!this.allImagesLoaded)throw $break}}}),CommentsController.prototype={initialize:function(e){this._comments_path=e.comments_path,this._hidden_threshold=e.hidden_threshold,this._active_user=e.active_user,this._comment_ids=e.comment_ids,this._top_comments=e.top_comments,this._show_blog_comment=e.show_blog_comment,this._developers=e.developers,this._call_to_action=e.call_to_action},showNewCommentForm:function(e){if(void 0===e&&(e=""),this._call_to_action||this._active_user.isAuthenticated()){try{holodeck.recordAnalyticsEvent("Comments","Add")}catch(e){}$("commentutility")&&Element.hide("commentutility"+e),Element.show("comment_new"+e)}},showReplyToCommentForm:function(e){$("reply_to_comment").show(),$("comment_"+e).insert($("reply_to_comment")),$("response_content").value="",$("reply_to_comment_submit").stopObserving("click"),$("reply_to_comment_submit").on("click",(function(){comments_controller.replyToComment(e)}))},showEditReplyToCommentForm:function(e){$("reply_to_comment").show(),$("comment_response_"+e).insert($("reply_to_comment")),$("response_content").value=$("comment_response_content_"+e).innerHTML,$("reply_to_comment_submit").stopObserving("click"),$("reply_to_comment_submit").on("click",(function(){comments_controller.replyToComment(e)}))},resetNewCommentForm:function(e){void 0===e&&(e=""),$("comment_content"+e).value="",$("comment_errors"+e).hide(),Element.hide("comment_new"+e),this.reenableNewCommentForm(e),$("commentutility")&&$("commentutility"+e).show()},reenableNewCommentForm:function(e){void 0===e&&(e=""),Element.hide("comment_indicator"+e),$("post_comment_submit"+e).disabled=!1},submitNewCommentForm:function(e,t){void 0===t&&(t="");var n=this;Element.show("comment_indicator"+t),$("post_comment_submit"+t).disabled=!0,n._call_to_action&&$("post_comment_submit"+t).hide(),$(e).request({method:"post",onSuccess:function(e){var i;n._call_to_action?((i=$("added_comments_list"))&&i.insert({top:e.responseText}),window.location.hash="_",window.location.hash="recent_comments",e=i.down(),new Effect.Highlight(e,{})):(i=$$(".comment_list").first()||$("comments_list"))&&i.insert(e.responseText),$("no_comments").hide(),n.resetNewCommentForm(t),n._call_to_action&&($("comment_indicator"+t).hide(),$("post_comment_submit"+t).show(),n.showNewCommentForm(t)),urchinTracker("/new_comment")},on400:function(e){n.showNewCommentErrors(e.responseText,t)},on500:function(e){n.showNewCommentErrors("A server error occured.",t)}})},showNewCommentErrors:function(e,t){void 0===t&&(t="");var n=$("comment_errors"+t);n.show(),n.update(e),this._call_to_action&&($("comment_indicator"+t).hide(),$("post_comment_submit"+t).show()),this.reenableNewCommentForm(t)},userSilenced:function(){var e=$("comment_user_silenced");$("comment_add_a_comment").hide(),e.update(this._active_user.silencedMessage()),e.show()},checkUserSilenced:function(){this._active_user.isSilenced()&&this.userSilenced()},lightUpSingleComment:function(e,t){(e=$("comment_"+e)).removeClassName("rated_negative"),e.removeClassName("rated_positive"),e.addClassName(t?"rated_positive":"rated_negative")},currentRating:function(e){var t=$("comment_current_rating_"+e).innerHTML;return isNaN(t)?NaN:parseInt($("comment_current_rating_"+e).innerHTML,10)},opinionForComment:function(e){return!(e=$("comment_"+e)).hasClassName("rated_negative")&&(!!e.hasClassName("rated_positive")||null)},rateComment:function(e,t){var n=this.opinionForComment(e);if(n!==t){var i=this.currentRating(e);!0===n?--i:!1===n&&(i+=1),!0===t?i+=1:!1===t&&--i,n=$("comment_"+e),$("comment_rating_area_"+e);var o=this;this.hideRatingLinks(e),isNaN(i)||$("comment_current_rating_"+e).update(i),n.removeClassName("below_threshold"),n.removeClassName("above_threshold"),n.addClassName(i>this._hidden_threshold||isNaN(i)?"above_threshold":"below_threshold"),this.lightUpSingleComment(e,t),new Ajax.Request(this._comments_path+"/"+e+"/ratings.js",{parameters:{opinion:t},onComplete:function(t){o.showRatingLinks(e)}})}},flagComment:function(e){var t=this;this.hideRatingLinks(e),new Ajax.Request(this._comments_path+"/"+e+"/flaggings.js",{onComplete:function(n){t.showRatingLinks(e),$("comment_flagged_"+e).show(),$("comment_flagged_"+e).update("<span>This comment has been flagged for review.</span>")}})},hideRatingLinks:function(e){var t=$("comment_rating_links_"+e),n=$("flag_indicator_"+e);e=$("comment_status_"+e),n.show(),e.hide(),t.hide()},showRatingLinks:function(e){var t=$("comment_rating_links_"+e),n=$("flag_indicator_"+e);e=$("comment_status_"+e),n.hide(),t.show(),e.show()},showCommentContent:function(e){Element.hide("show_comment_content_"+e),Element.show("hide_comment_content_"+e),Element.show("comment_content_"+e)},hideCommentContent:function(e){Element.show("show_comment_content_"+e),Element.hide("hide_comment_content_"+e),Element.hide("comment_content_"+e)},removeComment:function(e){var t=this._comments_path+"/"+e+".js",n=$("flag_indicator_"+e),i=$("remove_comment_"+e),o=$("comment_"+e);n.show(),i.hide(),new Ajax.Request(t,{method:"delete",onSuccess:function(e){o.remove()}})},spamComment:function(e){var t=this._comments_path+"/"+e+"/spam.js",n=$("flag_indicator_"+e),i=$("spam_comment_"+e),o=$("comment_"+e);n.show(),i.hide(),new Ajax.Request(t,{method:"post",onSuccess:function(e){o.remove()}})},replyToComment:function(e){var t=this._comments_path+"/"+e+"/reply",n=$("flag_indicator_"+e),i=$("reply_to_comment_"+e),o=$("comment_"+e);n.show(),i&&i.hide(),new Ajax.Request(t,{method:"post",parameters:{response_content:$("response_content").value,show_blog_comment:this._show_blog_comment},onSuccess:function(e){var t=$("reply_to_comment");t.hide(),$$(".user_message").last().insert({after:t}),o.replace(e.responseText),comments_controller.showAdminControls(),n.hide()}})},cancelReply:function(){$("reply_to_comment").hide(),$("response_content").value=""},checkUserRatingStatus:function(){var e=this;(function(){new Ajax.Request(this._active_user.accountUrl()+"/comment_ratings.json",{method:"get",parameters:{comment_ids:Object.toJSON(this._comment_ids),game_id:this._active_user.gameId(),top_comments:!!this._top_comments||""},onSuccess:function(t){e.lightUpComments(t.responseJSON)}})}).bind(this).runWhenDomLoaded(!0)},clearReply:function(e){var t=this._comments_path+"/"+e+"/clear_reply",n=$("flag_indicator_"+e),i=$("clear_reply_to_comment_"+e),o=$("reply_to_comment_"+e),r=$("comment_"+e);n.show(),i.hide(),new Ajax.Request(t,{method:"post",onSuccess:function(e){n.hide(),o.show(),r.down(".comment_reply").remove()}})},lightUpComments:function(e){var t=this;$H(e).each((function(e){t.lightUpSingleComment(e.key,e.value)}))},activeUserisDeveloperOrCollaborator:function(){return-1!=this._developers.indexOf(active_user.username())},showAdminControls:function(){active_user.isAdmin()?($$(".admin_controls").each(Element.show),$$(".developer_controls").each(Element.show)):this.activeUserisDeveloperOrCollaborator()&&$$(".developer_controls").each(Element.show)}},Function.prototype.runWhenDomLoaded=function(e){if(e&&window.gameLoadObserver)this.runWhenGameLoaded();else if(document.loaded)this.defer();else{var t=this;document.observe("dom:loaded",(function(){t()}))}},Function.prototype.runWhenReady=function(){if(document.loaded&&document.javascript_loaded)this.defer();else{var e=this;document.observe("dom:loaded",(function(){document.loaded&&document.javascript_loaded&&e.defer()})),document.observe("dom:javascript_loaded",(function(){document.loaded&&document.javascript_loaded&&e.defer()}))}},Cookie={set:function(e,t,n,i){return e=encodeURIComponent(e)+"="+encodeURIComponent(t||""),void 0!==n&&((t=new Date).setTime(t.getTime()+864e5*parseFloat(n)),e+="; expires="+t.toGMTString()),document.cookie=i?e+"; path="+i:e+"; path=/"},setWithDate:function(e,t,n){return e=encodeURIComponent(e)+"="+encodeURIComponent(t||""),void 0!==n&&(e+="; expires="+n.toGMTString()),document.cookie=e+"; path=/"},get:function(e){return(e=document.cookie.match(new RegExp("(^|;)\\s*"+encodeURIComponent(e)+"=([^;\\s]*)")))?decodeURIComponent(e[2].gsub(/\+/," ")):null},erase:function(e,t){var n=Cookie.get(e)||!0;return Cookie.set(e,"",-1,t),n},accept:function(){return"boolean"==typeof navigator.cookieEnabled?navigator.cookieEnabled:(Cookie.set("_test","1"),"1"===Cookie.erase("_test"))}};var swfobject=function(){function e(){if(!k){try{var e=x.getElementsByTagName("body")[0].appendChild(x.createElement("span"));e.parentNode.removeChild(e)}catch(e){return}k=!0,e=T.length;for(var t=0;t<e;t++)T[t]()}}function t(e){k?e():T[T.length]=e}function n(e){if(void 0!==E.addEventListener)E.addEventListener("load",e,!1);else if(void 0!==x.addEventListener)x.addEventListener("load",e,!1);else if(void 0!==E.attachEvent)!function(e,t,n){e.attachEvent(t,n),N[N.length]=[e,t,n]}(E,"onload",e);else if("function"==typeof E.onload){var t=E.onload;E.onload=function(){t(),e()}}else E.onload=e}function i(){var e=O.length;if(0<e)for(var t=0;t<e;t++){var n=O[t].id,i=O[t].callbackFn,l={success:!1,id:n};if(0<P.pv[0]){var c=h(n);if(c)if(!d(O[t].swfVersion)||P.wk&&312>P.wk)if(O[t].expressInstall&&r()){(l={}).data=O[t].expressInstall,l.width=c.getAttribute("width")||"0",l.height=c.getAttribute("height")||"0",c.getAttribute("class")&&(l.styleclass=c.getAttribute("class")),c.getAttribute("align")&&(l.align=c.getAttribute("align"));for(var u={},f=(c=c.getElementsByTagName("param")).length,m=0;m<f;m++)"movie"!=c[m].getAttribute("name").toLowerCase()&&(u[c[m].getAttribute("name")]=c[m].getAttribute("value"));s(l,u,n,i)}else a(c),i&&i(l);else p(n,!0),i&&(l.success=!0,l.ref=o(n),i(l))}else p(n,!0),i&&((n=o(n))&&void 0!==n.SetVariable&&(l.success=!0,l.ref=n),i(l))}}function o(e){var t=null;return(e=h(e))&&"OBJECT"==e.nodeName&&(void 0!==e.SetVariable||(e=e.getElementsByTagName("object")[0]))&&(t=e),t}function r(){return!F&&d("6.0.65")&&(P.win||P.mac)&&!(P.wk&&312>P.wk)}function s(e,t,n,i){F=!0,b=i||null,y={success:!1,id:n};var o=h(n);o&&("OBJECT"==o.nodeName?(g=l(o),v=null):(g=o,v=n),e.id="SWFObjectExprInst",(void 0===e.width||!/%$/.test(e.width)&&310>parseInt(e.width,10))&&(e.width="310"),(void 0===e.height||!/%$/.test(e.height)&&137>parseInt(e.height,10))&&(e.height="137"),x.title=x.title.slice(0,47)+" - Flash Player Installation",i=P.ie&&P.win?"ActiveX":"PlugIn",i="MMredirectURL="+encodeURI(E.location).toString().replace(/&/g,"%26")+"&MMplayerType="+i+"&MMdoctitle="+x.title,t.flashvars=void 0!==t.flashvars?t.flashvars+"&"+i:i,P.ie&&P.win&&4!=o.readyState&&(n+="SWFObjectNew",(i=x.createElement("div")).setAttribute("id",n),o.parentNode.insertBefore(i,o),o.style.display="none",function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()),c(e,t,n))}function a(e){if(P.ie&&P.win&&4!=e.readyState){var t=x.createElement("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(l(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(l(e),e)}function l(e){var t=x.createElement("div");if(P.win&&P.ie)t.innerHTML=e.innerHTML;else if((e=e.getElementsByTagName("object")[0])&&(e=e.childNodes))for(var n=e.length,i=0;i<n;i++)1==e[i].nodeType&&"PARAM"==e[i].nodeName||8==e[i].nodeType||t.appendChild(e[i].cloneNode(!0));return t}function c(e,t,n){var i=h(n);if(P.wk&&312>P.wk)return a;if(i)if(void 0===e.id&&(e.id=n),P.ie&&P.win){var o="";for(r in e)e[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?t.movie=e[r]:"styleclass"==r.toLowerCase()?o+=' class="'+e[r]+'"':"classid"!=r.toLowerCase()&&(o+=" "+r+'="'+e[r]+'"'));var r="";for(var s in t)t[s]!=Object.prototype[s]&&(r+='<param name="'+s+'" value="'+t[s]+'" />');i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+r+"</object>",A[A.length]=e.id;var a=h(e.id)}else{for(var l in(s=x.createElement("object")).setAttribute("type","application/x-shockwave-flash"),e)e[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?s.setAttribute("class",e[l]):"classid"!=l.toLowerCase()&&s.setAttribute(l,e[l]));for(o in t)t[o]!=Object.prototype[o]&&"movie"!=o.toLowerCase()&&(e=s,r=o,l=t[o],(n=x.createElement("param")).setAttribute("name",r),n.setAttribute("value",l),e.appendChild(n));i.parentNode.replaceChild(s,i),a=s}return a}function u(e){var t=h(e);t&&"OBJECT"==t.nodeName&&(P.ie&&P.win?(t.style.display="none",function(){if(4==t.readyState){var n=h(e);if(n){for(var i in n)"function"==typeof n[i]&&(n[i]=null);n.parentNode.removeChild(n)}}else setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function h(e){var t=null;try{t=x.getElementById(e)}catch(e){}return t}function d(e){var t=P.pv;return(e=e.split("."))[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10)||0,e[2]=parseInt(e[2],10)||0,t[0]>e[0]||t[0]==e[0]&&t[1]>e[1]||t[0]==e[0]&&t[1]==e[1]&&t[2]>=e[2]}function f(e,t,n,i){if(!P.ie||!P.mac){var o=x.getElementsByTagName("head")[0];o&&(n=n&&"string"==typeof n?n:"screen",i&&(w=_=null),_&&w==n||((i=x.createElement("style")).setAttribute("type","text/css"),i.setAttribute("media",n),_=o.appendChild(i),P.ie&&P.win&&void 0!==x.styleSheets&&0<x.styleSheets.length&&(_=x.styleSheets[x.styleSheets.length-1]),w=n),P.ie&&P.win?_&&"object"==typeof _.addRule&&_.addRule(e,t):_&&void 0!==x.createTextNode&&_.appendChild(x.createTextNode(e+" {"+t+"}")))}}function p(e,t){j&&(t=t?"visible":"hidden",k&&h(e)?h(e).style.visibility=t:f("#"+e,"visibility:"+t))}function m(e){return null!=/[\\"<>\.;]/.exec(e)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(e):e}var g,v,b,y,_,w,E=window,x=document,C=navigator,S=!1,T=[function(){S?function(){var e=x.getElementsByTagName("body")[0],t=x.createElement("object");t.setAttribute("type","application/x-shockwave-flash");var n=e.appendChild(t);if(n){var o=0;!function(){if(void 0!==n.GetVariable){var r=n.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),P.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(10>o)return o++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,i()}()}else i()}():i()}],O=[],A=[],N=[],k=!1,F=!1,j=!0,P=function(){var e=void 0!==x.getElementById&&void 0!==x.getElementsByTagName&&void 0!==x.createElement,t=C.userAgent.toLowerCase(),n=C.platform.toLowerCase(),i=/win/.test(n||t);n=/mac/.test(n||t),t=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1"));var o=!1,r=[0,0,0],s=null;if(void 0!==C.plugins&&"object"==typeof C.plugins["Shockwave Flash"])!(s=C.plugins["Shockwave Flash"].description)||void 0!==C.mimeTypes&&C.mimeTypes["application/x-shockwave-flash"]&&!C.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(S=!0,o=!1,s=s.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(s.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(s.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/[a-zA-Z]/.test(s)?parseInt(s.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(void 0!==E.ActiveXObject)try{(s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version"))&&(o=!0,s=s.split(" ")[1].split(","),r=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}catch(e){}return{w3:e,pv:r,wk:t,ie:o,win:i,mac:n}}();return P.w3&&((void 0!==x.readyState&&"complete"==x.readyState||void 0===x.readyState&&(x.getElementsByTagName("body")[0]||x.body))&&e(),k||(void 0!==x.addEventListener&&x.addEventListener("DOMContentLoaded",e,!1),P.ie&&P.win&&(x.attachEvent("onreadystatechange",(function(){"complete"==x.readyState&&(x.detachEvent("onreadystatechange",arguments.callee),e())})),E==top&&function(){if(!k){try{x.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),P.wk&&function(){k||(/loaded|complete/.test(x.readyState)?e():setTimeout(arguments.callee,0))}(),n(e))),P.ie&&P.win&&window.attachEvent("onunload",(function(){for(var e=N.length,t=0;t<e;t++)N[t][0].detachEvent(N[t][1],N[t][2]);for(e=A.length,t=0;t<e;t++)u(A[t]);for(var n in P)P[n]=null;for(var i in P=null,swfobject)swfobject[i]=null;swfobject=null})),{registerObject:function(e,t,n,i){if(P.w3&&e&&t){var o={};o.id=e,o.swfVersion=t,o.expressInstall=n,o.callbackFn=i,O[O.length]=o,p(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(P.w3)return o(e)},embedSWF:function(e,n,i,o,a,l,u,h,f,m){var g={success:!1,id:n};P.w3&&!(P.wk&&312>P.wk)&&e&&n&&i&&o&&a?(p(n,!1),t((function(){i+="",o+="";var t={};if(f&&"object"==typeof f)for(var v in f)t[v]=f[v];if(t.data=e,t.width=i,t.height=o,v={},h&&"object"==typeof h)for(var b in h)v[b]=h[b];if(u&&"object"==typeof u)for(var y in u)v.flashvars=void 0!==v.flashvars?v.flashvars+"&"+y+"="+u[y]:y+"="+u[y];if(d(a))b=c(t,v,n),t.id==n&&p(n,!0),g.success=!0,g.ref=b;else{if(l&&r())return t.data=l,void s(t,v,n,m);p(n,!0)}m&&m(g)}))):m&&m(g)},switchOffAutoHideShow:function(){j=!1},ua:P,getFlashPlayerVersion:function(){return{major:P.pv[0],minor:P.pv[1],release:P.pv[2]}},hasFlashPlayerVersion:d,createSWF:function(e,t,n){if(P.w3)return c(e,t,n)},showExpressInstall:function(e,t,n,i){P.w3&&r()&&s(e,t,n,i)},removeSWF:function(e){P.w3&&u(e)},createCSS:function(e,t,n,i){P.w3&&f(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=x.location.search||x.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return m(t);t=t.split("&");for(var n=0;n<t.length;n++)if(t[n].substring(0,t[n].indexOf("="))==e)return m(t[n].substring(t[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(F){var e=h("SWFObjectExprInst");e&&g&&(e.parentNode.replaceChild(g,e),v&&(p(v,!0),P.ie&&P.win&&(g.style.display="block")),b&&b(y)),F=!1}}}}();!function(e){function t(){if(a.jStorage)try{s=h(String(a.jStorage))}catch(e){a.jStorage="{}"}else a.jStorage="{}";c=a.jStorage?String(a.jStorage).length:0}function n(){try{a.jStorage=u(s),l&&(l.setAttribute("jStorage",a.jStorage),l.save("jStorage")),c=a.jStorage?String(a.jStorage).length:0}catch(e){}}function i(e){if(!e||"string"!=typeof e&&"number"!=typeof e)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==e)throw new TypeError("Reserved key name");return!0}function o(){var e,t=1/0,i=!1;if(clearTimeout(r),s.__jstorage_meta&&"object"==typeof s.__jstorage_meta.TTL){var a=+new Date,l=s.__jstorage_meta.TTL;for(e in l)l.hasOwnProperty(e)&&(l[e]<=a?(delete l[e],delete s[e],i=!0):l[e]<t&&(t=l[e]));1/0!=t&&(r=setTimeout(o,t-a)),i&&n()}}if(!e||!(e.toJSON||Object.toJSON||window.JSON))throw Error("jQuery, MooTools or Prototype needs to be loaded before jStorage!");var r,s={},a={jStorage:"{}"},l=null,c=0,u=e.toJSON||Object.toJSON||window.JSON&&(JSON.encode||JSON.stringify),h=e.evalJSON||window.JSON&&(JSON.decode||JSON.parse)||function(e){return String(e).evalJSON()},d=!1,f={isXML:function(e){return!!(e=(e?e.ownerDocument||e:0).documentElement)&&"HTML"!==e.nodeName},encode:function(e){if(!this.isXML(e))return!1;try{return(new XMLSerializer).serializeToString(e)}catch(t){try{return e.xml}catch(e){}}return!1},decode:function(e){var t="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(e){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t};return!!t&&(e=t.call("DOMParser"in window&&new DOMParser||window,e,"text/xml"),!!this.isXML(e)&&e)}};e.jStorage={version:"0.1.7.0",set:function(e,t,o){return i(e),o=o||{},f.isXML(t)?t={_is_xml:!0,xml:f.encode(t)}:"function"==typeof t?t=null:t&&"object"==typeof t&&(t=h(u(t))),s[e]=t,isNaN(o.TTL)?n():this.setTTL(e,o.TTL),t},get:function(e,t){return i(e),e in s?s[e]&&"object"==typeof s[e]&&s[e]._is_xml&&s[e]._is_xml?f.decode(s[e].xml):s[e]:void 0===t?null:t},deleteKey:function(e){return i(e),e in s&&(delete s[e],s.__jstorage_meta&&"object"==typeof s.__jstorage_meta.TTL&&e in s.__jstorage_meta.TTL&&delete s.__jstorage_meta.TTL[e],n(),!0)},setTTL:function(e,t){var r=+new Date;return i(e),t=Number(t)||0,e in s&&(s.__jstorage_meta||(s.__jstorage_meta={}),s.__jstorage_meta.TTL||(s.__jstorage_meta.TTL={}),0<t?s.__jstorage_meta.TTL[e]=r+t:delete s.__jstorage_meta.TTL[e],n(),o(),!0)},flush:function(){return s={},n(),!0},storageObj:function(){function e(){}return e.prototype=s,new e},index:function(){var e,t=[];for(e in s)s.hasOwnProperty(e)&&"__jstorage_meta"!=e&&t.push(e);return t},storageSize:function(){return c},currentBackend:function(){return d},storageAvailable:function(){return!!d},reInit:function(){if(l&&l.addBehavior){var e=document.createElement("link");l.parentNode.replaceChild(e,l),(l=e).style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(l),l.load("jStorage"),e="{}";try{e=l.getAttribute("jStorage")}catch(e){}a.jStorage=e,d="userDataBehavior"}t()}},function(){var e=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),e=!0,window.localStorage.removeItem("_tmptest")}catch(e){}if(e)try{window.localStorage&&(a=window.localStorage,d="localStorage")}catch(e){}else if("globalStorage"in window)try{window.globalStorage&&(a=window.globalStorage[window.location.hostname],d="globalStorage")}catch(e){}else{if(!(l=document.createElement("link")).addBehavior)return void(l=null);l.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(l),l.load("jStorage"),e="{}";try{e=l.getAttribute("jStorage")}catch(e){}a.jStorage=e,d="userDataBehavior"}t(),o()}()}($||window.jQuery),ActiveUser=function(e){this.initialize(e)},ActiveUser.UPDATE_FREQUENCY=1200,ActiveUser.SILENCED_TEMPLATE=new Template('You have been silenced for #{until}. Click <a href="/pages/silenced">here</a> to read about silences.'),ActiveUser.ADMIN_LOAD_TOOLS_PATH="/admin/load_toolbar",ActiveUser.USER_DATA_LS_KEY="kong_user_data",ActiveUser.SEEN_SHARED_CONTENT_WELCOME_LS_KEY="kong_seen_shared_content",ActiveUser.ANIMATION_THROWDOWN_GAME_ID=258488,ActiveUser.prototype={initialize:function(e){var t=this;this._dynamic_style_ele=this._holodeck=null,this._attributes=$H(),this._game_attributes=$H(),this._attribute_observer_handler=new HandlerQueue,this._on_authenticated_handler=new HandlerQueue,this._game_attribute_observer_handler=new HandlerQueue,this._captured_inline_selectors=[],this._domain=e.domain,this._single_cdn_domain=e.single_cdn_domain,this._trusted_domain=e.trusted_domain,this._load_toolbar=e.load_toolbar,this._game_page=e.game_page,this._debug_level=e.debug_level,this._redirect_capture=e.redirect_capture,this._new_session_url=e.new_session_url,this.updateAttributes(e.kong_user_data),this.split_treatments=this.getAttributes().split_treatments,this._dont_load_user_progress_bar=e.dont_load_user_progress_bar,this._user_progress_bar=null,this._just_registered=this._showing_blue_bar_message=!1,this._klient_auth_token=e.klient_auth_token,this._eligible_for_chip_grant=e.chip_grant,this.addRunWhenAuthenticatedObserver((function(e){e.populateUserSpecificLinks(),e.loadAdminToolbar(),e.fetchChipsGrant(),e.initializeUserProgressBar.bind(t).runWhenReady(),$j(".policy-bar").hide()})),this.lightUpBadgeOfTheDayOverlay(),this._splitTreatmentPermalinks=(this._splitTreatmentPermalinks=Cookie.get("splitTreatmentPermalinks"))?this._splitTreatmentPermalinks.evalJSON():{},this.showPolicyBar.bind(this).runWhenDomLoaded()},setHolodeck:function(e){this._holodeck=e},isShowingBlueBar:function(){return this._showing_blue_bar_message},showingBlueBar:function(){this._showing_blue_bar_message=!0,this._user_progress_bar&&this._user_progress_bar.hideForBlueBar()},initializeUserProgressBar:function(){this.getsUserProgressBar()&&!this.isShowingBlueBar()&&(this._user_progress_bar=new UserProgressBar(this))},getsUserProgressBar:function(){return!this._dont_load_user_progress_bar&&(this.onOwnProfilePage()||this.onHomePage()||!this._attributes.get("progress_bar_opt_out"))&&this._attributes.get("gets_progress_bar")},showProgressBarCompletionMessage:function(){return this._attributes.get("show_progress_completion_message")},onOwnProfilePage:function(){return this.isAuthenticated()&&"/accounts/"+this.username().toLowerCase()==window.location.pathname.toLowerCase()},onHomePage:function(){return"/"===window.location.pathname},isKlientProgressBar:function(){return this._attributes.get("is_klient_progress_bar")},progressBarPercentPerStep:function(){return this._attributes.get("progress_bar_percent_per_step")},availableProgressBarSteps:function(){return this._attributes.get("available_progress_bar_steps")},progressBarPercentComplete:function(){return this._attributes.get("progress_bar_percent_complete")},pullUserData:function(){var e=this,t="/accounts/"+this.username()+"/info.json";new Ajax.Request(t,{method:"get",onSuccess:function(t){e.updateAttributes(t.responseJSON)}})},addAttributesObserver:function(e){this._attribute_observer_handler.add(e)},addOnAuthenticatedObserver:function(e){this._on_authenticated_handler.add(e)},addRunWhenAuthenticatedObserver:function(e){this.isAuthenticated()?function(){e(this)}.bind(this).runWhenDomLoaded(!0):this.addOnAuthenticatedObserver(e)},addGameAttributesObserver:function(e){this._game_attribute_observer_handler.add(e)},setJustRegisteredOnGamePage:function(){this._just_registered=!0},justRegisteredOnGamePage:function(){return this._just_registered},resetAttributes:function(e){this._attributes=$H(),this.updateAttributes(e)},setKlientAuthToken:function(e){this._klient_auth_token=e},updateAttributes:function(e){var t=$.jStorage.get(ActiveUser.USER_DATA_LS_KEY),n=this._attributes.get("username");t&&(t.version>e.version||t.generated_at>e.generated_at)&&(t.split_treatments=$H(e.split_treatments).merge(t.split_treatments).toObject(),e=t),this._attributes.update(e),this._attribute_observer_handler.handle(this),e.username&&e.username!=n&&this.usernameUpdated();try{$.jStorage.set(ActiveUser.USER_DATA_LS_KEY,this._attributes.toObject())}catch(e){}this.updateNativeAppAttributes()},isNativeAppUser:function(){return!!window.kongNativeApp},sendNativeAppMessage:function(e,t){this.isNativeAppUser()&&kongNativeApp.sendMessage(Object.toJSON({opcode:e,params:t}))},closeNativeAppWindow:function(){this.sendNativeAppMessage("close",{})},updateNativeAppAttributes:function(){this.sendNativeAppMessage("user_info",this._attributes)},updateGameAttributes:function(e){this._game_attributes.update(e),this._game_attribute_observer_handler.handle(active_user)},gameCookieName:function(){if(this._game_id)return"kong_game_"+this._game_id},getAttributes:function(){return this._attributes.toObject()},getGameAttributes:function(){return this._game_attributes.toObject()},username:function(){return this._attributes.get("username")},siteVisitorUID:function(){return Cookie.get("kong_svid")},avatarUrl:function(){var e=this._attributes.get("avatar_url");return e||""},id:function(){return this._attributes.get("id")},facebook_uid:function(){return this._attributes.get("facebook_uid")},chatUsername:function(){return this._attributes.get("chat_username")||this._attributes.get("username")},chatPassword:function(){return this._attributes.get("chat_password")},klientAuthToken:function(){return this._klient_auth_token},gameAuthToken:function(){return this._game_attributes.get("game_auth_token")},userAgent:function(){return this._attributes.get("user_agent")},userVars:function(){return this._game_attributes.get("user_vars")},userVarsSig:function(){return this._game_attributes.get("user_vars_sig")},specialChatVars:function(){return this._attributes.get("special_chat_vars")},gameplaysCount:function(){return this._attributes.get("gameplays_count")},gameplaysCountForGame:function(){return this._game_attributes.get("gameplays_for_game")||0},gameRequiresFlash:function(){return this._game_attributes.get("requires_flash")},showFlashWarning:function(e){return!e&&this.gameRequiresFlash()},ratingsCount:function(){return this._attributes.get("ratings_count")},gameplaysCountFromCookie:function(){try{return parseInt(Cookie.get(Holodeck.KONG_GAMEPLAYS_COOKIE_NAME)||1,10)}catch(e){return 0}},duelingGroup:function(){var e=this.specialChatVars();return e&&(e=e.dueling_quest_data)&&e.dueling_quest_slug||""},points:function(){return this._attributes.get("points")},pointsAway:function(){return this._attributes.get("points_away")},friendsOnlineCount:function(){return this._attributes.get("friends_online_count")},friendsOnlineNames:function(){return this._attributes.get("friends_online_names")},unreadShoutsCount:function(){return this._attributes.get("unread_shouts_count")},unreadWhispersCount:function(){return this._attributes.get("unread_whispers_count")},unreadGameMessagesCount:function(){return this._attributes.get("unread_game_messages_count")},pointsForLastLevel:function(){return this._attributes.get("points_for_last_level")},pointsAfterLastLevel:function(){return active_user.points()-active_user.pointsForLastLevel()},level:function(){return this._attributes.get("level")},lastLevelupAt:function(){var e=this._attributes.get("last_levelup_at");return e?new Date(e):void 0},recentLevelup:function(){return this.lastLevelupAt()>new Date((new Date).getTime()-864e5)},senderNameOrEmail:function(){return this._attributes.get("sender_name_or_email")},featureEnabled:function(e){var t=this.documentLocationSearchQuery()[e];return"false"!==t&&(this._game_attributes.get(e)||"true"===t)},webSocketsEnabled:function(){return"false"!==this.documentLocationSearchQuery().websockets_enabled},flashPostMessageEnabled:function(){return!1},forceSSLIframe:function(){return this.featureEnabled("force_ssl_iframe")},sharedContentApiEnabled:function(){return this._game_attributes.get("shared_content_api")},mtxApiEnabled:function(){return this._game_attributes.get("mtx_api")},chatApiEnabled:function(){return this._game_attributes.get("chat_api")},usernameUpdated:function(){var e=this;(function(){e.isAuthenticated()&&e._on_authenticated_handler.handle(e)}).runWhenDomLoaded(!0)},isAuthenticated:function(){return!(!this.username()||/^Guest/.match(this.username()))},isAdmin:function(){return this.isAuthenticated()&&this._attributes.get("admin")},isPremium:function(){return!(this.isAdmin()&&Cookie.get("admin_premium_off"))&&this.isAuthenticated()&&this._attributes.get("premium")},inTopKredGracePeriod:function(){return!!this.isAuthenticated()&&("non-buyer"!=this.kredBuyerType()||5>=this.gameplaysCountForGame())},premiumizeUpsellNode:function(e,t,n){return this.isPremium()||e.addClassName("clickable").observe("click",(function(e){return lightbox.prototype.initializePremiumMembershipPurchase(t,n),Event.stop(e),!1})),e},isDeveloperOfGame:function(){return document.location.pathname.split("/")[2].toLowerCase()==this.username().toLowerCase()},isDeveloper:function(){return this.isAuthenticated()&&this._attributes.get("developer")},isChatModerator:function(){return this.isAuthenticated()&&this._attributes.get("moderator")},isSuperChatModerator:function(){return this.isAuthenticated()&&this._attributes.get("super_chat_moderator")},isCurator:function(){return this.isAuthenticated()&&this._attributes.get("curator")},isForumModerator:function(){return this.isAuthenticated()&&this._attributes.get("forum_moderator")},getsAdminBar:function(){return!!this._load_toolbar&&(this.isChatModerator()||this.isCurator()||this.isForumModerator())},silencedUntil:function(){var e=this._attributes.get("silenced_until");return e?new Date(e):void 0},isSilenced:function(){var e=this.silencedUntil();return!!(e&&e>new Date)},silencedMessage:function(){return ActiveUser.SILENCED_TEMPLATE.evaluate({until:TimeInWordsHelper.distanceInWords(new Date,this.silencedUntil())})},populateUserSpecificLinks:function(e){var t=this.username();(e?e.select("a"):$$("a.user_specific")).each((function(e){e.href=e.href.replace("Guest",t).replace("KongregateHolodeckTemplateUsername",t)}))},fetchChipsGrant:function(){if(this._eligible_for_chip_grant){var e=0,t="/accounts/"+this.username()+"/user_blocks_grant",n=function(){new Ajax.Request(t,{method:"get",onSuccess:function(t){e+=1,t.responseJSON&&t.responseJSON.user_chip_grant?window.ModalService.createOrOpenModal({key:["chips_grant"],content:t.responseJSON.user_chip_grant.modal_content}):10>e&&setTimeout(n,3e3)}})}.bind(this);setTimeout(n,3e3)}},addCapturedSelector:function(e,t){this._captured_inline_selectors.push(e);var n=this,i=function(e){var i=e.onclick;i&&(e.onclick=n.capturedSelectorWrapper.bindAsEventListener(n,i.bind(e),t))};$$(e).each((function(e){e.match("a, input[type=button]")?i(e):e.getElementsBySelector("a, input[type=button]").each(i),e.addClassName("lbOn")}))},capturedSelectorWrapper:function(e,t,n){var i="function"==typeof t;return this.isAuthenticated()?i?t(e):void 0:(this._redirect_capture?this.redirectToLogin():this.activateInlineLogin({},n),"function"==typeof t&&this.saveCapturedFunction(t.curry(e)),void 0!==e.preventDefault&&Event.stop(e),!1)},activateInlineLogin:function(e,t){e||(e={}),e=$H(e);var n="/accounts/new/behind_login";this._holodeck&&this._holodeck.recordAnalyticsEvent("Lightbox","Signin"),this._game_id&&e.set("game_id",this._game_id),0<e.size()&&(n=n+"?"+e.toQueryString()),t?lightbox.prototype.initializeKongregateLightboxFromAjax(n,{afterStaticContentLoad:function(){lightbox.prototype.toggleRegistration(),active_user.focusFormField("username")}}):lightbox.prototype.initializeKongregateLightboxFromAjax(n,{done_class_name:"lightbox_login",afterStaticContentLoad:function(){active_user.focusFormField("username")}})},focusFormField:function(e){var t=$(e);t&&setTimeout((function(){t.focus()}),0)},activateKredPurchase:function(e){this.isAuthenticated()&&lightbox.prototype.initializeKredPurchase(e)},activatePasswordRecovery:function(){this.isGamePage()?this.activateInlineLogin({recover:!0}):document.location="/session/new?recover=true"},redirectToLogin:function(){top.location=this._new_session_url},debugLevel:function(){return this._debug_level||(this._debug_level=this.documentLocationSearchQuery().debug_level||2),this._debug_level},documentLocationSearchQuery:function(){return this._document_location_search_query||(this._document_location_search_query=document.location.search.parseQuery()),this._document_location_search_query},seenSharedContentWelcomeKey:function(){return ActiveUser.SEEN_SHARED_CONTENT_WELCOME_LS_KEY+"_"+this.gameId()},seenSharedContentWelcome:function(){return!!$.jStorage.get(this.seenSharedContentWelcomeKey())},setSeenSharedContentWelcome:function(e){e?$.jStorage.set(this.seenSharedContentWelcomeKey(),e):$.jStorage.deleteKey(this.seenSharedContentWelcomeKey())},saveCapturedFunction:function(e){this._capturedFunction=e},runCapturedFunction:function(){"function"==typeof this._capturedFunction&&this._capturedFunction.defer(),this._capturedFunction=null},gameId:function(){return this._game_id},gamePermalink:function(){return this._game_attributes.get("game_permalink")},setAnalyticsInfo:function(e,t){t[e]?(Kongregate.Log.debug("Analytics information available, environment: "+e),this._analytics_info=t[e]):(Kongregate.Log.debug("No analytics information available for environment: "+e),this._analytics_info=null)},analyticsInfo:function(){return this._analytics_info},setGame:function(e,t,n){this._game_id=e,this._game_resource_path=t,n&&(this.updateGameAttributes(n),Cookie.erase(this.gameCookieName(),this.gameCookiePath()))},gamePath:function(){if(!this._game_path){var e=document.location.pathname.match(/(.*)\/$/);this._game_path=e?e[1]:document.location.pathname}return this._game_path},gameResourcePath:function(){return this._game_resource_path},gameCookiePath:function(){return this._game_cookie_path||(this._game_cookie_path=this.gamePath().match(/(.*)\/.*/)[1]),this._game_cookie_path},referrerUrl:function(e){if(!this.isAuthenticated())return e;var t=e.match(/\?/)?"&":"?";return e+t+"referrer="+encodeURIComponent(this.username())},gameType:function(){return this._game_attributes.get("game_type")},gameHasAlternateFile:function(){return this._game_attributes.get("has_alternate_file")},gameName:function(){return this._game_attributes.get("game_name")},allowedToRateGame:function(){if(this.shouldCheckForUnityPlugin()){var e=!1;return unityObject.detectUnity((function(t){e="installed"==t||"running"==t})),e}return!0},shouldCheckForUnityPlugin:function(){return"unity"==this.gameType()&&(!["Chrome","Mozilla","Edge"].include(this.userAgent().browser)||!this.gameHasAlternateFile())},accountUrl:function(){return"/accounts/"+this.username()},isGamePage:function(){return!!this._game_page},domain:function(){return this._domain},singleCDNDomain:function(){return this._single_cdn_domain},bareCDNhost:function(){return this._single_cdn_domain.replace(/^cdn\d\./,"")},trustedDomain:function(){return this._trusted_domain},isMobileUserAgent:function(){return this._attributes.get("mobile_user_agent")},countryCode:function(){return this.valueOfSearchParameter("force_country_code")||this._attributes.get("country_code")},inEuConsentCountry:function(){return this._attributes.get("in_eu_consent_country")},ageOfConsent:function(){return this._attributes.get("age_of_consent")},acceptedPrivacyPolicy:function(){return this._attributes.get("accepted_privacy_policy")},showPolicyBar:function(){this.isAuthenticated()?this.acceptedPrivacyPolicy()&&Cookie.set("kong_guest_pp","true",1e4,"/"):Cookie.get("kong_guest_pp")||($j(".policy-bar__btn").click((function(e){return e.preventDefault(),Cookie.set("kong_guest_pp","true",1e4,"/"),$j(".policy-bar").hide(),!1})),$j(".policy-bar").show())},loadAdminToolbar:function(){this.getsAdminBar()&&new Ajax.Updater({success:"admin_links_placeholder"},ActiveUser.ADMIN_LOAD_TOOLS_PATH,{method:"get",evalScripts:!0})},recordTreatments:function(e){e&&this._attributes.get("treatments")&&this._attributes.get("treatments").each((function(t){t.analytics_slot&&e.setCustomVariable(t.analytics_slot,t.group_permalink,t.treatment_permalink,2)}))},valueOfSearchParameter:function(e){return location.search.parseQuery()[e]},occasionallyShowRegistrationLightbox:function(){this.getsRegistrationLightbox()&&this.activateInlineLogin({},!0)},animationThrowdownSteam:function(){return ActiveUser.ANIMATION_THROWDOWN_GAME_ID==this.gameId()},getsRegistrationLightbox:function(){if(this.animationThrowdownSteam()&&!this.isAuthenticated())return!0;var e=this.gameplaysCount()%7;return!this.isAuthenticated()&&1<=this.gameplaysCount()&&1===e},lightUpBadgeOfTheDayOverlay:function(){var e=this._attributes.get("botd_badge_id");e&&(this.createCSS(".badge_of_the_day_overlay span.botd_badge_id_"+e,"display:block"),this.createCSS(".badge_blocks.badge_id_"+e,"display:block"))},createCSS:function(e,t){if(!this._dynamic_style_ele){var n=$$("head")[0],i=new Element("style",{type:"text/css",media:"screen"});n.appendChild(i)}this._dynamic_style_ele||(!Prototype.Browser.IE||Prototype.Browser.IE9||Prototype.Browser.IE10?this._dynamic_style_ele=i:(i=document.styleSheets)&&0<i.length&&(this._dynamic_style_ele=i[i.length-1])),!Prototype.Browser.IE||Prototype.Browser.IE9||Prototype.Browser.IE10?this._dynamic_style_ele&&void 0!==document.createTextNode&&this._dynamic_style_ele.appendChild(document.createTextNode(e+" {"+t+"}")):this._dynamic_style_ele&&"object"==typeof this._dynamic_style_ele.addRule&&this._dynamic_style_ele.addRule(e,t)},ignoreBounceMessage:function(e,t){$(e).up(".sitemessage").hide(),new Ajax.Request(t)},shoutForGame:function(e,t){e="/accounts/"+this.username()+"/permissions_for_game.json?game_id="+e,new Ajax.Request(e,{method:"get",onSuccess:function(e){json=e.responseJSON,allow=null!==json&&json.always_allow_shouts,t(allow)}})},kredBuyerType:function(){return this._attributes.get("kred_buyer_type")},isFacebookConnected:function(){return!!this._attributes.get("facebook_uid")},facebookAccessTokenNeedsUpdate:function(){return!!this._attributes.get("access_token_needs_update")},facebookStatus:function(){return this._attributes.get("facebook_status")},currentLocale:function(){return this._attributes.get("current_locale")},currentLocaleIsDefault:function(){return this._attributes.get("current_locale_is_default")},currentPrefferedLocale:function(){return this._attributes.get("current_preffered_locale")},hasGoogleADayForToday:function(){return!!this.isAuthenticated()&&!!this._attributes.get("gad_earned")},getSplitTreatmentPermalink:function(e,t,n){this._splitTreatmentPermalinks[e]?t(this._splitTreatmentPermalinks[e]):new Ajax.Request("/site_visitor_split_treatments/"+e,{method:"get",onSuccess:function(n){t(n.responseText),active_user._splitTreatmentPermalinks[e]=n.responseText,Cookie.set("splitTreatmentPermalinks",Object.toJSON(active_user._splitTreatmentPermalinks))},onFailure:n})},favoritesCount:function(){return this._attributes.get("favorites_count")},playLatersCount:function(){return this._attributes.get("play_laters_count")},underage:function(){return this._attributes.get("underage")},src:function(){return this._attributes.get("src")},crazyEggSplitTreatment:function(){return this._attributes.get("crazy_egg_split_treatment")},showFacebookRegistrationTab:function(){return this._attributes.get("show_facebook_registration")||!1},gameSplitTreatments:function(e){var t=[];return $H(this.split_treatments).each((function(n){n.key.substring(0,e.length)===e&&t.push(n.key+","+n.value)})),0===t.size()?"none":t.join("|")},inCloseLinkTest:function(){return"no_skiplink"==this.split_treatments["143905321_reboot_no_bumper_skip_button"]},kongpanionInfo:function(){return this._attributes.get("kongpanion")},botdsThisWeek:function(){return this.justRegisteredOnGamePage()&&1==this._attributes.get("botds_this_week")?0:this._attributes.get("botds_this_week")||0},shinyThreshold:function(){return this._attributes.get("shiny_threshold")},kredsBalance:function(){return this._attributes.get("kreds_balance")},chipsBalance:function(){return this._attributes.get("chips_balance")},areCloudSavesEnabled:function(){var e=this._attributes.get("cloud_saves_enabled");return void 0===e&&(e=!1),e},hideRateThisGameTab:function(){return this.animationThrowdownSteam()||this._attributes.get("hide_rate_this_game_tab")},getsNoTranslations:function(){return"no_translations"==this.split_treatments["104962302_show_non_translated_site"]},defaultToOptOut:function(){return"unchecked_checkbox"==this.split_treatments["158398427_unchecked_opt_in_checkbox"]},showFeatureRollItemSplits:function(){var e=this.split_treatments.feature_roll;$j.each(e,(function(t){$j("."+e[t]).show()}))}};var COMPILED=!0,goog=goog||{};goog.global=this,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.provide=function(e){if(!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e];for(var t=e;(t=t.substring(0,t.lastIndexOf(".")))&&!goog.getObjectByName(t);)goog.implicitNamespaces_[t]=!0}goog.exportPath_(e)},goog.setTestOnly=function(e){if(COMPILED&&!goog.DEBUG)throw e=e||"",Error(": "+e)},COMPILED||(goog.isProvided_=function(e){return!goog.implicitNamespaces_[e]&&!!goog.getObjectByName(e)},goog.implicitNamespaces_={}),goog.exportPath_=function(e,t,n){e=e.split("."),n=n||goog.global,e[0]in n||!n.execScript||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)!e.length&&goog.isDef(t)?n[i]=t:n=n[i]?n[i]:n[i]={}},goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var n;n=e.shift();){if(!goog.isDefAndNotNull(t[n]))return null;t=t[n]}return t},goog.globalize=function(e,t){for(var n in t=t||goog.global,e)t[n]=e[n]},goog.addDependency=function(e,t,n){if(!COMPILED){var i;e=e.replace(/\\/g,"/");for(var o=goog.dependencies_,r=0;i=t[r];r++)o.nameToPath[i]=e,e in o.pathToNames||(o.pathToNames[e]={}),o.pathToNames[e][i]=!0;for(i=0;t=n[i];i++)e in o.requires||(o.requires[e]={}),o.requires[e][t]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.require=function(e){if(!COMPILED&&!goog.isProvided_(e)){if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.included_[t]=!0,void goog.writeScripts_()}throw e="goog.require could not find: "+e,goog.global.console&&goog.global.console.error(e),Error(e)}},goog.basePath="",goog.global.CLOSURE_NO_DEPS=!0,goog.nullFunction=function(){},goog.identityFunction=function(e,t){return e},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return void 0!==e&&"write"in e},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document.getElementsByTagName("script"),t=e.length-1;0<=t;--t){var n=e[t].src,i=n.lastIndexOf("?");if(i=-1==i?n.length:i,"base.js"==n.substr(i-7,7)){goog.basePath=n.substr(0,i-7);break}}},goog.importScript_=function(e){var t=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[e]&&t(e)&&(goog.dependencies_.written[e]=!0)},goog.writeScriptTag_=function(e){if(goog.inHtmlDocument_()){var t=goog.global.document;if("complete"==t.readyState){if(/\bdeps.js$/.test(e))return!1;throw Error('Cannot write "'+e+'" after document load')}return t.write('<script type="text/javascript" src="'+e+'"><\/script>'),!0}return!1},goog.writeScripts_=function(){function e(t){if(!(t in o.written)){if(!(t in o.visited)&&(o.visited[t]=!0,t in o.requires))for(var r in o.requires[t])if(!goog.isProvided_(r)){if(!(r in o.nameToPath))throw Error("Undefined nameToPath for "+r);e(o.nameToPath[r])}t in i||(i[t]=!0,n.push(t))}}var t,n=[],i={},o=goog.dependencies_;for(t in goog.included_)o.written[t]||e(t);for(t=0;t<n.length;t++){if(!n[t])throw Error("Undefined script input");goog.importScript_(goog.basePath+n[t])}},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isDef=function(e){return void 0!==e},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();for(var n in t="array"==t?[]:{},e)t[n]=goog.cloneObject(e[n]);return t}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=Array.prototype.slice.call(arguments);return t.unshift.apply(t,n),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),void 0!==goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,n=t.createElement("script");n.type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.body.appendChild(n),t.body.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){var n=function(e){return goog.cssNameMapping_[e]||e},i=function(e){e=e.split("-");for(var t=[],i=0;i<e.length;i++)t.push(n(e[i]));return t.join("-")};return i=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:i:function(e){return e},t?e+"-"+i(t):i(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){for(var n in t=t||{}){var i=(""+t[n]).replace(/\$/g,"$$$$");e=e.replace(new RegExp("\\{\\$"+n+"\\}","gi"),i)}return e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e},goog.base=function(e,t,n){var i=arguments.callee.caller;if(i.superClass_)return i.superClass_.constructor.apply(e,Array.prototype.slice.call(arguments,1));for(var o=Array.prototype.slice.call(arguments,2),r=!1,s=e.constructor;s;s=s.superClass_&&s.superClass_.constructor)if(s.prototype[t]===i)r=!0;else if(r)return s.prototype[t].apply(e,o);if(e[t]===i)return e.constructor.prototype[t].apply(e,o);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)};var webfont={DomHelper:function(e,t){this.mainWindow_=e,this.loadWindow_=t||e,this.document_=this.loadWindow_.document,this.supportForStyle_=void 0}};webfont.DomHelper.prototype.createElement=function(e,t,n){if(e=this.document_.createElement(e),t)for(var i in t)t.hasOwnProperty(i)&&("style"==i?this.setStyle(e,t[i]):e.setAttribute(i,t[i]));return n&&e.appendChild(this.document_.createTextNode(n)),e},webfont.DomHelper.prototype.insertInto=function(e,t){return(e=this.document_.getElementsByTagName(e)[0])||(e=document.documentElement),!(!e||!e.lastChild)&&(e.insertBefore(t,e.lastChild),!0)},webfont.DomHelper.prototype.whenBodyExists=function(e){var t=function(){document.body?e():setTimeout(t,0)};t()},webfont.DomHelper.prototype.removeElement=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},webfont.DomHelper.prototype.createCssLink=function(e){return this.createElement("link",{rel:"stylesheet",href:e})},webfont.DomHelper.prototype.createScriptSrc=function(e){return this.createElement("script",{src:e})},webfont.DomHelper.prototype.appendClassName=function(e,t){for(var n=e.className.split(/\s+/),i=0,o=n.length;i<o;i++)if(n[i]==t)return;n.push(t),e.className=n.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")},webfont.DomHelper.prototype.removeClassName=function(e,t){for(var n=e.className.split(/\s+/),i=[],o=0,r=n.length;o<r;o++)n[o]!=t&&i.push(n[o]);e.className=i.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")},webfont.DomHelper.prototype.hasClassName=function(e,t){for(var n=0,i=(e=e.className.split(/\s+/)).length;n<i;n++)if(e[n]==t)return!0;return!1},webfont.DomHelper.prototype.setStyle=function(e,t){this.hasSupportForStyle_()?e.setAttribute("style",t):e.style.cssText=t},webfont.DomHelper.prototype.hasSupportForStyle_=function(){if(void 0===this.supportForStyle_){var e=this.document_.createElement("p");e.innerHTML='<a style="top:1px;">w</a>',this.supportForStyle_=/top/.test(e.getElementsByTagName("a")[0].getAttribute("style"))}return this.supportForStyle_},webfont.DomHelper.prototype.getMainWindow=function(){return this.mainWindow_},webfont.DomHelper.prototype.getLoadWindow=function(){return this.loadWindow_},webfont.DomHelper.prototype.getProtocol=function(){var e=this.loadWindow_.location.protocol;return"about:"==e&&(e=this.mainWindow_.location.protocol),"https:"==e?"https:":"http:"},webfont.BrowserInfo=function(e,t,n){this.webfontSupport_=e,this.webKitFallbackBug_=t,this.webKitMetricsBug_=n},webfont.BrowserInfo.prototype.hasWebFontSupport=function(){return this.webfontSupport_},webfont.BrowserInfo.prototype.hasWebKitFallbackBug=function(){return this.webKitFallbackBug_},webfont.BrowserInfo.prototype.hasWebKitMetricsBug=function(){return this.webKitMetricsBug_},webfont.UserAgent=function(e,t,n,i,o,r,s,a){this.name_=e,this.version_=t,this.engine_=n,this.engineVersion_=i,this.platform_=o,this.platformVersion_=r,this.documentMode_=s,this.browserInfo_=a},webfont.UserAgent.prototype.getName=function(){return this.name_},webfont.UserAgent.prototype.getVersion=function(){return this.version_},webfont.UserAgent.prototype.getEngine=function(){return this.engine_},webfont.UserAgent.prototype.getEngineVersion=function(){return this.engineVersion_},webfont.UserAgent.prototype.getPlatform=function(){return this.platform_},webfont.UserAgent.prototype.getPlatformVersion=function(){return this.platformVersion_},webfont.UserAgent.prototype.getDocumentMode=function(){return this.documentMode_},webfont.UserAgent.prototype.getBrowserInfo=function(){return this.browserInfo_},webfont.UserAgentParser=function(e,t){this.userAgent_=e,this.doc_=t},webfont.UserAgentParser.UNKNOWN="Unknown",webfont.UserAgentParser.BUILTIN_BROWSER="BuiltinBrowser",webfont.UserAgentParser.UNKNOWN_USER_AGENT=new webfont.UserAgent(webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,webfont.UserAgentParser.UNKNOWN,void 0,new webfont.BrowserInfo(!1,!1,!1)),webfont.UserAgentParser.prototype.parse=function(){return this.isIe_()?this.parseIeUserAgentString_():this.isOpera_()?this.parseOperaUserAgentString_():this.isWebKit_()?this.parseWebKitUserAgentString_():this.isGecko_()?this.parseGeckoUserAgentString_():webfont.UserAgentParser.UNKNOWN_USER_AGENT},webfont.UserAgentParser.prototype.getPlatform_=function(){var e=this.getMatchingGroup_(this.userAgent_,/(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/,1);return""!=e?(/BB\d{2}/.test(e)&&(e="BlackBerry"),e):""!=(e=this.getMatchingGroup_(this.userAgent_,/(Linux|Mac_PowerPC|Macintosh|Windows|CrOS)/,1))?("Mac_PowerPC"==e&&(e="Macintosh"),e):webfont.UserAgentParser.UNKNOWN},webfont.UserAgentParser.prototype.getPlatformVersion_=function(){var e=this.getMatchingGroup_(this.userAgent_,/(OS X|Windows NT|Android|CrOS) ([^;)]+)/,2);return e||(e=this.getMatchingGroup_(this.userAgent_,/Windows Phone( OS)? ([^;)]+)/,2))||(e=this.getMatchingGroup_(this.userAgent_,/(iPhone )?OS ([\d_]+)/,2))||(e=this.getMatchingGroup_(this.userAgent_,/Linux ([i\d]+)/,1))||(e=this.getMatchingGroup_(this.userAgent_,/(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/,2))?e:webfont.UserAgentParser.UNKNOWN},webfont.UserAgentParser.prototype.isIe_=function(){return-1!=this.userAgent_.indexOf("MSIE")},webfont.UserAgentParser.prototype.parseIeUserAgentString_=function(){var e=this.getPlatform_(),t=this.getPlatformVersion_(),n=this.getMatchingGroup_(this.userAgent_,/(MSIE [\d\w\.]+)/,1);if(""!=n){var i=n.split(" ");n=i[0],i=i[1];var o=this.parseVersion_(i),r=this.parseVersion_(t);return o="Windows"==e&&6<=o.major||"Windows Phone"==e&&8<=r.major,new webfont.UserAgent(n,i,n,i,e,t,this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(o,!1,!1))}return new webfont.UserAgent("MSIE",webfont.UserAgentParser.UNKNOWN,"MSIE",webfont.UserAgentParser.UNKNOWN,e,t,this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(!1,!1,!1))},webfont.UserAgentParser.prototype.isOpera_=function(){return-1!=this.userAgent_.indexOf("Opera")},webfont.UserAgentParser.prototype.parseOperaUserAgentString_=function(){var e=webfont.UserAgentParser.UNKNOWN,t=webfont.UserAgentParser.UNKNOWN,n=this.getMatchingGroup_(this.userAgent_,/(Presto\/[\d\w\.]+)/,1);if(""!=n?(e=(t=n.split("/"))[0],t=t[1]):(-1!=this.userAgent_.indexOf("Gecko")&&(e="Gecko"),""!=(n=this.getMatchingGroup_(this.userAgent_,/rv:([^\)]+)/,1))&&(t=n)),-1!=this.userAgent_.indexOf("Opera Mini/"))return""==(n=this.getMatchingGroup_(this.userAgent_,/Opera Mini\/([\d\.]+)/,1))&&(n=webfont.UserAgentParser.UNKNOWN),new webfont.UserAgent("OperaMini",n,e,t,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(!1,!1,!1));if(-1!=this.userAgent_.indexOf("Version/")){var i=this.getMatchingGroup_(this.userAgent_,/Version\/([\d\.]+)/,1);if(""!=i)return n=this.parseVersion_(i),new webfont.UserAgent("Opera",i,e,t,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(10<=n.major,!1,!1))}return""!=(i=this.getMatchingGroup_(this.userAgent_,/Opera[\/ ]([\d\.]+)/,1))?(n=this.parseVersion_(i),new webfont.UserAgent("Opera",i,e,t,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(10<=n.major,!1,!1))):new webfont.UserAgent("Opera",webfont.UserAgentParser.UNKNOWN,e,t,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(!1,!1,!1))},webfont.UserAgentParser.prototype.isWebKit_=function(){return/AppleWeb(K|k)it/.test(this.userAgent_)},webfont.UserAgentParser.prototype.parseWebKitUserAgentString_=function(){var e=this.getPlatform_(),t=this.getPlatformVersion_(),n=this.getMatchingGroup_(this.userAgent_,/AppleWeb(?:K|k)it\/([\d\.\+]+)/,1);""==n&&(n=webfont.UserAgentParser.UNKNOWN);var i=this.parseVersion_(n),o=this.parseVersion_(t),r=webfont.UserAgentParser.UNKNOWN;-1!=this.userAgent_.indexOf("Chrome")||-1!=this.userAgent_.indexOf("CrMo")||-1!=this.userAgent_.indexOf("CriOS")?r="Chrome":/Silk\/\d/.test(this.userAgent_)?r="Silk":"BlackBerry"==e||"Android"==e?r=webfont.UserAgentParser.BUILTIN_BROWSER:-1!=this.userAgent_.indexOf("Safari")?r="Safari":-1!=this.userAgent_.indexOf("AdobeAIR")&&(r="AdobeAIR");var s=webfont.UserAgentParser.UNKNOWN;r==webfont.UserAgentParser.BUILTIN_BROWSER?s=webfont.UserAgentParser.UNKNOWN:/Silk\/\d/.test(this.userAgent_)?s=this.getMatchingGroup_(this.userAgent_,/Silk\/([\d\._]+)/,1):-1!=this.userAgent_.indexOf("Version/")?s=this.getMatchingGroup_(this.userAgent_,/Version\/([\d\.\w]+)/,1):"Chrome"==r?s=this.getMatchingGroup_(this.userAgent_,/(Chrome|CrMo|CriOS)\/([\d\.]+)/,2):"AdobeAIR"==r&&(s=this.getMatchingGroup_(this.userAgent_,/AdobeAIR\/([\d\.]+)/,1)),"AdobeAIR"==r?o=2<(o=this.parseVersion_(s)).major||2==o.major&&5<=o.minor:o="BlackBerry"==e?10<=o.major:"Android"==e?2<o.major||2==o.major&&1<o.minor:526<=i.major||525<=i.major&&13<=i.minor,i=536>i.major||536==i.major&&11>i.minor;var a="iPhone"==e||"iPad"==e||"iPod"==e||"Macintosh"==e;return new webfont.UserAgent(r,s,"AppleWebKit",n,e,t,this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(o,i,a))},webfont.UserAgentParser.prototype.isGecko_=function(){return-1!=this.userAgent_.indexOf("Gecko")},webfont.UserAgentParser.prototype.parseGeckoUserAgentString_=function(){var e=webfont.UserAgentParser.UNKNOWN,t=webfont.UserAgentParser.UNKNOWN,n=!1;if(-1!=this.userAgent_.indexOf("Firefox")){e="Firefox";var i=this.getMatchingGroup_(this.userAgent_,/Firefox\/([\d\w\.]+)/,1);""!=i&&(t=i,n=3<=(n=this.parseVersion_(i)).major&&5<=n.minor)}else-1!=this.userAgent_.indexOf("Mozilla")&&(e="Mozilla");return""==(i=this.getMatchingGroup_(this.userAgent_,/rv:([^\)]+)/,1))?i=webfont.UserAgentParser.UNKNOWN:n||(n=1<(n=this.parseVersion_(i)).major||1==n.major&&9<n.minor||1==n.major&&9==n.minor&&2<=n.patch||null!=i.match(/1\.9\.1b[123]/)||null!=i.match(/1\.9\.1\.[\d\.]+/)),new webfont.UserAgent(e,t,"Gecko",i,this.getPlatform_(),this.getPlatformVersion_(),this.getDocumentMode_(this.doc_),new webfont.BrowserInfo(n,!1,!1))},webfont.UserAgentParser.prototype.parseVersion_=function(e){var t={};return(e=/([0-9]+)(?:\.([0-9]+)(?:\.([0-9]+)?)?)?/.exec(e))&&(t.major=parseInt(e[1]||-1,10),t.minor=parseInt(e[2]||-1,10),t.patch=parseInt(e[3]||-1,10)),t},webfont.UserAgentParser.prototype.getMatchingGroup_=function(e,t,n){return(e=e.match(t))&&e[n]?e[n]:""},webfont.UserAgentParser.prototype.getDocumentMode_=function(e){if(e.documentMode)return e.documentMode},webfont.CssClassName=function(e){this.joinChar_=e||webfont.CssClassName.DEFAULT_JOIN_CHAR},webfont.CssClassName.DEFAULT_JOIN_CHAR="-",webfont.CssClassName.prototype.sanitize=function(e){return e.replace(/[\W_]+/g,"").toLowerCase()},webfont.CssClassName.prototype.build=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(this.sanitize(arguments[n]));return t.join(this.joinChar_)},webfont.Font=function(e,t){this.name_=e,this.weight_=4,this.style_="n",(e=(t||"n4").match(/^([nio])([1-9])$/i))&&(this.style_=e[1],this.weight_=parseInt(e[2],10))},webfont.Font.prototype.getName=function(){return this.name_},webfont.Font.prototype.getCssName=function(){return this.quote_(this.name_)},webfont.Font.prototype.quote_=function(e){var t=[];e=e.split(/,\s*/);for(var n=0;n<e.length;n++){var i=e[n].replace(/['"]/g,"");-1==i.indexOf(" ")?t.push(i):t.push("'"+i+"'")}return t.join(",")},webfont.Font.prototype.getVariation=function(){return this.style_+this.weight_},webfont.Font.prototype.getCssVariation=function(){var e="normal",t=this.weight_+"00";return"o"===this.style_?e="oblique":"i"===this.style_&&(e="italic"),"font-style:"+e+";font-weight:"+t+";"},webfont.Font.parseCssVariation=function(e){var t,n=4,i="n";return e&&((t=e.match(/(normal|oblique|italic)/i))&&t[1]&&(i=t[1].substr(0,1).toLowerCase()),(t=e.match(/([1-9]00|normal|bold)/i))&&t[1]&&(/bold/i.test(t[1])?n=7:/[1-9]00/.test(t[1])&&(n=parseInt(t[1].substr(0,1),10)))),i+n},webfont.EventDispatcher=function(e,t,n,i){this.domHelper_=e,this.htmlElement_=t,this.callbacks_=n,this.namespace_=i||webfont.EventDispatcher.DEFAULT_NAMESPACE,this.cssClassName_=new webfont.CssClassName("-")},webfont.EventDispatcher.DEFAULT_NAMESPACE="wf",webfont.EventDispatcher.LOADING="loading",webfont.EventDispatcher.ACTIVE="active",webfont.EventDispatcher.INACTIVE="inactive",webfont.EventDispatcher.FONT="font",webfont.EventDispatcher.prototype.dispatchLoading=function(){this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING)),this.dispatch_(webfont.EventDispatcher.LOADING)},webfont.EventDispatcher.prototype.dispatchFontLoading=function(e){this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,e.getName(),e.getVariation().toString(),webfont.EventDispatcher.LOADING)),this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.LOADING,e)},webfont.EventDispatcher.prototype.dispatchFontActive=function(e){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,e.getName(),e.getVariation().toString(),webfont.EventDispatcher.LOADING)),this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,e.getName(),e.getVariation().toString(),webfont.EventDispatcher.INACTIVE)),this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,e.getName(),e.getVariation().toString(),webfont.EventDispatcher.ACTIVE)),this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.ACTIVE,e)},webfont.EventDispatcher.prototype.dispatchFontInactive=function(e){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,e.getName(),e.getVariation().toString(),webfont.EventDispatcher.LOADING)),this.domHelper_.hasClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,e.getName(),e.getVariation().toString(),webfont.EventDispatcher.ACTIVE))||this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,e.getName(),e.getVariation().toString(),webfont.EventDispatcher.INACTIVE)),this.dispatch_(webfont.EventDispatcher.FONT+webfont.EventDispatcher.INACTIVE,e)},webfont.EventDispatcher.prototype.dispatchInactive=function(){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING)),this.domHelper_.hasClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.ACTIVE))||this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.INACTIVE)),this.dispatch_(webfont.EventDispatcher.INACTIVE)},webfont.EventDispatcher.prototype.dispatchActive=function(){this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.LOADING)),this.domHelper_.removeClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.INACTIVE)),this.domHelper_.appendClassName(this.htmlElement_,this.cssClassName_.build(this.namespace_,webfont.EventDispatcher.ACTIVE)),this.dispatch_(webfont.EventDispatcher.ACTIVE)},webfont.EventDispatcher.prototype.dispatch_=function(e,t){this.callbacks_[e]&&(t?this.callbacks_[e](t.getName(),t.getVariation()):this.callbacks_[e]())},webfont.FontModule=function(){},webfont.FontModule.prototype.supportUserAgent=function(e,t){},webfont.FontModule.prototype.load=function(e){},webfont.FontModuleLoader=function(){this.modules_={}},webfont.FontModuleLoader.prototype.addModuleFactory=function(e,t){this.modules_[e]=t},webfont.FontModuleLoader.prototype.getModules=function(e,t){var n,i=[];for(n in e)if(e.hasOwnProperty(n)){var o=this.modules_[n];o&&i.push(o(e[n],t))}return i},webfont.FontRuler=function(e,t){this.domHelper_=e,this.fontTestString_=t,this.el_=this.domHelper_.createElement("span",{"aria-hidden":"true"},this.fontTestString_)},webfont.FontRuler.prototype.setFont=function(e){this.domHelper_.setStyle(this.el_,this.computeStyleString_(e))},webfont.FontRuler.prototype.insert=function(){this.domHelper_.insertInto("body",this.el_)},webfont.FontRuler.prototype.computeStyleString_=function(e){return"position:absolute;top:-999px;left:-999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+e.getCssName()+";"+e.getCssVariation()},webfont.FontRuler.prototype.getWidth=function(){return this.el_.offsetWidth},webfont.FontRuler.prototype.remove=function(){this.domHelper_.removeElement(this.el_)},webfont.FontWatchRunner=function(e,t,n,i,o,r,s,a){this.activeCallback_=e,this.inactiveCallback_=t,this.domHelper_=n,this.font_=i,this.fontTestString_=a||webfont.FontWatchRunner.DEFAULT_TEST_STRING,this.browserInfo_=o,this.lastResortWidths_={},this.timeout_=r||5e3,this.metricCompatibleFonts_=s||null,this.fontRulerB_=this.fontRulerA_=null,this.setupLastResortWidths_()},webfont.FontWatchRunner.LastResortFonts={SERIF:"serif",SANS_SERIF:"sans-serif",MONOSPACE:"monospace"},webfont.FontWatchRunner.DEFAULT_TEST_STRING="BESbswy",webfont.FontWatchRunner.prototype.setupLastResortWidths_=function(){var e=new webfont.FontRuler(this.domHelper_,this.fontTestString_);for(var t in e.insert(),webfont.FontWatchRunner.LastResortFonts)webfont.FontWatchRunner.LastResortFonts.hasOwnProperty(t)&&(e.setFont(new webfont.Font(webfont.FontWatchRunner.LastResortFonts[t],this.font_.getVariation())),this.lastResortWidths_[webfont.FontWatchRunner.LastResortFonts[t]]=e.getWidth());e.remove()},webfont.FontWatchRunner.prototype.start=function(){this.fontRulerA_=new webfont.FontRuler(this.domHelper_,this.fontTestString_),this.fontRulerA_.insert(),this.fontRulerB_=new webfont.FontRuler(this.domHelper_,this.fontTestString_),this.fontRulerB_.insert(),this.started_=goog.now(),this.fontRulerA_.setFont(new webfont.Font(this.font_.getName()+","+webfont.FontWatchRunner.LastResortFonts.SERIF,this.font_.getVariation())),this.fontRulerB_.setFont(new webfont.Font(this.font_.getName()+","+webfont.FontWatchRunner.LastResortFonts.SANS_SERIF,this.font_.getVariation())),this.check_()},webfont.FontWatchRunner.prototype.widthMatches_=function(e,t){return e===this.lastResortWidths_[t]},webfont.FontWatchRunner.prototype.widthsMatchLastResortWidths_=function(e,t){for(var n in webfont.FontWatchRunner.LastResortFonts)if(webfont.FontWatchRunner.LastResortFonts.hasOwnProperty(n)&&this.widthMatches_(e,webfont.FontWatchRunner.LastResortFonts[n])&&this.widthMatches_(t,webfont.FontWatchRunner.LastResortFonts[n]))return!0;return!1},webfont.FontWatchRunner.prototype.hasTimedOut_=function(){return goog.now()-this.started_>=this.timeout_},webfont.FontWatchRunner.prototype.isFallbackFont_=function(e,t){return this.widthMatches_(e,webfont.FontWatchRunner.LastResortFonts.SERIF)&&this.widthMatches_(t,webfont.FontWatchRunner.LastResortFonts.SANS_SERIF)},webfont.FontWatchRunner.prototype.isLastResortFont_=function(e,t){return this.browserInfo_.hasWebKitFallbackBug()&&this.widthsMatchLastResortWidths_(e,t)},webfont.FontWatchRunner.prototype.isMetricCompatibleFont_=function(){return null===this.metricCompatibleFonts_||this.metricCompatibleFonts_.hasOwnProperty(this.font_.getName())},webfont.FontWatchRunner.prototype.check_=function(){var e=this.fontRulerA_.getWidth(),t=this.fontRulerB_.getWidth();this.isFallbackFont_(e,t)||this.isLastResortFont_(e,t)?this.hasTimedOut_()?this.isLastResortFont_(e,t)&&this.isMetricCompatibleFont_()?this.finish_(this.activeCallback_):this.finish_(this.inactiveCallback_):this.asyncCheck_():this.finish_(this.activeCallback_)},webfont.FontWatchRunner.prototype.asyncCheck_=function(){setTimeout(goog.bind((function(){this.check_()}),this),25)},webfont.FontWatchRunner.prototype.finish_=function(e){this.fontRulerA_.remove(),this.fontRulerB_.remove(),e(this.font_)},webfont.FontWatcher=function(e,t,n,i){this.domHelper_=t,this.eventDispatcher_=n,this.currentlyWatched_=0,this.success_=this.last_=!1,this.timeout_=i,this.browserInfo_=e.getBrowserInfo()},webfont.FontWatcher.prototype.watch=function(e,t,n,i){var o=e.length;if(0===o&&i)this.eventDispatcher_.dispatchInactive();else for(this.currentlyWatched_+=o,i&&(this.last_=i),i=0;i<o;i++){var r=e[i],s=t[r.getName()];this.eventDispatcher_.dispatchFontLoading(r),new n(goog.bind(this.fontActive_,this),goog.bind(this.fontInactive_,this),this.domHelper_,r,this.browserInfo_,this.timeout_,null,s).start()}},webfont.FontWatcher.prototype.fontActive_=function(e){this.eventDispatcher_.dispatchFontActive(e),this.success_=!0,this.decreaseCurrentlyWatched_()},webfont.FontWatcher.prototype.fontInactive_=function(e){this.eventDispatcher_.dispatchFontInactive(e),this.decreaseCurrentlyWatched_()},webfont.FontWatcher.prototype.decreaseCurrentlyWatched_=function(){0==--this.currentlyWatched_&&this.last_&&(this.success_?this.eventDispatcher_.dispatchActive():this.eventDispatcher_.dispatchInactive())},webfont.WebFont=function(e,t,n){this.mainWindow_=e,this.fontModuleLoader_=t,this.userAgent_=n,this.moduleFailedLoading_=this.moduleLoading_=0},webfont.WebFont.prototype.addModule=function(e,t){this.fontModuleLoader_.addModuleFactory(e,t)},webfont.WebFont.prototype.load=function(e){var t=e.context||this.mainWindow_;this.domHelper_=new webfont.DomHelper(this.mainWindow_,t),t=new webfont.EventDispatcher(this.domHelper_,t.document.documentElement,e),this.userAgent_.getBrowserInfo().hasWebFontSupport()?this.load_(t,e):t.dispatchInactive()},webfont.WebFont.prototype.isModuleSupportingUserAgent_=function(e,t,n,i){var o=e.getFontWatchRunnerCtor?e.getFontWatchRunnerCtor():webfont.FontWatchRunner,r=this;i?e.load((function(e,i){r.onModuleReady_(t,n,o,e,i)})):(e=0==--this.moduleLoading_,this.moduleFailedLoading_--,e&&(0==this.moduleFailedLoading_?t.dispatchInactive():t.dispatchLoading()),n.watch([],{},o,e))},webfont.WebFont.prototype.onModuleReady_=function(e,t,n,i,o){var r=0==--this.moduleLoading_;r&&e.dispatchLoading(),setTimeout((function(){t.watch(i,o||{},n,r)}),0)},webfont.WebFont.prototype.load_=function(e,t){var n=this.fontModuleLoader_.getModules(t,this.domHelper_);t=t.timeout,this.moduleFailedLoading_=this.moduleLoading_=n.length,t=new webfont.FontWatcher(this.userAgent_,this.domHelper_,e,t);for(var i=0,o=n.length;i<o;i++){var r=n[i];r.supportUserAgent(this.userAgent_,goog.bind(this.isModuleSupportingUserAgent_,this,r,e,t))}};var GLOBAL_NAME="WebFont",globalNamespaceObject=window[GLOBAL_NAME]=function(){var e=new webfont.UserAgentParser(navigator.userAgent,document).parse(),t=new webfont.FontModuleLoader;return new webfont.WebFont(window,t,e)}();function FlashMessages(e){this.initialize(e)}globalNamespaceObject.load=globalNamespaceObject.load,webfont.LastResortWebKitFontWatchRunner=function(e,t,n,i,o,r,s,a){webfont.FontWatchRunner.call(this,e,t,n,i,o,r,s,a),this.webKitLastResortFontWidths_=this.setUpWebKitLastResortFontWidths_(),this.webKitLastResortWidthChange_=!1,this.lastObservedWidthA_=this.lastResortWidths_[webfont.FontWatchRunner.LastResortFonts.SERIF],this.lastObservedWidthB_=this.lastResortWidths_[webfont.FontWatchRunner.LastResortFonts.SANS_SERIF]},goog.inherits(webfont.LastResortWebKitFontWatchRunner,webfont.FontWatchRunner),webfont.LastResortWebKitFontWatchRunner.METRICS_COMPATIBLE_FONTS={Arimo:!0,Cousine:!0,Tinos:!0},webfont.LastResortWebKitFontWatchRunner.prototype.setUpWebKitLastResortFontWidths_=function(){var e=["Times New Roman","Arial","Times","Sans","Serif"],t=this.font_.getVariation(),n=e.length,i={},o=new webfont.FontRuler(this.domHelper_,this.fontTestString_);o.insert(),o.setFont(new webfont.Font(e[0],t)),i[o.getWidth()]=!0;for(var r=1;r<n;r++){var s=e[r];o.setFont(new webfont.Font(s,t)),i[o.getWidth()]=!0,"4"!=t.toString().charAt(1)&&(o.setFont(new webfont.Font(s,t.charAt(0)+"4")),i[o.getWidth()]=!0)}return o.remove(),i},webfont.LastResortWebKitFontWatchRunner.prototype.check_=function(){var e=this.fontRulerA_.getWidth(),t=this.fontRulerB_.getWidth();!this.webKitLastResortWidthChange_&&e==t&&this.webKitLastResortFontWidths_[e]&&(this.webKitLastResortFontWidths_={},this.webKitLastResortWidthChange_=this.webKitLastResortFontWidths_[e]=!0),this.lastObservedWidthA_==e&&this.lastObservedWidthB_==t||this.webKitLastResortFontWidths_[e]||this.webKitLastResortFontWidths_[t]?this.hasTimedOut_()?this.webKitLastResortFontWidths_[e]&&this.webKitLastResortFontWidths_[t]&&webfont.LastResortWebKitFontWatchRunner.METRICS_COMPATIBLE_FONTS[this.font_.getName()]?this.finish_(this.activeCallback_):this.finish_(this.inactiveCallback_):this.asyncCheck_():this.finish_(this.activeCallback_)},webfont.FontApiUrlBuilder=function(e,t,n){this.apiUrl_=e||t+webfont.FontApiUrlBuilder.DEFAULT_API_URL,this.fontFamilies_=[],this.subsets_=[],this.text_=n||""},webfont.FontApiUrlBuilder.DEFAULT_API_URL="//fonts.googleapis.com/css",webfont.FontApiUrlBuilder.prototype.setFontFamilies=function(e){this.parseFontFamilies_(e)},webfont.FontApiUrlBuilder.prototype.parseFontFamilies_=function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n].split(":");3==i.length&&this.subsets_.push(i.pop());var o="";2==i.length&&""!=i[1]&&(o=":"),this.fontFamilies_.push(i.join(o))}},webfont.FontApiUrlBuilder.prototype.webSafe=function(e){return e.replace(/ /g,"+")},webfont.FontApiUrlBuilder.prototype.build=function(){if(0==this.fontFamilies_.length)throw Error("No fonts to load !");if(-1!=this.apiUrl_.indexOf("kit="))return this.apiUrl_;for(var e=this.fontFamilies_.length,t=[],n=0;n<e;n++)t.push(this.webSafe(this.fontFamilies_[n]));return e=this.apiUrl_+"?family="+t.join("%7C"),0<this.subsets_.length&&(e+="&subset="+this.subsets_.join(",")),0<this.text_.length&&(e+="&text="+encodeURIComponent(this.text_)),e},webfont.FontApiParser=function(e){this.fontFamilies_=e,this.parsedFonts_=[],this.fontTestStrings_={}},webfont.FontApiParser.INT_FONTS={latin:webfont.FontWatchRunner.DEFAULT_TEST_STRING,cyrillic:"&#1081;&#1103;&#1046;",greek:"&#945;&#946;&#931;",khmer:"&#x1780;&#x1781;&#x1782;",Hanuman:"&#x1780;&#x1781;&#x1782;"},webfont.FontApiParser.WEIGHTS={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},webfont.FontApiParser.STYLES={i:"i",italic:"i",n:"n",normal:"n"},webfont.FontApiParser.VARIATION_MATCH=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,webfont.FontApiParser.prototype.parse=function(){for(var e=this.fontFamilies_.length,t=0;t<e;t++){var n=this.fontFamilies_[t].split(":"),i=n[0].replace(/\+/g," "),o=["n4"];if(2<=n.length){var r=this.parseVariations_(n[1]);0<r.length&&(o=r),3==n.length&&(0<(n=this.parseSubsets_(n[2])).length&&(n=webfont.FontApiParser.INT_FONTS[n[0]])&&(this.fontTestStrings_[i]=n))}for(this.fontTestStrings_[i]||(n=webfont.FontApiParser.INT_FONTS[i])&&(this.fontTestStrings_[i]=n),n=0;n<o.length;n+=1)this.parsedFonts_.push(new webfont.Font(i,o[n]))}},webfont.FontApiParser.prototype.generateFontVariationDescription_=function(e){if(!e.match(/^[\w]+$/))return"";e=e.toLowerCase();var t=webfont.FontApiParser.VARIATION_MATCH.exec(e);return null==t?"":[e=this.normalizeStyle_(t[2]),t=this.normalizeWeight_(t[1])].join("")},webfont.FontApiParser.prototype.normalizeStyle_=function(e){return null==e||""==e?"n":webfont.FontApiParser.STYLES[e]},webfont.FontApiParser.prototype.normalizeWeight_=function(e){if(null==e||""==e)return"4";var t=webfont.FontApiParser.WEIGHTS[e];return t||(isNaN(e)?"4":e.substr(0,1))},webfont.FontApiParser.prototype.parseVariations_=function(e){var t=[];if(!e)return t;for(var n=(e=e.split(",")).length,i=0;i<n;i++){var o=this.generateFontVariationDescription_(e[i]);o&&t.push(o)}return t},webfont.FontApiParser.prototype.parseSubsets_=function(e){return e?e.split(","):[]},webfont.FontApiParser.prototype.getFonts=function(){return this.parsedFonts_},webfont.FontApiParser.prototype.getFontTestStrings=function(){return this.fontTestStrings_},webfont.GoogleFontApi=function(e,t,n){this.userAgent_=e,this.domHelper_=t,this.configuration_=n},webfont.GoogleFontApi.NAME="google",webfont.GoogleFontApi.prototype.supportUserAgent=function(e,t){t(e.getBrowserInfo().hasWebFontSupport())},webfont.GoogleFontApi.prototype.getFontWatchRunnerCtor=function(){return"AppleWebKit"==this.userAgent_.getEngine()?webfont.LastResortWebKitFontWatchRunner:webfont.FontWatchRunner},webfont.GoogleFontApi.prototype.load=function(e){var t=this.domHelper_;"MSIE"==this.userAgent_.getName()&&1!=this.configuration_.blocking?t.whenBodyExists(goog.bind(this.insertLink_,this,e)):this.insertLink_(e)},webfont.GoogleFontApi.prototype.insertLink_=function(e){var t=this.domHelper_,n=new webfont.FontApiUrlBuilder(this.configuration_.api,t.getProtocol(),this.configuration_.text),i=this.configuration_.families;n.setFontFamilies(i),(i=new webfont.FontApiParser(i)).parse(),t.insertInto("head",t.createCssLink(n.build())),e(i.getFonts(),i.getFontTestStrings())},globalNamespaceObject.addModule(webfont.GoogleFontApi.NAME,(function(e,t){var n=new webfont.UserAgentParser(navigator.userAgent,document).parse();return new webfont.GoogleFontApi(n,t,e)})),webfont.AscenderScript=function(e,t){this.domHelper_=e,this.configuration_=t},webfont.AscenderScript.NAME="ascender",webfont.AscenderScript.VARIATIONS={regular:"n4",bold:"n7",italic:"i4",bolditalic:"i7",r:"n4",b:"n7",i:"i4",bi:"i7"},webfont.AscenderScript.prototype.supportUserAgent=function(e,t){return t(e.getBrowserInfo().hasWebFontSupport())},webfont.AscenderScript.prototype.load=function(e){var t=this.configuration_.key,n=this.domHelper_.getProtocol();this.domHelper_.insertInto("head",this.domHelper_.createCssLink(n+"//webfonts.fontslive.com/css/"+t+".css")),e(t=this.parseFamiliesAndVariations(this.configuration_.families))},webfont.AscenderScript.prototype.parseFamiliesAndVariations=function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push.apply(t,this.parseFamilyAndVariations(e[n]));return t},webfont.AscenderScript.prototype.parseFamilyAndVariations=function(e){var t=e.split(":");if(e=t[0],t[1]){t=this.parseVariations(t[1]);for(var n=[],i=0;i<t.length;i+=1)n.push(new webfont.Font(e,t[i]));return n}return[new webfont.Font(e)]},webfont.AscenderScript.prototype.parseVariations=function(e){for(var t=[],n=0,i=(e=e.split(",")).length;n<i;n++){var o=e[n];if(o){var r=webfont.AscenderScript.VARIATIONS[o];t.push(r||o)}}return t},globalNamespaceObject.addModule(webfont.AscenderScript.NAME,(function(e,t){return new webfont.AscenderScript(t,e)})),webfont.MonotypeScript=function(e,t,n){this.userAgent_=e,this.domHelper_=t,this.configuration_=n,this.fonts_=[]},webfont.MonotypeScript.NAME="monotype",webfont.MonotypeScript.HOOK="__mti_fntLst",webfont.MonotypeScript.SCRIPTID="__MonotypeAPIScript__",webfont.MonotypeScript.prototype.supportUserAgent=function(e,t){var n=this,i=n.configuration_.projectId,o=n.configuration_.version;if(i){var r=n.domHelper_.createElement("script");r.id=webfont.MonotypeScript.SCRIPTID+i;var s=this.domHelper_.getLoadWindow(),a=!1;r.onload=r.onreadystatechange=function(){if(!(a||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){if(a=!0,s[webfont.MonotypeScript.HOOK+i]){var o=s[webfont.MonotypeScript.HOOK+i]();if(o)for(var l=0;l<o.length;l++)n.fonts_.push(new webfont.Font(o[l].fontfamily))}t(e.getBrowserInfo().hasWebFontSupport()),r.onload=r.onreadystatechange=null}},r.src=n.getScriptSrc(i,o),this.domHelper_.insertInto("head",r)}else t(!0)},webfont.MonotypeScript.prototype.getScriptSrc=function(e,t){return this.domHelper_.getProtocol()+"//"+(this.configuration_.api||"fast.fonts.com/jsapi").replace(/^.*http(s?):(\/\/)?/,"")+"/"+e+".js"+(t?"?v="+t:"")},webfont.MonotypeScript.prototype.load=function(e){e(this.fonts_)},globalNamespaceObject.addModule(webfont.MonotypeScript.NAME,(function(e,t){var n=new webfont.UserAgentParser(navigator.userAgent,document).parse();return new webfont.MonotypeScript(n,t,e)})),webfont.TypekitScript=function(e,t){this.domHelper_=e,this.configuration_=t,this.fonts_=[]},webfont.TypekitScript.NAME="typekit",webfont.TypekitScript.HOOK="__webfonttypekitmodule__",webfont.TypekitScript.prototype.getScriptSrc=function(e){var t=this.domHelper_.getProtocol();return(this.configuration_.api||t+"//use.typekit.net")+"/"+e+".js"},webfont.TypekitScript.prototype.supportUserAgent=function(e,t){var n=this.configuration_.id,i=this.configuration_,o=this.domHelper_.getLoadWindow(),r=this;n?(o[webfont.TypekitScript.HOOK]||(o[webfont.TypekitScript.HOOK]={}),o[webfont.TypekitScript.HOOK][n]=function(n){n(e,i,(function(e,n,i){for(var o=0;o<n.length;o+=1){var s=i[n[o]];if(s)for(var a=0;a<s.length;a+=1)r.fonts_.push(new webfont.Font(n[o],s[a]));else r.fonts_.push(new webfont.Font(n[o]))}t(e)}))},n=this.domHelper_.createScriptSrc(this.getScriptSrc(n)),this.domHelper_.insertInto("head",n)):t(!0)},webfont.TypekitScript.prototype.load=function(e){e(this.fonts_)},globalNamespaceObject.addModule(webfont.TypekitScript.NAME,(function(e,t){return new webfont.TypekitScript(t,e)})),webfont.CustomCss=function(e,t){this.domHelper_=e,this.configuration_=t},webfont.CustomCss.NAME="custom",webfont.CustomCss.prototype.load=function(e){var t,n=this.configuration_.urls||[],i=this.configuration_.families||[],o=0;for(t=n.length;o<t;o++)this.domHelper_.insertInto("head",this.domHelper_.createCssLink(n[o]));for(n=[],o=0,t=i.length;o<t;o++){var r=i[o].split(":");if(r[1])for(var s=r[1].split(","),a=0;a<s.length;a+=1)n.push(new webfont.Font(r[0],s[a]));else n.push(new webfont.Font(r[0]))}e(n)},webfont.CustomCss.prototype.supportUserAgent=function(e,t){return t(e.getBrowserInfo().hasWebFontSupport())},globalNamespaceObject.addModule(webfont.CustomCss.NAME,(function(e,t){return new webfont.CustomCss(t,e)})),webfont.FontdeckScript=function(e,t){this.domHelper_=e,this.configuration_=t,this.fonts_=[]},webfont.FontdeckScript.NAME="fontdeck",webfont.FontdeckScript.HOOK="__webfontfontdeckmodule__",webfont.FontdeckScript.API="//f.fontdeck.com/s/css/js/",webfont.FontdeckScript.prototype.getScriptSrc=function(e){var t=this.domHelper_.getProtocol(),n=this.domHelper_.getLoadWindow().location.hostname||this.domHelper_.getMainWindow().location.hostname;return t+(this.configuration_.api||webfont.FontdeckScript.API)+n+"/"+e+".js"},webfont.FontdeckScript.prototype.supportUserAgent=function(e,t){e=this.configuration_.id;var n=this.domHelper_.getLoadWindow(),i=this;e?(n[webfont.FontdeckScript.HOOK]||(n[webfont.FontdeckScript.HOOK]={}),n[webfont.FontdeckScript.HOOK][e]=function(e,n){for(var o=0,r=n.fonts.length;o<r;++o){var s=n.fonts[o];i.fonts_.push(new webfont.Font(s.name,webfont.Font.parseCssVariation("font-weight:"+s.weight+";font-style:"+s.style)))}t(e)},e=this.domHelper_.createScriptSrc(this.getScriptSrc(e)),this.domHelper_.insertInto("head",e)):t(!0)},webfont.FontdeckScript.prototype.load=function(e){e(this.fonts_)},globalNamespaceObject.addModule(webfont.FontdeckScript.NAME,(function(e,t){return new webfont.FontdeckScript(t,e)})),window.WebFontConfig&&globalNamespaceObject.load(window.WebFontConfig),FlashMessages.DISPLAY_TEMPLATE=new Template('<div class="sitemessage">#{message}</div>'),FlashMessages.COOKIE_NAME="kong_flash_messages",FlashMessages.prototype={initialize:function(e){this._data={},Cookie.accept()&&(this._messages_node=$("global"),this._target_node=$("flash_messages_target"),this._insertMessages())},data:function(){return this._getDataFromCookie(),this._data},_getDataFromCookie:function(){var e=Cookie.get(FlashMessages.COOKIE_NAME);e&&(e=e.evalJSON(),this._data?Object.extend(this._data,e):this._data=e),this._clearCookie()},_insertMessages:function(){var e=this.data().messages;if(e){var t=null;if(this._target_node?(this._messages_node.remove(),t=this._target_node):this._messages_node&&(t=this._messages_node),t){t.innerHTML=e.map((function(e){return FlashMessages.DISPLAY_TEMPLATE.evaluate({message:e})})).join();try{active_user.showingBlueBar()}catch(e){}}}},_clearCookie:function(){Cookie.erase(FlashMessages.COOKIE_NAME,"/")}};var KongAds=function(){function e(e){return e.replace(/[^a-z0-9-+_]+/gi,"_").substr(0,10)}function t(t,n){var i=[],o=[],r=e(t);if(n instanceof Array){for(t=n.length;t--;)o[t]=e(n[t]);i.push([r,o])}else i.push([r,e(n)]);return i}function n(e){this.initialize(e)}return n.prototype={initialize:function(e){this._network_id=e.networkId,this._publisher_id=e.publisherId,this._rendering_mode=e.renderingMode,this._slots={},this._refreshAds=e.refreshAds,this._slotnamesToRefresh=[],this._targetingParams={}},defineAd:function(e,t,n){var i=this,o="/"+this._network_id+"/"+this._publisher_id+"/"+e;return googletag.cmd.push((function(){i._slots[e]=googletag.defineSlot(o,[t,n],e+"-ad-slot").addService(googletag.pubads())})),this},setTargeting:function(){var e=arguments,n=this;return googletag.cmd.push((function(){var i=googletag.pubads(),o=[];if(1==e.length)for(var r in e[0])o=o.concat(t(r,e[0][r]));else 2==e.length&&(o=o.concat(t(e[0],e[1])));for(r=o.length;r--;)n._targetingParams[o[r][0]]=o[r][1],i.setTargeting(o[r][0],o[r][1])})),this},targetingParams:function(){return this._targetingParams},displayAd:function(e){return googletag.cmd.push((function(){googletag.display(e+"-ad-slot")})),this},requestAds:function(){if(document.location.search.match(/username=/)||document.referrer.match(/username=/))return this;if(googletag.cmd.push((function(){var e=googletag.pubads();e[renderingMode](),e.enableSingleRequest(),googletag.enableServices()})),this._refreshAds){var e=this;setInterval((function(){e.refreshSlots()}),KongAds.REFRESH_INTERVAL)}return this},refreshSlots:function(){if(0!==this._slotnamesToRefresh.length){var e=this,t=$j.map(this._slotnamesToRefresh,(function(t){return e.getSlot(t)}));if(0<t.length)try{googletag.pubads().refresh(t),"undefined"!=typeof metricTracker&&metricTracker.trackEvent("AdRefresh",window.location.pathname,Object.toJSON(this._slotnamesToRefresh)),this._slotnamesToRefresh=[]}catch(e){"undefined"!=typeof console&&console.error("Ad refresh threw error: "+e.message)}}},addRefreshableSlot:function(e){this._slotnamesToRefresh.push(e)},getSlot:function(e){return this._slots[e]}},{KongDFPAds:n}}();KongAds.REFRESH_INTERVAL=12e4;var KongDFPAds=KongAds.KongDFPAds;function PostMessageHandler(e){function t(e){var t;o.find((function(n){return t=n(e)})),t&&t()}function n(e){t.defer(e.evalJSON())}function i(e){if(e.origin==window.location.protocol+"//"+window.location.host)try{n(e.data)}catch(e){}}var o=[];return window.attachEvent?window.attachEvent("onmessage",i):window.addEventListener("message",i,!1),{addCallback:function(e){o.push(e)},getHandlers:function(){return o},runCallbackForUnparsedPayload:n}}function AgeGate(e,t){e&&t?this.initialize(e,t):this.initialize(null,e)}AgeGate.MONTHS="January February March April May June July August September October November December".split(" "),AgeGate.prototype={initialize:function(e,t){var n=this;this._cookie_name=t.cookie_name||"age_gate",this._required_age=t.required_age,this._age_met=!1,(this._use_form=void 0===t.use_form||t.use_form)&&(this._element=$(e),this._button_text=t.button_text||"Go"),this._onSuccess=(t.onSuccess||function(){}).wrap((function(e){return n._age_met=!0,Cookie.set(n._cookie_name,"YES"),e()})),this._onFailure=(t.onFailure||function(){}).wrap((function(e){return Cookie.set(n._cookie_name,"NO"),e()})),this._onError=t.onError||function(){},this.preflight()||this._age_met||(this._use_form?this.writeForm():this._onFailure())},preflight:function(){var e=Cookie.get(this._cookie_name);return"YES"==e?(this._onSuccess(),!0):"NO"==e&&(this._onFailure(),!0)},writeForm:function(){var e=this,t="",n=0;for(t='<form action="#"><dl><dt><label>Date of Birth</label></dt><dd id="date"><select id="user_month" name="user_month"><option value=""></option>',n=0;n<AgeGate.MONTHS.length;n++)t+='<option value="'+n+'">'+AgeGate.MONTHS[n]+"</option>";for(t+='</select><select id="user_day" name="user_day"><option value=""></option>',n=1;31>=n;n++)t+='<option value="'+n+'">'+n+"</option>";for(t+='</select><select id="user_year" name="user_year"><option value=""></option>',n=2005;1908<=n;n--)t+='<option value="'+n+'">'+n+"</option>";t=t+'</select></dd></dl><input type="submit" value="'+this._button_text+'" />',this._element.innerHTML+=t+"</form>",function(){e._element.immediateDescendants()[0].onsubmit=function(){return e.checkAge(this),!1}}.defer()},checkAge:function(e){var t=Number(e.user_month.getValue()),n=Number(e.user_day.getValue());e=Number(e.user_year.getValue()),isNaN(t)||0===n||0===e?this._onError():(t=new Date(e+this._required_age,t,n),0>(new Date).getTime()-t.getTime()?this._onFailure():this._onSuccess())}};var AsyncLoader={load:function(e,t,n){var i=document;switch(e){case"js":var o=i.createElement("script");o.type="text/javascript",o.async=!0,o.src=t;break;case"css":(o=i.createElement("link")).href=t,o.rel="stylesheet";break;default:return}if(n){var r=!1;o.onload=o.onreadystatechange=function(e){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,n(e),o.onload=o.onreadystatechange=null)}}(e=document.getElementsByTagName("script")[0]).parentNode.insertBefore(o,e)}};function BrowserNag(){var e=this;$j(document).on("click",".browser-notice--hide a",(function(){return e.hide(),!1})),"hide"!==Cookie.get("browser_upgrade_notice")&&this.show()}BrowserNag.initialize=function(){BrowserNag.instance=new BrowserNag},BrowserNag.prototype={show:function(){$j(".browser-notice").show(),$j(".browser-notice--overlay").show(),$j("#game")&&$j("#game").css({top:"-10000px",left:"-10000px"})},hide:function(){Cookie.set("browser_upgrade_notice","hide",7),$j(".browser-notice").hide(),$j(".browser-notice--overlay").hide(),$j("#game")&&$j("#game").css({top:"",left:""})}},Kongregate.PostMessage={addMessageListener:function(e,t){if(e.document.addEventListener)try{e.document.addEventListener.call(e,"message",t,!1)}catch(n){Kongregate.Log.debug("addEventListener failed, using iframe addEventListener: "+n),Kongregate.PostMessage.createIframeEventListener(e,t)}else e.attachEvent?e.attachEvent("onmessage",t):Kongregate.Log.error("Could not add event listener, neither addEventListener or attachEvent found!");return t},removeMessageListener:function(e,t){e.removeEventListener?e.removeEventListener("message",t):e.detachEvent&&e.detachEvent("onmessage",t)},supportsObjects:function(){var e=document.createElement("iframe"),t=!0;e.src="about:blank",document.body.appendChild(e);try{e.contentWindow.postMessage({toString:function(){return t=!1,""}},"*")}catch(e){}return document.body.removeChild(e),t},parseMessage:function(e){return"string"==typeof e&&"{"===e.charAt(0)?JSON.parse(e):"object"==typeof e?e:null},createIframeEventListener:function(e,t){var n=document.createElement("iframe");n.src="about:blank",document.head.appendChild(n),n.contentWindow.addEventListener.call(e,"message",t,!1),document.head.removeChild(n)}};var slice=Array.prototype.slice;function CrossFrameDataStore(e){this.initialize(e)}function FollowToggleButton(e){this.initialize(e)}function stretch(){var e=$j(".main_navigation").offset();if(e){e=e.left;var t=$j("body").width();$j(".main_nav_menu").css("left",-1*e),$j(".main_nav_menu").css("width",t)}}Evented={on:function(e,t,n){if(this.__callbacks||(this.__callbacks={}),this.__callbacks[e]||(this.__callbacks[e]=[]),n){var i=slice.call(arguments,3);i.unshift(t),i=Function.prototype.bind.apply(t[n],i)}else i=t;this.__callbacks[e].push(i)},trigger:function(e){var t=slice.call(arguments,1);this.__callbacks&&this.__callbacks[e]&&$j.each(this.__callbacks[e],(function(e,n){n.apply(null,t)}))}},CrossFrameDataStore.MESSAGE_TYPE="kongregate:cross-frame-data-store",CrossFrameDataStore.LIGHTBOX_NAME="kongregateLightbox",CrossFrameDataStore.update=function(e,t,n){e.postMessage(JSON.stringify({type:CrossFrameDataStore.MESSAGE_TYPE,name:t,data:n}),"*")},CrossFrameDataStore.updateLightbox=function(e){var t=Kongregate.Utils.findKongregateWindow();CrossFrameDataStore.update(t,CrossFrameDataStore.LIGHTBOX_NAME,e)},CrossFrameDataStore.closeLightbox=function(){CrossFrameDataStore.updateLightbox({close:!0})},CrossFrameDataStore.prototype={initialize:function(e){this.domain=e.domain,this.name=e.name,this.window=e.window||window,this.clear(),this.messageListener=Kongregate.PostMessage.addMessageListener(this.window,this.onMessage.bind(this))},clear:function(){this.data={}},shutdown:function(){Kongregate.PostMessage.removeMessageListener(this.window,this.messageListener),this.__callbacks={}},onMessage:function(e){var t=e.origin||e.originalEvent.origin;if(t==="http://"+this.domain||t==="https://"+this.domain)try{var n=e.data,i=Kongregate.PostMessage.parseMessage(n);i&&i.type===CrossFrameDataStore.MESSAGE_TYPE&&this.processMessage(i)}catch(e){Kongregate.Log.warn("Error parsing message",n,e)}},processMessage:function(e){e.name===this.name&&(Kongregate.Log.debug("Updating cross frame data store "+name,e.data),$j.extend(this.data,e.data),this.trigger("change",this.data))}},$j.extend(CrossFrameDataStore.prototype,Evented),Date.now||(Date.now=function(){return(new Date).getTime()}),DynamicFrameTarget=function(e){this.initialize(e)},DynamicFrameTarget.prototype={initialize:function(e){this.name="dynamic_frame_"+ +new Date,this.frame=new Element("iframe",{name:this.name,id:this.name}),$(document.body).insert(this.frame),this.frame.setStyle({display:"none"}),e.form.target=this.name;var t=window.location.protocol.sub(":","");t=new Element("input",{type:"hidden",name:"source_protocol",value:t}),e.form.appendChild(t);var n=this;t=function(){if(this.contentDocument)var e=this.contentDocument;else this.contentWindow?e=this.contentWindow.document:window.frames[this.name]?e=window.frames[iframe.name].document:n.frame.contentWindow.document&&(e=n.frame.contentWindow.document);e&&0<e.body.innerHTML.length&&(e=e.body,(e=String((0<e.childElementCount?e.children[0]:e).innerHTML))&&!e.blank()&&n.callback(e.evalJSON()))},this.frame.attachEvent?this.frame.attachEvent("onload",t):this.frame.onload=t,this.callback=e.callback?e.callback:function(t){t.success?e.success&&e.success(t):e.failure&&e.failure(t)}}},DynamicFrameTarget.subclasses=[],FeedHandler=Class.create({_feedType:"self",_feedContainerName:"feed_items_container",_feedContainer:null,_feedItemIds:[],_offset:0,_pageSize:20,_morePath:null,_destroyPath:null,_blinking:!1,initialize:function(e,t,n,i,o){this._feedType=e,this._feedContainerName=t,this._pageSize=n,this._morePath=i,this._destroyPath=o,this._self_disabling={},$(document).observe("click",this.clickHandler.bindAsEventListener(this))},setOffset:function(e){this._offset=e},addFeedItemIds:function(e){this._feedItemIds=this._feedItemIds.concat(e||[])},updateFeedInfo:function(e,t){this.setOffset(e),this.addFeedItemIds(t),this.setFirstFeedItemClass()},container:function(){return this._feedContainer||(this._feedContainer=$(this._feedContainerName)),this._feedContainer},indicator:function(){return this.container().select("#more_feed_items_indicator").first()},showMoreElement:function(){return this.container().select("#show_more_feed_items_label").first()},automaticallyFetchMore:function(){null!==this._morePath.match(/mini_feed_items/)?15>$$(".mini_item").length&&this.requestNextPage():15>$$(".feed_item").length&&this.requestNextPage()},setFirstFeedItemClass:function(){this.container().select(".first_feed_item").each((function(e){e.removeClassName("first_feed_item")}));var e=this.container().select(".feed_item").first();e&&e.addClassName("first_feed_item")},insertMoreShoutComments:function(e){var t=e.message_id;e.new_url?($("show_more_comments_link_"+t).href=e.new_url,$("show_more_comments_link_"+t).show()):$("show_more_comments_link_"+t).hide(),$("shout_indicator_"+t).hide(),$("shout_short_comments_"+t).hide(),$("shout_more_comments_"+t).insert({top:e.content})},requestNextPage:function(){var e=this.indicator(),t=this;e&&!e.visible()&&(e.show(),this.showMoreElement().hide(),new Ajax.Request(this._morePath,{parameters:{feed_type:this._feedType,offset:this._offset,num:this._pageSize,excluded_ids:this._feedItemIds.join(","),excluded_followed_users:$$(".js_followed_username").map((function(e){return e.innerHTML})).uniq().join(","),excluded_forum_users:$$(".js_forum_post_user").map((function(e){return e.innerHTML})).uniq().join(",")},method:"get",onSuccess:function(e){t.container().select("#additional_feed_items").first().remove(),t.container().insert(e.responseText),t.setFirstFeedItemClass()},onFailure:function(e){t.indicator().hide(),t.showMoreElement().show()}}))},requestNextPageIfMoreItemsNeeded:function(){1500>this.container().getHeight()&&this.requestNextPage()},removeFeedItems:function(e){e instanceof Array&&!(0>=e.length)&&(new Effect.DropOut("feed_item_"+e[0]),new Ajax.Request(this._destroyPath,{method:"post",parameters:{ids:e.join(","),context:this._feedType},onSuccess:function(){},onFailure:function(){}}))},unfollowUser:function(e,t){new Effect.DropOut("feed_item_"+t[0]),new Ajax.Request("/accounts/"+active_user.username()+"/friends/"+e+".json",{method:"put",parameters:{unfriend_from:"feed"},onSuccess:function(){},onFailure:function(){}})},blockGame:function(e,t,n){new Effect.DropOut("feed_item_"+n),new Ajax.Request("/games/"+t+"/"+e+"/blocks",{method:"post",parameters:{user_game_permissions:{allow_something:!1}},onSuccess:function(){},onFailure:function(){}})},isMiniFeed:function(){return null!==this._morePath.match(/mini_feed_items/)},feedItemElement:function(e){return this.isMiniFeed()?$("mini_item_"+e):$("feed_item_"+e)},observeUnlike:function(e){null!==(e=this.feedItemElement(e).down(".like_link"))&&(e.observe("mouseenter",(function(){this.down(".like_text").update("Unlike")})),e.observe("mouseleave",(function(){this.down(".like_text").update("Liked")})))},likeFeedItem:function(e){var t=this;this._self_disabling[e]||(this._self_disabling[e]=!0,new Ajax.Request("/user_likes",{method:"post",parameters:{feed_item_id:e},onSuccess:function(n){var i=null;t.isMiniFeed()?((i=$("mini_item_"+e)).down(".like_link").removeClassName("feed_like"),i.down(".like_link").addClassName("feed_unlike")):(i=$("feed_item_"+e)).down(".like_text").update("Liked"),i.down(".like_link").onclick=function(){return feedHandler.unlikeFeedItem(e),!1},t._self_disabling[e]=null,t.observeUnlike(e),i.down(".like_count").update("("+n.responseJSON.count+")")},onFailure:function(){t._self_disabling[e]=null}}))},unlikeFeedItem:function(e){var t=this;this._self_disabling[e]||(this._self_disabling[e]=!0,new Ajax.Request("/user_likes",{method:"delete",parameters:{feed_item_id:e},onSuccess:function(n){var i=null;(i=t.isMiniFeed()?$("mini_item_"+e):$("feed_item_"+e)).down(".like_link").onclick=function(){return feedHandler.likeFeedItem(e),!1},t._self_disabling[e]=null,i.down(".like_text").update("Like"),i.down(".like_link").stopObserving("mouseenter"),i.down(".like_link").stopObserving("mouseleave"),t.isMiniFeed()?(i.down(".like_link").removeClassName("feed_unlike"),i.down(".like_link").addClassName("feed_like")):i.down(".like_count").update("("+n.responseJSON.count+")")},onFailure:function(){t._self_disabling[e]=null}}))},clickHandler:function(e){var t=e.element();if(this.isMiniFeed())(e=t.hasClassName("mini_item")?t:t.up(".mini_item"))&&(e=e.id.sub("mini_item_",""))&&((t=(t=Cookie.get("feed_item_clicks"))?t.evalJSON():{}).mini=t.mini||[],t.mini=t.mini.concat([e]),Cookie.set("feed_item_clicks",Object.toJSON(t)));else if(e=t.hasClassName("feed_item")?t:t.up(".feed_item")){var n=t.up("a");("A"==t.nodeName||n)&&(t="A"==t.nodeName?t.href:n.href,e=e.id.sub("feed_item_",""),t&&!t.match(/#$/)&&((t=(t=Cookie.get("feed_item_clicks"))?t.evalJSON():{})[this._feedType]=t[this._feedType]||[],t[this._feedType]=t[this._feedType].concat([e]),Cookie.set("feed_item_clicks",Object.toJSON(t))))}}}),FollowToggleButton.prototype={initialize:function(e){this._indicatorTag=e},mouseOver:function(e){(e=Event.findElement(e)).removeClassName("btn_alt"),e.update("Unfriend")},mouseOut:function(e){(e=Event.findElement(e)).addClassName("btn_alt"),e.update("Friend")},toggle:function(e){(e=Event.findElement(e)).update(this._indicatorTag),e.onmouseover="",e.onmouseout=""}},WebFont.load({timeout:2e3,google:{families:["Open+Sans:300italic,400italic,600italic,300,400,600&subset=latin,latin-ext"]},inactive:function(){WebFont.load({custom:{families:["Open Sans"],urls:["/stylesheets/open_sans.css"]}}),WebFont.load({custom:{families:["Source Sans Pro"],urls:["/stylesheets/source_sans_pro.css"]}})}}),WebFont.load({timeout:2e3,google:{families:["Source+Sans+Pro:200,400,600,700,400italic,600italic,700italic&subset=latin,latin-ext"]},inactive:function(){WebFont.load({custom:{families:["Open Sans"],urls:["/stylesheets/open_sans.css"]}}),WebFont.load({custom:{families:["Source Sans Pro"],urls:["/stylesheets/source_sans_pro.css"]}})}}),function(){function e(e,t,n){Kongregate.Log[e]=function(){try{"undefined"!=typeof active_user&&void 0===Kongregate.Log.debugLevel&&(Kongregate.Log.debugLevel=active_user.debugLevel()),(0===t||Kongregate.Log.debugLevel>=t)&&(console[n]?Function.prototype.apply.call(console[n],console,arguments):console.log(arguments))}catch(e){}}}Kongregate.Log={},e("spam",5,"log"),e("debug",4,"log"),e("info",3,"info"),e("warn",2,"warn"),e("error",1,"error"),e("always",0,"log")}(),$j((function(){$j(".main_navigation").addClass("js-nav"),stretch(),$j(".main_nav_item").mouseover((function(){Shim.lock(),stretch(),game_title_auto_completer&&game_title_auto_completer.hide()})),$j(".main_nav_item").mouseout((function(){Shim.unlock()})),$j(window).resize((function(){stretch()})),Prototype.Browser.IE9||Prototype.Browser.IE8?($j("body").addClass("no-cssanimation"),$j("body").addClass("no-flexbox"),$j(".main_nav_menu").each((function(){var e=$j(this),t=e.height();e.data("height",t+"px")})),$j(".main_nav_item").hover((function(){var e=$j(this).find(".main_nav_menu"),t=e.data("height");e.css("height","0px").css("display","block"),e.animate({height:t},{duration:120,queue:!1,complete:function(){Shim.shimElement(e[0])}})}),(function(){$j(this).find(".main_nav_menu").animate({height:"0px"},{duration:120,queue:!1,complete:function(){Shim.hide()}})}))):(Prototype.Browser.IE10||/windows/.test(navigator.userAgent.toLowerCase()))&&$j(".main_nav_menu").bind("transitionend",(function(){var e=$j(this);0<e.height()?Shim.shimElement(e[0]):Shim.hide()}))}));var NativeApp=function(){var e={isInstalled:function(t){return!!e.isNativeApp()&&kongNativeApp.isInstalled(t)},isNativeApp:function(){return"undefined"!=typeof kongNativeApp},downloadGame:function(t){e.isNativeApp()?window.open(t):window.location=t},launchGame:function(t){e.isNativeApp()&&kongNativeApp.sendMessage(JSON.stringify({opcode:"launch_game",params:{game_id:t}}))},browseGames:function(){e.isNativeApp()?window.location="/games/index_native?installed="+kongNativeApp.getInstalledGameIds():window.location="/games/index_native"}};return e}();Kongregate.navigationData=function(e,t){return $j.extend(!0,t,{user:{username:e.username(),level:e.level(),points:e.points(),points_away:e.pointsAway(),friends_online_count:e.friendsOnlineCount(),has_friends_online:0<e.friendsOnlineCount(),unread_shouts_count:e.unreadShoutsCount(),unread_whispers_count:e.unreadWhispersCount(),unread_game_messages_count:e.unreadGameMessagesCount(),total_message_count:e.unreadShoutsCount()+e.unreadWhispersCount()+e.unreadGameMessagesCount(),kreds_balance:e.kredsBalance(),moderator:e.isChatModerator(),authenticated:e.isAuthenticated(),next_level:e.level()+1,is_max_level:75==e.level(),progress_bar_width:e.pointsAfterLastLevel()/(e.pointsAway()+e.pointsAfterLastLevel())*100,facebook_connected:e.isFacebookConnected(),has_chips:null!==e.chipsBalance(),chips_balance:e.chipsBalance()}}),t.games.recommended&&$j.each(t.games.recommended,(function(){$j.extend(this,{metric_category:"Recommended"})})),t.games.recently_played&&$j.each(t.games.recently_played,(function(){$j.extend(this,{metric_category:"Recently_Played"})})),t.games.playlist&&$j.each(t.games.playlist,(function(){$j.extend(this,{metric_category:"Playlist"})})),t};var PaymentHelpText={showHelpText:function(e,t){var n=$("help_wrapper");t=$(t),""!==e&&null!==e&&"error_msg"!=t.className&&(t.appendChild(n),$("help_text").innerHTML=e,n.show())},hideHelpText:function(){$("help_wrapper").hide()}};Array.prototype.filter||(Array.prototype.filter=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var i=[],o=2<=arguments.length?arguments[1]:void 0,r=0;r<n;r++)if(r in t){var s=t[r];e.call(o,s,r,t)&&i.push(s)}return i}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),r=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(n=t),i=0;i<r;){if(i in o){var s=o[i];e.call(n,s,i,o)}i++}}),Array.prototype.includes||(Array.prototype.includes=function(e,t){var n,i=Object(this),o=parseInt(i.length)||0;if(0===o)return!1;for(0<=(t=parseInt(t)||0)||0>(t=o+t)&&(t=0);t<o;){if(e===(n=i[t])||e!=e&&n!=n)return!0;t++}return!1}),Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),i=n.length;return function(o){if("function"!=typeof o&&("object"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var r,s=[];for(r in o)e.call(o,r)&&s.push(r);if(t)for(r=0;r<i;r++)e.call(o,n[r])&&s.push(n[r]);return s}}()),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),TimeInWordsHelper={distanceInWords:function(e,t,n){return e=e.getTime(),t=t.getTime(),t=Math.round(Math.abs(e-t)/1e3),1>=(e=Math.round(t/60))?n?5>t?"less than 5 seconds":10>t?"less than 10 seconds":20>t?"less than 20 seconds":40>t?"half a minute":60>t?"less than a minute":"1 minute":0===e?"less than a minute":"1 minute":45>e?e+" minutes":90>e?"1 hour":1440>e?Math.round(e/60)+" hours":2880>e?"1 day":43200>e?Math.round(e/1440)+" days":86400>e?"about 1 month":525600>e?Math.round(e/43200)+" months":1051200>e?"about 1 year":"over "+Math.round(e/525600)+" years"},distanceInWordsFromNow:function(e,t){return TimeInWordsHelper.distanceInWords(new Date,e,t)}},UserStatus=function(){this.initialize()},function(){var e=function(){try{$("welcome_box_sign_in_button").restore()}catch(e){}try{$("sessions_new_form_spinner").restore()}catch(e){}};UserStatus.prototype={initialize:function(){this.delayed_response=null,this.triggerGoogleTagDelayed()},destination:function(e){var t=$$("link[rel=destination]")[0];return t?t.href:e.destination_uri?e.destination_uri:void 0},handleSignup:function(e){e.success?this.accountCreationSuccess(e):this.accountCreationFailure(e)},facebookSignInSuccess:function(e){active_user.isAuthenticated()&&e.new_facebook_connection?this.existingUserConnected():e.existing_user?this.setActiveUser(e):this.accountCreationSuccess(e)},existingUserConnected:function(){new FacebookFriendFinder((function(e){try{lightbox.prototype.shutdown()}catch(e){}lightbox.prototype.initializeKongregateLightboxFromAjax("/facebook_connection/confirm",{done_class_name:0<e.friends.length?"wide":"fb_confirm_narrow",afterStaticContentLoad:function(){0<e.friends.length?e.displayFriendForm("/account"+active_user.username()+"/friends/create_many",$("facebook_friends"),(function(){try{lightbox.prototype.shutdown()}catch(e){}})):$("facebook_friends_wrapper").hide(),lightbox.prototype.addOnCloseCallback((function(){active_user.isGamePage()?$$(".facebook_nav_item").invoke("hide"):window.location.reload()}))}})}))},accountCreationSuccess:function(e){if(e.game){if(active_user.setJustRegisteredOnGamePage(),e.from_facebook){try{lightbox.prototype.shutdown()}catch(e){}lightbox.prototype.initializeKongregateLightboxFromAjax(e.full_finalize_form_facebook_connection_url,{done_class_name:"lightbox_login"}),this.delayed_response=e}else this.setActiveUser(e,!0),lightbox.prototype.showConfirmation();active_user.isGamePage()&&this.googleTagRegistration()}else if(e.from_facebook){this.delayed_response=e;try{lightbox.prototype.shutdown()}catch(e){}lightbox.prototype.initializeKongregateLightboxFromAjax(e.full_finalize_form_facebook_connection_url,{done_class_name:"lightbox_login"})}else this.setupJustRegisteredCookie(),e=this.destination(e),lightbox.prototype.showConfirmation(e)},triggerGoogleTagDelayed:function(){null!==Cookie.get("just_registered")&&(Cookie.erase("just_registered","/"),setTimeout(this.googleTagRegistration.bind(this),0))},googleTagRegistration:function(){var e=active_user.src()?"_"+active_user.src():"";dataLayer.push({event:"registration"+e})},accountCreationFailure:function(e){"undefined"!=typeof tracking_code_service&&tracking_code_service.reportTrackingCode(),e.banned?e.from_lightbox?$("lightbox_email_register").replace(e.content):window.location.href=e.banned_url:e.ip_limit_reached?e.from_lightbox?parent.lightbox_registration_form_validator.showIpLimitMessage():parent.registration_form_validator.showIpLimitMessage():e.from_lightbox?parent.lightbox_registration_form_validator.updateErrorMessages(e.errors,e.email_address):e.errors&&parent.registration_form_validator.updateErrorMessages(e.errors,e.email_address)},sessionStatus:function(t){if(window.frames.secure_login_frame&&(window.frames.secure_login_frame.location.href="about:blank"),Cookie.accept())if(t.authenticated)if(t.game)user_status.setActiveUser(t);else{try{$("welcome_box_sign_in_button").disable()}catch(e){}window.location.href=user_status.destination(t)}else t.ban_id?window.location.href=t.banned_url:t.mfa_content?(t.from_lightbox?lightbox.prototype.updateWithContent(t.mfa_content):lightbox.prototype.initializeKongregateLightboxFromContent(t.mfa_content,{done_class_name:"lightbox_login"}),e()):"/session/new"==window.location.pathname?window.location.href="https://"+window.location.hostname+"/session/new":(t.from_lightbox&&$("lightboxlogin").replace(t.content),e(),t.native_app||active_user.activateInlineLogin());else window.location.href="http://"+window.location.hostname+"/session/new"},finalizeCompletion:function(e){response=e&&e.response?e.response:this.delayed_response,this.setActiveUser(response,!0);try{lightbox.prototype.shutdown()}catch(e){}if(lightbox.prototype.initializeKongregateLightboxFromAjax("/accounts/new/confirmation"),!active_user.isGamePage()||!0===response.user_blocked_from_game){var t=this.destination(response);lightbox.prototype.addOnCloseCallback((function(){t?window.location.href=this.destination(response):window.location.reload()}))}},finalizeFailure:function(e){$("lightbox").visible()||holodeck.isShowingSignupTab()?($j.each(e.errors,(function(t){$j("#user_"+t+"_error_block").html(e.errors[t])})),$("facebook_signup_submit_button").restore()):this.setActiveUser(this.delayed_response)},showFriendFinderForm:function(e,t){var n="/accounts/"+t.username+"/friends/create_many",i=function(){t.new_facebook_connection=!1,this.setActiveUser(t)}.bind(this);try{lightbox.prototype.shutdownWithoutCallbacks()}catch(e){}lightbox.prototype.initializeKongregateLightboxFromContent('<div id="facebook_friends"></div>',{done_class_name:"lightbox_login",afterStaticContentLoad:function(){e.displayFriendForm(n,$("facebook_friends"),(function(){try{lightbox.prototype.shutdown()}catch(e){}})),lightbox.prototype.addOnCloseCallback(i)}})},setupWelcomeMessageCookie:function(e){(e=Cookie.get("temp_flash_message"))&&(Cookie.set(FlashMessages.COOKIE_NAME,Object.toJSON({messages:[e]})),Cookie.erase("temp_flash_message","/"))},setupJustRegisteredCookie:function(){Cookie.set("just_registered","true",10,"/")},setActiveUser:function(e,t){if(e&&e.new_facebook_connection)new FacebookFriendFinder(function(n){0<n.friends.length&&$("facebook_friends")?this.showFriendFinderForm(n,e):(e.new_facebook_connection=!1,this.setActiveUser(e,t))}.bind(this));else{try{t||CrossFrameDataStore.closeLightbox(),"undefined"!=typeof tracking_code_service&&tracking_code_service.reportTrackingCode()}catch(e){}if(active_user.isGamePage()&&!0!==e.user_blocked_from_game)active_user.updateAttributes(e.user_data_hash),active_user.acceptedPrivacyPolicy()||window.location.reload(),Navigation.loadContent(Kongregate.navigationData(active_user,e.nav_data_hash)),Navigation.fixMyKong(),window.holodeck?(holodeck.switchUser(e.chat_username,e.chat_password,e.user_chat_hash,e.game_auth_token,e.user_id,!0),holodeck.closeSignupTab(),holodeck.closeSigninTab(),holodeck.rebootstrapChat(),GameMetricsUpdater.update(),e.default_nag&&holodeck.updateDefaultChatNag(e.default_nag),active_user.runCapturedFunction(),holodeck.redoPromptSavedSharedContent(),holodeck.redoShowSharedContentsIndex(),holodeck.loadAdminControls(active_user),e.has_pending_collaborators&&holodeck.loadCollaborators(),holodeck.loadDiscussions(),holodeck.prepareAvatarTab()):(active_user.runCapturedFunction(),GameMetricsUpdater.update());else if(this.setupWelcomeMessageCookie(e),this.setupJustRegisteredCookie(),!t)try{this.destination(e)&&!e.from_facebook?window.location.href=this.destination(e):window.location.reload()}catch(e){window.location.reload()}}}}}();var user_status=new UserStatus;WebAnalytics=function(e){this.initialize(e)},WebAnalytics.prototype={initialize:function(e){},trackEvent:function(e,t,n,i,o){},trackPageView:function(e){},setCustomVariable:function(e,t,n,i){},setCustomVisitorVariable:function(e,t,n){},setCustomSessionVariable:function(e,t,n){},setCustomPageVariable:function(e,t,n){}},GoogleAnalytics=function(e){WebAnalytics.call(this,e)},GoogleAnalytics.prototype=new WebAnalytics,GoogleAnalytics.prototype.constructor=GoogleAnalytics,GoogleAnalytics.prototype={asyncTrackerName:"",initialize:function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://ssl.google-analytics.com/ga.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window._gaq=window._gaq||[],window.MAX_EVENT_TIME=6e4,e.createAsyncTracker?window._gaq.push((function(){this.asyncTrackerName=e.createAsyncTracker.name,window._gaq._createAsyncTracker(e.analyticsCode,this.asyncTrackerName)})):window._gaq.push(["_setAccount",e.analyticsCode]),window._gaq.push(["_gat._anonymizeIp"]),e.setDomain&&window._gaq.push(["_setDomainName","none"]),e.trackPageView&&this.trackPageView()},trackEvent:function(e,t,n,i,o){window._gaq.push([this._determineEventName("_trackEvent"),e,t,n,i,o])},trackPageView:function(e){window._gaq.push([this._determineEventName("_trackPageview"),e])},setCustomVariable:function(e,t,n,i){window._gaq.push([this._determineEventName("_setCustomVar"),e,t,n,i])},setCustomVisitorVariable:function(e,t,n){this.setCustomVariable(e,t,n,1)},setCustomSessionVariable:function(e,t,n){this.setCustomVariable(e,t,n,2)},setCustomPageVariable:function(e,t,n){this.setCustomVariable(e,t,n,3)},_determineEventName:function(e){return this.asyncTrackerName+e}},MetricTracker=function(e){this.initialize(e)},MetricTracker.prototype={trackers:[],maxEventTime:0,initialize:function(e){e.maxEventTime&&(this.maxEventTime=e.maxEventTime),jQuery(document).on("click","[data-metric-tracker]",(function(){var e=jQuery(this).data("metric-tracker").split("-");metricTracker.handleMetricTrackerAttr(e)})),e.googleAnalytics&&this.trackers.push(new GoogleAnalytics(e.googleAnalytics)),e.webAnalytics&&this.trackers.push(new WebAnalytics(e.webAnalytics))},trackClick:function(e,t,n,i){this.trackEvent(e,"Click",t,n,i)},trackEvent:function(e,t,n,i,o){jQuery.each(this.trackers,(function(r,s){s.trackEvent(e,t,n,i,o)}))},trackTimedEvent:function(e,t,n){0<n&&n<this.maxEventTime&&jQuery.each(this.trackers,(function(i,o){o.trackEvent("LoadTime",e,t,n)}))},trackPageView:function(e){jQuery.each(this.trackers,(function(t,n){n.trackPageView(e)}))},setCustomVariable:function(e,t,n,i){jQuery.each(this.trackers,(function(o,r){r.setCustomVariable(e,t,n,i)}))},setCustomVisitorVariable:function(e,t,n){jQuery.each(this.trackers,(function(i,o){o.setCustomVisitorVariable(e,t,n)}))},setCustomSessionVariable:function(e,t,n){jQuery.each(this.trackers,(function(i,o){o.setCustomSessionVariable(e,t,n)}))},setCustomPageVariable:function(e,t,n){jQuery.each(this.trackers,(function(i,o){o.setCustomPageVariable(e,t,n)}))},handleMetricTrackerAttr:function(e){var t=e[2],n=e.slice(3,e.length);switch(jQuery.each(n,(function(e,t){n[e]=t.replace(/_/g," ")})),t){case"tc":this.trackClick(n[0],n[1],n[2],n[3]);break;case"te":this.trackEvent(n[0],n[1],n[2],n[3],n[4]);break;case"tpv":this.trackPageView(n[0]);break;case"scv":this.setCustomVariable(n[0],n[1],n[2],n[3]);break;case"scvv":this.setCustomVisitorVariable(n[0],n[1],n[2]);break;case"scsv":this.setCustomSessionVariable(n[0],n[1],n[2]);break;case"scpv":this.setCustomPageVariable(n[0],n[1],n[2])}}},function(e){function t(e,t){t=t||0;var n=l;return n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+"-"+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]+n[e[t++]]}function n(e,n,o){if(o=n&&o||0,"string"==typeof e&&(n="binary"===e?new a(16):null,e=null),(e=(e=e||{}).random||(e.rng||i)())[6]=15&e[6]|64,e[8]=63&e[8]|128,n)for(var r=0;16>r;r++)n[o+r]=e[r];return n||t(e)}var i,o,r,s;e?function(){var t=e.crypto||e.msCrypto;if(!i&&t&&t.getRandomValues)try{var n=new Uint8Array(16);s=i=function(){return t.getRandomValues(n),n},i()}catch(e){}if(!i){var r=Array(16);o=i=function(){for(var e,t=0;16>t;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}():function(){if("function"==typeof require)try{var e=require("crypto").randomBytes;r=i=e&&function(){return e(16)},i()}catch(e){}}();for(var a="function"==typeof Buffer?Buffer:Array,l=[],c={},u=0;256>u;u++)l[u]=(u+256).toString(16).substr(1),c[l[u]]=u;var h=[1|(u=i())[0],u[1],u[2],u[3],u[4],u[5]],d=16383&(u[6]<<8|u[7]),f=0,p=0;if(n.v1=function(e,n,i){i=n&&i||0;var o=n||[],r=null!=(e=e||{}).clockseq?e.clockseq:d,s=null!=e.msecs?e.msecs:(new Date).getTime(),a=null!=e.nsecs?e.nsecs:p+1,l=s-f+(a-p)/1e4;if(0>l&&null==e.clockseq&&(r=r+1&16383),(0>l||s>f)&&null==e.nsecs&&(a=0),1e4<=a)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(f=s,p=a,d=r,a=(1e4*(268435455&(s+=122192928e5))+a)%4294967296,o[i++]=a>>>24&255,o[i++]=a>>>16&255,o[i++]=a>>>8&255,o[i++]=255&a,s=s/4294967296*1e4&268435455,o[i++]=s>>>8&255,o[i++]=255&s,o[i++]=s>>>24&15|16,o[i++]=s>>>16&255,o[i++]=r>>>8|128,o[i++]=255&r,e=e.node||h,r=0;6>r;r++)o[i+r]=e[r];return n||t(o)},n.v4=n,n.parse=function(e,t,n){var i=t&&n||0,o=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,(function(e){16>o&&(t[i+o++]=c[e])}));16>o;)t[i+o++]=0;return t},n.unparse=t,n.BufferClass=a,n._rng=i,n._mathRNG=o,n._nodeRNG=r,n._whatwgRNG=s,"undefined"!=typeof module&&module.exports)module.exports=n;else if("function"==typeof define&&define.amd)define((function(){return n}));else{var m=e.uuid;n.noConflict=function(){return e.uuid=m,n},e.uuid=n}}("undefined"!=typeof window?window:null);