function KongModal(e){this.onOpen=e.onOpen,this.onClose=e.onClose,this.onCreate=e.onCreate,this.listeners=e.listeners,this.fetchContent=e.fetchContent,this.content=e.content,this.containerClasses=e.classes}KongModal.prototype={init:function(){return this._build(),this.onCreate&&"function"==typeof this.onCreate&&this.onCreate(),this},_build:function(){if(this.modalContainer=document.createElement("div"),this.modalContainer.className="kong-modal-container",document.body.appendChild(this.modalContainer),this.modalContent=document.createElement("div"),this.modalContent.className="kong-modal-wrapper",this.containerClasses&&this.containerClasses.length)for(var e=0;e<this.containerClasses.length;e++)this.modalContent.classNames.add(this.containerClasses[e]);this.modalContainer.appendChild(this.modalContent),this.header=document.createElement("div"),this.header.className="kong-modal-header",this.modalContent.appendChild(this.header),this.titleElement=document.createElement("h1"),this.titleElement.className="kong-modal-title",this.titleElement.innerText="Kongregate",this.header.appendChild(this.titleElement),this.closeButtonElement=document.createElement("a"),this.closeButtonElement.className="kong-modal-close",this.closeButtonElement.innerText="CLOSE x",this.header.appendChild(this.closeButtonElement),this.contentArea=document.createElement("div"),this.contentArea.className="kong-modal-content",this.modalContent.appendChild(this.contentArea),this.pauseClose=!1,this._appendContent(),this.addDefaultListeners()},_appendContent:function(){if(!this.fetchContent&&this.content&&(this.content instanceof Element?this.contentArea.appendChild(this.content):"string"==typeof this.content&&(this.contentArea.innerHTML=this.content),this.listeners))for(var e=0;e<this.listeners.length;e++)this.listeners[e].element&&this.listeners[e].event&&this.listeners[e].callback&&this.createListener(this.listeners[e])},createListener:function(e){try{var t="string"==typeof e.element?this.modalContent.querySelector(e.element):e.element;e.bound?t.addEventListener(e.event,e.callback.bind(this)):t.addEventListener(e.event,e.callback)}catch(e){console.log("Error: ",e)}},addDefaultListeners:function(){var e=this;this.modalContainer.addEventListener("click",(function(t){t.target===e.modalContainer&&e.close()})),this.modalContent.addEventListener("click",(function(t){t.target.hasAttribute("data-close")&&e.close()})),this.closeButtonElement.addEventListener("click",this.close.bind(this))},open:function(){this.modalContainer.classList.add("is-visible"),document.body.classList.add("has-modal")},close:function(){!this.pauseClose&&(this.modalContainer.classList.remove("is-visible"),document.body.classList.remove("has-modal"),this.onClose)&&this.onClose()},destroy:function(){this.modalContent.remove()}},window.ModalService={cache:{},clearCache:function(){Object.keys(this.cache).forEach((function(e){this.cache[e].destroy()})),this.cache={}},clearCacheByKey:function(e){if("string"==typeof e)this.cache[e]&&(this.cache[e].destroy(),this.cache[e]=null);else if(Array.isArray(e)){var t=!1;e=e.reduce((function(e,n){return e[n]?e[n]:(t=!0,e)}),this.cache),t||(e.destroy(),e=null)}},createOrOpenModal:function(e){var t,n=e.key;if("string"==typeof n)this.cache[n]&&(t=this.cache[n]);else if(Array.isArray(n)){var i=!1,s=n.reduce((function(e,t){return e[t]?e[t]:(i=!0,e)}),this.cache);i||(t=s)}return t||(t=this.createModal(e),this.addToCache(n,t)),t.open(),!0},createModal:function(e){return new KongModal(e).init()},getByKey:function(e){return"string"==typeof e?this.cache[e]:Array.isArray(e)?e.reduce((function(e,t){if(e)return e[t]}),this.cache):void 0},addToCache:function(e,t){if("string"==typeof e)this.cache[e]=t;else if(Array.isArray(e)){var n=e.length-1;e.reduce((function(e,i,s){return e[i]=s===n?t:{},e[i]}),this.cache)}}};